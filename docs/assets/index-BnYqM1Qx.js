(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function I_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Dd={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function fI(){if(Pg)return ke;Pg=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.iterator;function N(D){return D===null||typeof D!="object"?null:(D=I&&D[I]||D["@@iterator"],typeof D=="function"?D:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,G={};function K(D,q,ge){this.props=D,this.context=q,this.refs=G,this.updater=ge||B}K.prototype.isReactComponent={},K.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},K.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function we(){}we.prototype=K.prototype;function he(D,q,ge){this.props=D,this.context=q,this.refs=G,this.updater=ge||B}var se=he.prototype=new we;se.constructor=he,Q(se,K.prototype),se.isPureReactComponent=!0;var _e=Array.isArray,Ae=Object.prototype.hasOwnProperty,me={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(D,q,ge){var Pe,Ce={},De=null,Fe=null;if(q!=null)for(Pe in q.ref!==void 0&&(Fe=q.ref),q.key!==void 0&&(De=""+q.key),q)Ae.call(q,Pe)&&!C.hasOwnProperty(Pe)&&(Ce[Pe]=q[Pe]);var Ue=arguments.length-2;if(Ue===1)Ce.children=ge;else if(1<Ue){for(var He=Array(Ue),Tt=0;Tt<Ue;Tt++)He[Tt]=arguments[Tt+2];Ce.children=He}if(D&&D.defaultProps)for(Pe in Ue=D.defaultProps,Ue)Ce[Pe]===void 0&&(Ce[Pe]=Ue[Pe]);return{$$typeof:s,type:D,key:De,ref:Fe,props:Ce,_owner:me.current}}function P(D,q){return{$$typeof:s,type:D.type,key:q,ref:D.ref,props:D.props,_owner:D._owner}}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function V(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ge){return q[ge]})}var b=/\/+/g;function A(D,q){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):q.toString(36)}function tt(D,q,ge,Pe,Ce){var De=typeof D;(De==="undefined"||De==="boolean")&&(D=null);var Fe=!1;if(D===null)Fe=!0;else switch(De){case"string":case"number":Fe=!0;break;case"object":switch(D.$$typeof){case s:case e:Fe=!0}}if(Fe)return Fe=D,Ce=Ce(Fe),D=Pe===""?"."+A(Fe,0):Pe,_e(Ce)?(ge="",D!=null&&(ge=D.replace(b,"$&/")+"/"),tt(Ce,q,ge,"",function(Tt){return Tt})):Ce!=null&&(k(Ce)&&(Ce=P(Ce,ge+(!Ce.key||Fe&&Fe.key===Ce.key?"":(""+Ce.key).replace(b,"$&/")+"/")+D)),q.push(Ce)),1;if(Fe=0,Pe=Pe===""?".":Pe+":",_e(D))for(var Ue=0;Ue<D.length;Ue++){De=D[Ue];var He=Pe+A(De,Ue);Fe+=tt(De,q,ge,He,Ce)}else if(He=N(D),typeof He=="function")for(D=He.call(D),Ue=0;!(De=D.next()).done;)De=De.value,He=Pe+A(De,Ue++),Fe+=tt(De,q,ge,He,Ce);else if(De==="object")throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return Fe}function wt(D,q,ge){if(D==null)return D;var Pe=[],Ce=0;return tt(D,Pe,"","",function(De){return q.call(ge,De,Ce++)}),Pe}function It(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(ge){(D._status===0||D._status===-1)&&(D._status=1,D._result=ge)},function(ge){(D._status===0||D._status===-1)&&(D._status=2,D._result=ge)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var Z={current:null},j={transition:null},re={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:j,ReactCurrentOwner:me};function te(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:wt,forEach:function(D,q,ge){wt(D,function(){q.apply(this,arguments)},ge)},count:function(D){var q=0;return wt(D,function(){q++}),q},toArray:function(D){return wt(D,function(q){return q})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ke.Component=K,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=he,ke.StrictMode=r,ke.Suspense=p,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,ke.act=te,ke.cloneElement=function(D,q,ge){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Pe=Q({},D.props),Ce=D.key,De=D.ref,Fe=D._owner;if(q!=null){if(q.ref!==void 0&&(De=q.ref,Fe=me.current),q.key!==void 0&&(Ce=""+q.key),D.type&&D.type.defaultProps)var Ue=D.type.defaultProps;for(He in q)Ae.call(q,He)&&!C.hasOwnProperty(He)&&(Pe[He]=q[He]===void 0&&Ue!==void 0?Ue[He]:q[He])}var He=arguments.length-2;if(He===1)Pe.children=ge;else if(1<He){Ue=Array(He);for(var Tt=0;Tt<He;Tt++)Ue[Tt]=arguments[Tt+2];Pe.children=Ue}return{$$typeof:s,type:D.type,key:Ce,ref:De,props:Pe,_owner:Fe}},ke.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},ke.createElement=T,ke.createFactory=function(D){var q=T.bind(null,D);return q.type=D,q},ke.createRef=function(){return{current:null}},ke.forwardRef=function(D){return{$$typeof:d,render:D}},ke.isValidElement=k,ke.lazy=function(D){return{$$typeof:w,_payload:{_status:-1,_result:D},_init:It}},ke.memo=function(D,q){return{$$typeof:_,type:D,compare:q===void 0?null:q}},ke.startTransition=function(D){var q=j.transition;j.transition={};try{D()}finally{j.transition=q}},ke.unstable_act=te,ke.useCallback=function(D,q){return Z.current.useCallback(D,q)},ke.useContext=function(D){return Z.current.useContext(D)},ke.useDebugValue=function(){},ke.useDeferredValue=function(D){return Z.current.useDeferredValue(D)},ke.useEffect=function(D,q){return Z.current.useEffect(D,q)},ke.useId=function(){return Z.current.useId()},ke.useImperativeHandle=function(D,q,ge){return Z.current.useImperativeHandle(D,q,ge)},ke.useInsertionEffect=function(D,q){return Z.current.useInsertionEffect(D,q)},ke.useLayoutEffect=function(D,q){return Z.current.useLayoutEffect(D,q)},ke.useMemo=function(D,q){return Z.current.useMemo(D,q)},ke.useReducer=function(D,q,ge){return Z.current.useReducer(D,q,ge)},ke.useRef=function(D){return Z.current.useRef(D)},ke.useState=function(D){return Z.current.useState(D)},ke.useSyncExternalStore=function(D,q,ge){return Z.current.useSyncExternalStore(D,q,ge)},ke.useTransition=function(){return Z.current.useTransition()},ke.version="18.3.1",ke}var Rg;function T_(){return Rg||(Rg=1,Dd.exports=fI()),Dd.exports}var ft=T_();const $=I_(ft);var qu={},bd={exports:{}},tn={},Od={exports:{}},Md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function pI(){return Cg||(Cg=1,function(s){function e(j,re){var te=j.length;j.push(re);e:for(;0<te;){var D=te-1>>>1,q=j[D];if(0<o(q,re))j[D]=re,j[te]=q,te=D;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var re=j[0],te=j.pop();if(te!==re){j[0]=te;e:for(var D=0,q=j.length,ge=q>>>1;D<ge;){var Pe=2*(D+1)-1,Ce=j[Pe],De=Pe+1,Fe=j[De];if(0>o(Ce,te))De<q&&0>o(Fe,Ce)?(j[D]=Fe,j[De]=te,D=De):(j[D]=Ce,j[Pe]=te,D=Pe);else if(De<q&&0>o(Fe,te))j[D]=Fe,j[De]=te,D=De;else break e}}return re}function o(j,re){var te=j.sortIndex-re.sortIndex;return te!==0?te:j.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var p=[],_=[],w=1,I=null,N=3,B=!1,Q=!1,G=!1,K=typeof setTimeout=="function"?setTimeout:null,we=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(j){for(var re=t(_);re!==null;){if(re.callback===null)r(_);else if(re.startTime<=j)r(_),re.sortIndex=re.expirationTime,e(p,re);else break;re=t(_)}}function _e(j){if(G=!1,se(j),!Q)if(t(p)!==null)Q=!0,It(Ae);else{var re=t(_);re!==null&&Z(_e,re.startTime-j)}}function Ae(j,re){Q=!1,G&&(G=!1,we(T),T=-1),B=!0;var te=N;try{for(se(re),I=t(p);I!==null&&(!(I.expirationTime>re)||j&&!V());){var D=I.callback;if(typeof D=="function"){I.callback=null,N=I.priorityLevel;var q=D(I.expirationTime<=re);re=s.unstable_now(),typeof q=="function"?I.callback=q:I===t(p)&&r(p),se(re)}else r(p);I=t(p)}if(I!==null)var ge=!0;else{var Pe=t(_);Pe!==null&&Z(_e,Pe.startTime-re),ge=!1}return ge}finally{I=null,N=te,B=!1}}var me=!1,C=null,T=-1,P=5,k=-1;function V(){return!(s.unstable_now()-k<P)}function b(){if(C!==null){var j=s.unstable_now();k=j;var re=!0;try{re=C(!0,j)}finally{re?A():(me=!1,C=null)}}else me=!1}var A;if(typeof he=="function")A=function(){he(b)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,wt=tt.port2;tt.port1.onmessage=b,A=function(){wt.postMessage(null)}}else A=function(){K(b,0)};function It(j){C=j,me||(me=!0,A())}function Z(j,re){T=K(function(){j(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(j){j.callback=null},s.unstable_continueExecution=function(){Q||B||(Q=!0,It(Ae))},s.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_getFirstCallbackNode=function(){return t(p)},s.unstable_next=function(j){switch(N){case 1:case 2:case 3:var re=3;break;default:re=N}var te=N;N=re;try{return j()}finally{N=te}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(j,re){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var te=N;N=j;try{return re()}finally{N=te}},s.unstable_scheduleCallback=function(j,re,te){var D=s.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?D+te:D):te=D,j){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=te+q,j={id:w++,callback:re,priorityLevel:j,startTime:te,expirationTime:q,sortIndex:-1},te>D?(j.sortIndex=te,e(_,j),t(p)===null&&j===t(_)&&(G?(we(T),T=-1):G=!0,Z(_e,te-D))):(j.sortIndex=q,e(p,j),Q||B||(Q=!0,It(Ae))),j},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(j){var re=N;return function(){var te=N;N=re;try{return j.apply(this,arguments)}finally{N=te}}}}(Md)),Md}var kg;function mI(){return kg||(kg=1,Od.exports=pI()),Od.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function gI(){if(xg)return tn;xg=1;var s=T_(),e=mI();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(o[n]=i,n=0;n<i.length;n++)r.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},I={};function N(n){return p.call(I,n)?!0:p.call(w,n)?!1:_.test(n)?I[n]=!0:(w[n]=!0,!1)}function B(n,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q(n,i,a,h){if(i===null||typeof i>"u"||B(n,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function G(n,i,a,h,f,g,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=v}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){K[n]=new G(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];K[i]=new G(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){K[n]=new G(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){K[n]=new G(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){K[n]=new G(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){K[n]=new G(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){K[n]=new G(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){K[n]=new G(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){K[n]=new G(n,5,!1,n.toLowerCase(),null,!1,!1)});var we=/[\-:]([a-z])/g;function he(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(we,he);K[i]=new G(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(we,he);K[i]=new G(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(we,he);K[i]=new G(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){K[n]=new G(n,1,!1,n.toLowerCase(),null,!1,!1)}),K.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){K[n]=new G(n,1,!1,n.toLowerCase(),null,!0,!0)});function se(n,i,a,h){var f=K.hasOwnProperty(i)?K[i]:null;(f!==null?f.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Q(i,a,f,h)&&(a=null),h||f===null?N(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,h=f.attributeNamespace,a===null?n.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?n.setAttributeNS(h,i,a):n.setAttribute(i,a))))}var _e=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ae=Symbol.for("react.element"),me=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),V=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),j=Symbol.iterator;function re(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var te=Object.assign,D;function q(n){if(D===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);D=i&&i[1]||""}return`
`+D+n}var ge=!1;function Pe(n,i){if(!n||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(U){var h=U}Reflect.construct(n,[],i)}else{try{i.call()}catch(U){h=U}n.call(i.prototype)}else{try{throw Error()}catch(U){h=U}n()}}catch(U){if(U&&h&&typeof U.stack=="string"){for(var f=U.stack.split(`
`),g=h.stack.split(`
`),v=f.length-1,S=g.length-1;1<=v&&0<=S&&f[v]!==g[S];)S--;for(;1<=v&&0<=S;v--,S--)if(f[v]!==g[S]){if(v!==1||S!==1)do if(v--,S--,0>S||f[v]!==g[S]){var R=`
`+f[v].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=v&&0<=S);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?q(n):""}function Ce(n){switch(n.tag){case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return n=Pe(n.type,!1),n;case 11:return n=Pe(n.type.render,!1),n;case 1:return n=Pe(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case me:return"Portal";case P:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case tt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case b:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case wt:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case It:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function Fe(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tt(n){var i=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,g.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ur(n){n._valueTracker||(n._valueTracker=Tt(n))}function Ts(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return n&&(h=He(n)?n.checked?"true":"false":n.value),n=h,n!==a?(i.setValue(n),!0):!1}function br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ti(n,i){var a=i.checked;return te({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ss(n,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Ue(i.value!=null?i.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Wo(n,i){i=i.checked,i!=null&&se(n,"checked",i,!1)}function Qo(n,i){Wo(n,i);var a=Ue(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?As(n,i.type,a):i.hasOwnProperty("defaultValue")&&As(n,i.type,Ue(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function xl(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function As(n,i,a){(i!=="number"||br(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var cr=Array.isArray;function hr(n,i,a,h){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Xo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ps(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(cr(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Ue(a)}}function Rs(n,i){var a=Ue(i.value),h=Ue(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function Yo(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function mt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?mt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dr,Jo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,f){MSApp.execUnsafeLocalFunction(function(){return n(i,a,h,f)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=dr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Or(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ai=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(n){Ai.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Si[i]=Si[n]})});function Zo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Si.hasOwnProperty(n)&&Si[n]?(""+i).trim():i+"px"}function ea(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=Zo(a,i[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,f):n[a]=f}}var ta=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function na(n,i){if(i){if(ta[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ra(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pi=null;function Cs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ks=null,gn=null,Gn=null;function xs(n){if(n=Ra(n)){if(typeof ks!="function")throw Error(t(280));var i=n.stateNode;i&&(i=ou(i),ks(n.stateNode,n.type,i))}}function Wn(n){gn?Gn?Gn.push(n):Gn=[n]:gn=n}function ia(){if(gn){var n=gn,i=Gn;if(Gn=gn=null,xs(n),i)for(n=0;n<i.length;n++)xs(i[n])}}function Ri(n,i){return n(i)}function sa(){}var fr=!1;function oa(n,i,a){if(fr)return n(i,a);fr=!0;try{return Ri(n,i,a)}finally{fr=!1,(gn!==null||Gn!==null)&&(sa(),ia())}}function lt(n,i){var a=n.stateNode;if(a===null)return null;var h=ou(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ns=!1;if(d)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Ns=!1}function Ci(n,i,a,h,f,g,v,S,R){var U=Array.prototype.slice.call(arguments,3);try{i.apply(a,U)}catch(X){this.onError(X)}}var ki=!1,Vs=null,xn=!1,aa=null,ah={onError:function(n){ki=!0,Vs=n}};function Ds(n,i,a,h,f,g,v,S,R){ki=!1,Vs=null,Ci.apply(ah,arguments)}function Nl(n,i,a,h,f,g,v,S,R){if(Ds.apply(this,arguments),ki){if(ki){var U=Vs;ki=!1,Vs=null}else throw Error(t(198));xn||(xn=!0,aa=U)}}function Nn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function xi(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Vn(n){if(Nn(n)!==n)throw Error(t(188))}function Vl(n){var i=n.alternate;if(!i){if(i=Nn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,h=i;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Vn(f),n;if(g===h)return Vn(f),i;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,h=g;break}if(S===h){v=!0,h=f,a=g;break}S=S.sibling}if(!v){for(S=g.child;S;){if(S===a){v=!0,a=g,h=f;break}if(S===h){v=!0,h=g,a=f;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function la(n){return n=Vl(n),n!==null?bs(n):null}function bs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=bs(n);if(i!==null)return i;n=n.sibling}return null}var Os=e.unstable_scheduleCallback,ua=e.unstable_cancelCallback,Dl=e.unstable_shouldYield,lh=e.unstable_requestPaint,Ge=e.unstable_now,bl=e.unstable_getCurrentPriorityLevel,Ni=e.unstable_ImmediatePriority,Mr=e.unstable_UserBlockingPriority,yn=e.unstable_NormalPriority,ca=e.unstable_LowPriority,Ol=e.unstable_IdlePriority,Vi=null,on=null;function Ml(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Vi,n,void 0,(n.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Fl,ha=Math.log,Ll=Math.LN2;function Fl(n){return n>>>=0,n===0?32:31-(ha(n)/Ll|0)|0}var Ms=64,Ls=4194304;function Lr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Di(n,i){var a=n.pendingLanes;if(a===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~f;S!==0?h=Lr(S):(g&=v,g!==0&&(h=Lr(g)))}else v=a&~f,v!==0?h=Lr(v):g!==0&&(h=Lr(g));if(h===0)return 0;if(i!==0&&i!==h&&(i&f)===0&&(f=h&-h,g=i&-i,f>=g||f===16&&(g&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)a=31-Bt(i),f=1<<a,h|=n[a],i&=~f;return h}function uh(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(n,i){for(var a=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-Bt(g),S=1<<v,R=f[v];R===-1?((S&a)===0||(S&h)!==0)&&(f[v]=uh(S,i)):R<=i&&(n.expiredLanes|=S),g&=~S}}function an(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function bi(){var n=Ms;return Ms<<=1,(Ms&4194240)===0&&(Ms=64),n}function Fr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ur(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Bt(i),n[i]=a}function qe(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Bt(a),g=1<<f;i[f]=0,h[f]=-1,n[f]=-1,a&=~g}}function zr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var h=31-Bt(a),f=1<<h;f&i|n[h]&i&&(n[h]|=i),a&=~f}}var Ne=0;function Br(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ul,Fs,zl,Bl,jl,da=!1,Qn=[],kt=null,Dn=null,bn=null,jr=new Map,_n=new Map,Xn=[],ch="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $l(n,i){switch(n){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":jr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(i.pointerId)}}function Wt(n,i,a,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Ra(i),i!==null&&Fs(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function hh(n,i,a,h,f){switch(i){case"focusin":return kt=Wt(kt,n,i,a,h,f),!0;case"dragenter":return Dn=Wt(Dn,n,i,a,h,f),!0;case"mouseover":return bn=Wt(bn,n,i,a,h,f),!0;case"pointerover":var g=f.pointerId;return jr.set(g,Wt(jr.get(g)||null,n,i,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,_n.set(g,Wt(_n.get(g)||null,n,i,a,h,f)),!0}return!1}function Kl(n){var i=Ui(n.target);if(i!==null){var a=Nn(i);if(a!==null){if(i=a.tag,i===13){if(i=xi(a),i!==null){n.blockedOn=i,jl(n.priority,function(){zl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Us(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);Pi=h,a.target.dispatchEvent(h),Pi=null}else return i=Ra(a),i!==null&&Fs(i),n.blockedOn=a,!1;i.shift()}return!0}function Oi(n,i,a){mr(n)&&a.delete(i)}function ql(){da=!1,kt!==null&&mr(kt)&&(kt=null),Dn!==null&&mr(Dn)&&(Dn=null),bn!==null&&mr(bn)&&(bn=null),jr.forEach(Oi),_n.forEach(Oi)}function On(n,i){n.blockedOn===i&&(n.blockedOn=null,da||(da=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ql)))}function Mn(n){function i(f){return On(f,n)}if(0<Qn.length){On(Qn[0],n);for(var a=1;a<Qn.length;a++){var h=Qn[a];h.blockedOn===n&&(h.blockedOn=null)}}for(kt!==null&&On(kt,n),Dn!==null&&On(Dn,n),bn!==null&&On(bn,n),jr.forEach(i),_n.forEach(i),a=0;a<Xn.length;a++)h=Xn[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<Xn.length&&(a=Xn[0],a.blockedOn===null);)Kl(a),a.blockedOn===null&&Xn.shift()}var gr=_e.ReactCurrentBatchConfig,$r=!0;function Ye(n,i,a,h){var f=Ne,g=gr.transition;gr.transition=null;try{Ne=1,fa(n,i,a,h)}finally{Ne=f,gr.transition=g}}function dh(n,i,a,h){var f=Ne,g=gr.transition;gr.transition=null;try{Ne=4,fa(n,i,a,h)}finally{Ne=f,gr.transition=g}}function fa(n,i,a,h){if($r){var f=Us(n,i,a,h);if(f===null)Th(n,i,h,Mi,a),$l(n,h);else if(hh(f,n,i,a,h))h.stopPropagation();else if($l(n,h),i&4&&-1<ch.indexOf(n)){for(;f!==null;){var g=Ra(f);if(g!==null&&Ul(g),g=Us(n,i,a,h),g===null&&Th(n,i,h,Mi,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else Th(n,i,h,null,a)}}var Mi=null;function Us(n,i,a,h){if(Mi=null,n=Cs(h),n=Ui(n),n!==null)if(i=Nn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=xi(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Mi=n,null}function pa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bl()){case Ni:return 1;case Mr:return 4;case yn:case ca:return 16;case Ol:return 536870912;default:return 16}default:return 16}}var ln=null,zs=null,Qt=null;function ma(){if(Qt)return Qt;var n,i=zs,a=i.length,h,f="value"in ln?ln.value:ln.textContent,g=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(h=1;h<=v&&i[a-h]===f[g-h];h++);return Qt=f.slice(n,1<h?1-h:void 0)}function Bs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Yn(){return!0}function ga(){return!1}function xt(n){function i(a,h,f,g,v){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Yn:ga,this.isPropagationStopped=ga,this}return te(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),i}var Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=xt(Ln),Jn=te({},Ln,{view:0,detail:0}),fh=xt(Jn),$s,yr,Kr,Li=te({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Kr&&(Kr&&n.type==="mousemove"?($s=n.screenX-Kr.screenX,yr=n.screenY-Kr.screenY):yr=$s=0,Kr=n),$s)},movementY:function(n){return"movementY"in n?n.movementY:yr}}),Ks=xt(Li),ya=te({},Li,{dataTransfer:0}),Hl=xt(ya),qs=te({},Jn,{relatedTarget:0}),Hs=xt(qs),Gl=te({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0}),_r=xt(Gl),Wl=te({},Ln,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ql=xt(Wl),Xl=te({},Ln,{data:0}),_a=xt(Xl),Gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Yl[n])?!!i[n]:!1}function Zn(){return Jl}var u=te({},Jn,{key:function(n){if(n.key){var i=Gs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Bs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(n){return n.type==="keypress"?Bs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=xt(u),y=te({},Li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=xt(y),O=te({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),z=xt(O),ne=te({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),Be=xt(ne),yt=te({},Li,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),be=xt(yt),St=[9,13,27,32],ct=d&&"CompositionEvent"in window,vn=null;d&&"documentMode"in document&&(vn=document.documentMode);var un=d&&"TextEvent"in window&&!vn,Fi=d&&(!ct||vn&&8<vn&&11>=vn),Ws=" ",Ep=!1;function wp(n,i){switch(n){case"keyup":return St.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qs=!1;function cw(n,i){switch(n){case"compositionend":return Ip(i);case"keypress":return i.which!==32?null:(Ep=!0,Ws);case"textInput":return n=i.data,n===Ws&&Ep?null:n;default:return null}}function hw(n,i){if(Qs)return n==="compositionend"||!ct&&wp(n,i)?(n=ma(),Qt=zs=ln=null,Qs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fi&&i.locale!=="ko"?null:i.data;default:return null}}var dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!dw[n.type]:i==="textarea"}function Sp(n,i,a,h){Wn(h),i=ru(i,"onChange"),0<i.length&&(a=new js("onChange","change",null,a,h),n.push({event:a,listeners:i}))}var va=null,Ea=null;function fw(n){jp(n,0)}function Zl(n){var i=eo(n);if(Ts(i))return n}function pw(n,i){if(n==="change")return i}var Ap=!1;if(d){var ph;if(d){var mh="oninput"in document;if(!mh){var Pp=document.createElement("div");Pp.setAttribute("oninput","return;"),mh=typeof Pp.oninput=="function"}ph=mh}else ph=!1;Ap=ph&&(!document.documentMode||9<document.documentMode)}function Rp(){va&&(va.detachEvent("onpropertychange",Cp),Ea=va=null)}function Cp(n){if(n.propertyName==="value"&&Zl(Ea)){var i=[];Sp(i,Ea,n,Cs(n)),oa(fw,i)}}function mw(n,i,a){n==="focusin"?(Rp(),va=i,Ea=a,va.attachEvent("onpropertychange",Cp)):n==="focusout"&&Rp()}function gw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zl(Ea)}function yw(n,i){if(n==="click")return Zl(i)}function _w(n,i){if(n==="input"||n==="change")return Zl(i)}function vw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Fn=typeof Object.is=="function"?Object.is:vw;function wa(n,i){if(Fn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(i,f)||!Fn(n[f],i[f]))return!1}return!0}function kp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xp(n,i){var a=kp(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=i&&h>=i)return{node:a,offset:i-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=kp(a)}}function Np(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Np(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Vp(){for(var n=window,i=br();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=br(n.document)}return i}function gh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Ew(n){var i=Vp(),a=n.focusedElem,h=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Np(a.ownerDocument.documentElement,a)){if(h!==null&&gh(a)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=xp(a,g);var v=xp(a,h);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ww=d&&"documentMode"in document&&11>=document.documentMode,Xs=null,yh=null,Ia=null,_h=!1;function Dp(n,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_h||Xs==null||Xs!==br(h)||(h=Xs,"selectionStart"in h&&gh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ia&&wa(Ia,h)||(Ia=h,h=ru(yh,"onSelect"),0<h.length&&(i=new js("onSelect","select",null,i,a),n.push({event:i,listeners:h}),i.target=Xs)))}function eu(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ys={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},vh={},bp={};d&&(bp=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function tu(n){if(vh[n])return vh[n];if(!Ys[n])return n;var i=Ys[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in bp)return vh[n]=i[a];return n}var Op=tu("animationend"),Mp=tu("animationiteration"),Lp=tu("animationstart"),Fp=tu("transitionend"),Up=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(n,i){Up.set(n,i),l(i,[n])}for(var Eh=0;Eh<zp.length;Eh++){var wh=zp[Eh],Iw=wh.toLowerCase(),Tw=wh[0].toUpperCase()+wh.slice(1);qr(Iw,"on"+Tw)}qr(Op,"onAnimationEnd"),qr(Mp,"onAnimationIteration"),qr(Lp,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(Fp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Bp(n,i,a){var h=n.type||"unknown-event";n.currentTarget=a,Nl(h,i,void 0,n),n.currentTarget=null}function jp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],f=h.event;h=h.listeners;e:{var g=void 0;if(i)for(var v=h.length-1;0<=v;v--){var S=h[v],R=S.instance,U=S.currentTarget;if(S=S.listener,R!==g&&f.isPropagationStopped())break e;Bp(f,S,U),g=R}else for(v=0;v<h.length;v++){if(S=h[v],R=S.instance,U=S.currentTarget,S=S.listener,R!==g&&f.isPropagationStopped())break e;Bp(f,S,U),g=R}}}if(xn)throw n=aa,xn=!1,aa=null,n}function Qe(n,i){var a=i[kh];a===void 0&&(a=i[kh]=new Set);var h=n+"__bubble";a.has(h)||($p(i,n,2,!1),a.add(h))}function Ih(n,i,a){var h=0;i&&(h|=4),$p(a,n,h,i)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Sa(n){if(!n[nu]){n[nu]=!0,r.forEach(function(a){a!=="selectionchange"&&(Sw.has(a)||Ih(a,!1,n),Ih(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[nu]||(i[nu]=!0,Ih("selectionchange",!1,i))}}function $p(n,i,a,h){switch(pa(i)){case 1:var f=Ye;break;case 4:f=dh;break;default:f=fa}a=f.bind(null,i,a,n),f=void 0,!Ns||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Th(n,i,a,h,f){var g=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var S=h.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var R=v.tag;if((R===3||R===4)&&(R=v.stateNode.containerInfo,R===f||R.nodeType===8&&R.parentNode===f))return;v=v.return}for(;S!==null;){if(v=Ui(S),v===null)return;if(R=v.tag,R===5||R===6){h=g=v;continue e}S=S.parentNode}}h=h.return}oa(function(){var U=g,X=Cs(a),Y=[];e:{var W=Up.get(n);if(W!==void 0){var oe=js,ue=n;switch(n){case"keypress":if(Bs(a)===0)break e;case"keydown":case"keyup":oe=m;break;case"focusin":ue="focus",oe=Hs;break;case"focusout":ue="blur",oe=Hs;break;case"beforeblur":case"afterblur":oe=Hs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Ks;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=z;break;case Op:case Mp:case Lp:oe=_r;break;case Fp:oe=Be;break;case"scroll":oe=fh;break;case"wheel":oe=be;break;case"copy":case"cut":case"paste":oe=Ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=E}var de=(i&4)!==0,ut=!de&&n==="scroll",L=de?W!==null?W+"Capture":null:W;de=[];for(var x=U,F;x!==null;){F=x;var ee=F.stateNode;if(F.tag===5&&ee!==null&&(F=ee,L!==null&&(ee=lt(x,L),ee!=null&&de.push(Aa(x,ee,F)))),ut)break;x=x.return}0<de.length&&(W=new oe(W,ue,null,a,X),Y.push({event:W,listeners:de}))}}if((i&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",W&&a!==Pi&&(ue=a.relatedTarget||a.fromElement)&&(Ui(ue)||ue[vr]))break e;if((oe||W)&&(W=X.window===X?X:(W=X.ownerDocument)?W.defaultView||W.parentWindow:window,oe?(ue=a.relatedTarget||a.toElement,oe=U,ue=ue?Ui(ue):null,ue!==null&&(ut=Nn(ue),ue!==ut||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(oe=null,ue=U),oe!==ue)){if(de=Ks,ee="onMouseLeave",L="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(de=E,ee="onPointerLeave",L="onPointerEnter",x="pointer"),ut=oe==null?W:eo(oe),F=ue==null?W:eo(ue),W=new de(ee,x+"leave",oe,a,X),W.target=ut,W.relatedTarget=F,ee=null,Ui(X)===U&&(de=new de(L,x+"enter",ue,a,X),de.target=F,de.relatedTarget=ut,ee=de),ut=ee,oe&&ue)t:{for(de=oe,L=ue,x=0,F=de;F;F=Js(F))x++;for(F=0,ee=L;ee;ee=Js(ee))F++;for(;0<x-F;)de=Js(de),x--;for(;0<F-x;)L=Js(L),F--;for(;x--;){if(de===L||L!==null&&de===L.alternate)break t;de=Js(de),L=Js(L)}de=null}else de=null;oe!==null&&Kp(Y,W,oe,de,!1),ue!==null&&ut!==null&&Kp(Y,ut,ue,de,!0)}}e:{if(W=U?eo(U):window,oe=W.nodeName&&W.nodeName.toLowerCase(),oe==="select"||oe==="input"&&W.type==="file")var fe=pw;else if(Tp(W))if(Ap)fe=_w;else{fe=gw;var ve=mw}else(oe=W.nodeName)&&oe.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(fe=yw);if(fe&&(fe=fe(n,U))){Sp(Y,fe,a,X);break e}ve&&ve(n,W,U),n==="focusout"&&(ve=W._wrapperState)&&ve.controlled&&W.type==="number"&&As(W,"number",W.value)}switch(ve=U?eo(U):window,n){case"focusin":(Tp(ve)||ve.contentEditable==="true")&&(Xs=ve,yh=U,Ia=null);break;case"focusout":Ia=yh=Xs=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,Dp(Y,a,X);break;case"selectionchange":if(ww)break;case"keydown":case"keyup":Dp(Y,a,X)}var Ee;if(ct)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Qs?wp(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Fi&&a.locale!=="ko"&&(Qs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Qs&&(Ee=ma()):(ln=X,zs="value"in ln?ln.value:ln.textContent,Qs=!0)),ve=ru(U,Te),0<ve.length&&(Te=new _a(Te,n,null,a,X),Y.push({event:Te,listeners:ve}),Ee?Te.data=Ee:(Ee=Ip(a),Ee!==null&&(Te.data=Ee)))),(Ee=un?cw(n,a):hw(n,a))&&(U=ru(U,"onBeforeInput"),0<U.length&&(X=new _a("onBeforeInput","beforeinput",null,a,X),Y.push({event:X,listeners:U}),X.data=Ee))}jp(Y,i)})}function Aa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function ru(n,i){for(var a=i+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=lt(n,a),g!=null&&h.unshift(Aa(n,g,f)),g=lt(n,i),g!=null&&h.push(Aa(n,g,f))),n=n.return}return h}function Js(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Kp(n,i,a,h,f){for(var g=i._reactName,v=[];a!==null&&a!==h;){var S=a,R=S.alternate,U=S.stateNode;if(R!==null&&R===h)break;S.tag===5&&U!==null&&(S=U,f?(R=lt(a,g),R!=null&&v.unshift(Aa(a,R,S))):f||(R=lt(a,g),R!=null&&v.push(Aa(a,R,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var Aw=/\r\n?/g,Pw=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(Aw,`
`).replace(Pw,"")}function iu(n,i,a){if(i=qp(i),qp(n)!==i&&a)throw Error(t(425))}function su(){}var Sh=null,Ah=null;function Ph(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,Rw=typeof clearTimeout=="function"?clearTimeout:void 0,Hp=typeof Promise=="function"?Promise:void 0,Cw=typeof queueMicrotask=="function"?queueMicrotask:typeof Hp<"u"?function(n){return Hp.resolve(null).then(n).catch(kw)}:Rh;function kw(n){setTimeout(function(){throw n})}function Ch(n,i){var a=i,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){n.removeChild(f),Mn(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Mn(i)}function Hr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Gp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),er="__reactFiber$"+Zs,Pa="__reactProps$"+Zs,vr="__reactContainer$"+Zs,kh="__reactEvents$"+Zs,xw="__reactListeners$"+Zs,Nw="__reactHandles$"+Zs;function Ui(n){var i=n[er];if(i)return i;for(var a=n.parentNode;a;){if(i=a[vr]||a[er]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Gp(n);n!==null;){if(a=n[er])return a;n=Gp(n)}return i}n=a,a=n.parentNode}return null}function Ra(n){return n=n[er]||n[vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ou(n){return n[Pa]||null}var xh=[],to=-1;function Gr(n){return{current:n}}function Xe(n){0>to||(n.current=xh[to],xh[to]=null,to--)}function We(n,i){to++,xh[to]=n.current,n.current=i}var Wr={},bt=Gr(Wr),Xt=Gr(!1),zi=Wr;function no(n,i){var a=n.type.contextTypes;if(!a)return Wr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=i[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=f),f}function Yt(n){return n=n.childContextTypes,n!=null}function au(){Xe(Xt),Xe(bt)}function Wp(n,i,a){if(bt.current!==Wr)throw Error(t(168));We(bt,i),We(Xt,a)}function Qp(n,i,a){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in i))throw Error(t(108,Fe(n)||"Unknown",f));return te({},a,h)}function lu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Wr,zi=bt.current,We(bt,n),We(Xt,Xt.current),!0}function Xp(n,i,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=Qp(n,i,zi),h.__reactInternalMemoizedMergedChildContext=n,Xe(Xt),Xe(bt),We(bt,n)):Xe(Xt),We(Xt,a)}var Er=null,uu=!1,Nh=!1;function Yp(n){Er===null?Er=[n]:Er.push(n)}function Vw(n){uu=!0,Yp(n)}function Qr(){if(!Nh&&Er!==null){Nh=!0;var n=0,i=Ne;try{var a=Er;for(Ne=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Er=null,uu=!1}catch(f){throw Er!==null&&(Er=Er.slice(n+1)),Os(Ni,Qr),f}finally{Ne=i,Nh=!1}}return null}var ro=[],io=0,cu=null,hu=0,En=[],wn=0,Bi=null,wr=1,Ir="";function ji(n,i){ro[io++]=hu,ro[io++]=cu,cu=n,hu=i}function Jp(n,i,a){En[wn++]=wr,En[wn++]=Ir,En[wn++]=Bi,Bi=n;var h=wr;n=Ir;var f=32-Bt(h)-1;h&=~(1<<f),a+=1;var g=32-Bt(i)+f;if(30<g){var v=f-f%5;g=(h&(1<<v)-1).toString(32),h>>=v,f-=v,wr=1<<32-Bt(i)+f|a<<f|h,Ir=g+n}else wr=1<<g|a<<f|h,Ir=n}function Vh(n){n.return!==null&&(ji(n,1),Jp(n,1,0))}function Dh(n){for(;n===cu;)cu=ro[--io],ro[io]=null,hu=ro[--io],ro[io]=null;for(;n===Bi;)Bi=En[--wn],En[wn]=null,Ir=En[--wn],En[wn]=null,wr=En[--wn],En[wn]=null}var cn=null,hn=null,Je=!1,Un=null;function Zp(n,i){var a=An(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function em(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,cn=n,hn=Hr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,cn=n,hn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Bi!==null?{id:wr,overflow:Ir}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=An(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,cn=n,hn=null,!0):!1;default:return!1}}function bh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Oh(n){if(Je){var i=hn;if(i){var a=i;if(!em(n,i)){if(bh(n))throw Error(t(418));i=Hr(a.nextSibling);var h=cn;i&&em(n,i)?Zp(h,a):(n.flags=n.flags&-4097|2,Je=!1,cn=n)}}else{if(bh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Je=!1,cn=n}}}function tm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cn=n}function du(n){if(n!==cn)return!1;if(!Je)return tm(n),Je=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Ph(n.type,n.memoizedProps)),i&&(i=hn)){if(bh(n))throw nm(),Error(t(418));for(;i;)Zp(n,i),i=Hr(i.nextSibling)}if(tm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){hn=Hr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}hn=null}}else hn=cn?Hr(n.stateNode.nextSibling):null;return!0}function nm(){for(var n=hn;n;)n=Hr(n.nextSibling)}function so(){hn=cn=null,Je=!1}function Mh(n){Un===null?Un=[n]:Un.push(n)}var Dw=_e.ReactCurrentBatchConfig;function Ca(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(v){var S=f.refs;v===null?delete S[g]:S[g]=v},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function fu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function rm(n){var i=n._init;return i(n._payload)}function im(n){function i(L,x){if(n){var F=L.deletions;F===null?(L.deletions=[x],L.flags|=16):F.push(x)}}function a(L,x){if(!n)return null;for(;x!==null;)i(L,x),x=x.sibling;return null}function h(L,x){for(L=new Map;x!==null;)x.key!==null?L.set(x.key,x):L.set(x.index,x),x=x.sibling;return L}function f(L,x){return L=ri(L,x),L.index=0,L.sibling=null,L}function g(L,x,F){return L.index=F,n?(F=L.alternate,F!==null?(F=F.index,F<x?(L.flags|=2,x):F):(L.flags|=2,x)):(L.flags|=1048576,x)}function v(L){return n&&L.alternate===null&&(L.flags|=2),L}function S(L,x,F,ee){return x===null||x.tag!==6?(x=Rd(F,L.mode,ee),x.return=L,x):(x=f(x,F),x.return=L,x)}function R(L,x,F,ee){var fe=F.type;return fe===C?X(L,x,F.props.children,ee,F.key):x!==null&&(x.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===It&&rm(fe)===x.type)?(ee=f(x,F.props),ee.ref=Ca(L,x,F),ee.return=L,ee):(ee=Lu(F.type,F.key,F.props,null,L.mode,ee),ee.ref=Ca(L,x,F),ee.return=L,ee)}function U(L,x,F,ee){return x===null||x.tag!==4||x.stateNode.containerInfo!==F.containerInfo||x.stateNode.implementation!==F.implementation?(x=Cd(F,L.mode,ee),x.return=L,x):(x=f(x,F.children||[]),x.return=L,x)}function X(L,x,F,ee,fe){return x===null||x.tag!==7?(x=Xi(F,L.mode,ee,fe),x.return=L,x):(x=f(x,F),x.return=L,x)}function Y(L,x,F){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Rd(""+x,L.mode,F),x.return=L,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ae:return F=Lu(x.type,x.key,x.props,null,L.mode,F),F.ref=Ca(L,null,x),F.return=L,F;case me:return x=Cd(x,L.mode,F),x.return=L,x;case It:var ee=x._init;return Y(L,ee(x._payload),F)}if(cr(x)||re(x))return x=Xi(x,L.mode,F,null),x.return=L,x;fu(L,x)}return null}function W(L,x,F,ee){var fe=x!==null?x.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return fe!==null?null:S(L,x,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Ae:return F.key===fe?R(L,x,F,ee):null;case me:return F.key===fe?U(L,x,F,ee):null;case It:return fe=F._init,W(L,x,fe(F._payload),ee)}if(cr(F)||re(F))return fe!==null?null:X(L,x,F,ee,null);fu(L,F)}return null}function oe(L,x,F,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return L=L.get(F)||null,S(x,L,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Ae:return L=L.get(ee.key===null?F:ee.key)||null,R(x,L,ee,fe);case me:return L=L.get(ee.key===null?F:ee.key)||null,U(x,L,ee,fe);case It:var ve=ee._init;return oe(L,x,F,ve(ee._payload),fe)}if(cr(ee)||re(ee))return L=L.get(F)||null,X(x,L,ee,fe,null);fu(x,ee)}return null}function ue(L,x,F,ee){for(var fe=null,ve=null,Ee=x,Te=x=0,Rt=null;Ee!==null&&Te<F.length;Te++){Ee.index>Te?(Rt=Ee,Ee=null):Rt=Ee.sibling;var Le=W(L,Ee,F[Te],ee);if(Le===null){Ee===null&&(Ee=Rt);break}n&&Ee&&Le.alternate===null&&i(L,Ee),x=g(Le,x,Te),ve===null?fe=Le:ve.sibling=Le,ve=Le,Ee=Rt}if(Te===F.length)return a(L,Ee),Je&&ji(L,Te),fe;if(Ee===null){for(;Te<F.length;Te++)Ee=Y(L,F[Te],ee),Ee!==null&&(x=g(Ee,x,Te),ve===null?fe=Ee:ve.sibling=Ee,ve=Ee);return Je&&ji(L,Te),fe}for(Ee=h(L,Ee);Te<F.length;Te++)Rt=oe(Ee,L,Te,F[Te],ee),Rt!==null&&(n&&Rt.alternate!==null&&Ee.delete(Rt.key===null?Te:Rt.key),x=g(Rt,x,Te),ve===null?fe=Rt:ve.sibling=Rt,ve=Rt);return n&&Ee.forEach(function(ii){return i(L,ii)}),Je&&ji(L,Te),fe}function de(L,x,F,ee){var fe=re(F);if(typeof fe!="function")throw Error(t(150));if(F=fe.call(F),F==null)throw Error(t(151));for(var ve=fe=null,Ee=x,Te=x=0,Rt=null,Le=F.next();Ee!==null&&!Le.done;Te++,Le=F.next()){Ee.index>Te?(Rt=Ee,Ee=null):Rt=Ee.sibling;var ii=W(L,Ee,Le.value,ee);if(ii===null){Ee===null&&(Ee=Rt);break}n&&Ee&&ii.alternate===null&&i(L,Ee),x=g(ii,x,Te),ve===null?fe=ii:ve.sibling=ii,ve=ii,Ee=Rt}if(Le.done)return a(L,Ee),Je&&ji(L,Te),fe;if(Ee===null){for(;!Le.done;Te++,Le=F.next())Le=Y(L,Le.value,ee),Le!==null&&(x=g(Le,x,Te),ve===null?fe=Le:ve.sibling=Le,ve=Le);return Je&&ji(L,Te),fe}for(Ee=h(L,Ee);!Le.done;Te++,Le=F.next())Le=oe(Ee,L,Te,Le.value,ee),Le!==null&&(n&&Le.alternate!==null&&Ee.delete(Le.key===null?Te:Le.key),x=g(Le,x,Te),ve===null?fe=Le:ve.sibling=Le,ve=Le);return n&&Ee.forEach(function(dI){return i(L,dI)}),Je&&ji(L,Te),fe}function ut(L,x,F,ee){if(typeof F=="object"&&F!==null&&F.type===C&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Ae:e:{for(var fe=F.key,ve=x;ve!==null;){if(ve.key===fe){if(fe=F.type,fe===C){if(ve.tag===7){a(L,ve.sibling),x=f(ve,F.props.children),x.return=L,L=x;break e}}else if(ve.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===It&&rm(fe)===ve.type){a(L,ve.sibling),x=f(ve,F.props),x.ref=Ca(L,ve,F),x.return=L,L=x;break e}a(L,ve);break}else i(L,ve);ve=ve.sibling}F.type===C?(x=Xi(F.props.children,L.mode,ee,F.key),x.return=L,L=x):(ee=Lu(F.type,F.key,F.props,null,L.mode,ee),ee.ref=Ca(L,x,F),ee.return=L,L=ee)}return v(L);case me:e:{for(ve=F.key;x!==null;){if(x.key===ve)if(x.tag===4&&x.stateNode.containerInfo===F.containerInfo&&x.stateNode.implementation===F.implementation){a(L,x.sibling),x=f(x,F.children||[]),x.return=L,L=x;break e}else{a(L,x);break}else i(L,x);x=x.sibling}x=Cd(F,L.mode,ee),x.return=L,L=x}return v(L);case It:return ve=F._init,ut(L,x,ve(F._payload),ee)}if(cr(F))return ue(L,x,F,ee);if(re(F))return de(L,x,F,ee);fu(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,x!==null&&x.tag===6?(a(L,x.sibling),x=f(x,F),x.return=L,L=x):(a(L,x),x=Rd(F,L.mode,ee),x.return=L,L=x),v(L)):a(L,x)}return ut}var oo=im(!0),sm=im(!1),pu=Gr(null),mu=null,ao=null,Lh=null;function Fh(){Lh=ao=mu=null}function Uh(n){var i=pu.current;Xe(pu),n._currentValue=i}function zh(n,i,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===a)break;n=n.return}}function lo(n,i){mu=n,Lh=ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Jt=!0),n.firstContext=null)}function In(n){var i=n._currentValue;if(Lh!==n)if(n={context:n,memoizedValue:i,next:null},ao===null){if(mu===null)throw Error(t(308));ao=n,mu.dependencies={lanes:0,firstContext:n}}else ao=ao.next=n;return i}var $i=null;function Bh(n){$i===null?$i=[n]:$i.push(n)}function om(n,i,a,h){var f=i.interleaved;return f===null?(a.next=a,Bh(i)):(a.next=f.next,f.next=a),i.interleaved=a,Tr(n,h)}function Tr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Xr=!1;function jh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function am(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Sr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Yr(n,i,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Me&2)!==0){var f=h.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),h.pending=i,Tr(n,a)}return f=h.interleaved,f===null?(i.next=i,Bh(h)):(i.next=f.next,f.next=i),h.interleaved=i,Tr(n,a)}function gu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,a|=h,i.lanes=a,zr(n,a)}}function lm(n,i){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?f=g=i:g=g.next=i}else f=g=i;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function yu(n,i,a,h){var f=n.updateQueue;Xr=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var R=S,U=R.next;R.next=null,v===null?g=U:v.next=U,v=R;var X=n.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==v&&(S===null?X.firstBaseUpdate=U:S.next=U,X.lastBaseUpdate=R))}if(g!==null){var Y=f.baseState;v=0,X=U=R=null,S=g;do{var W=S.lane,oe=S.eventTime;if((h&W)===W){X!==null&&(X=X.next={eventTime:oe,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ue=n,de=S;switch(W=i,oe=a,de.tag){case 1:if(ue=de.payload,typeof ue=="function"){Y=ue.call(oe,Y,W);break e}Y=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=de.payload,W=typeof ue=="function"?ue.call(oe,Y,W):ue,W==null)break e;Y=te({},Y,W);break e;case 2:Xr=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,W=f.effects,W===null?f.effects=[S]:W.push(S))}else oe={eventTime:oe,lane:W,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?(U=X=oe,R=Y):X=X.next=oe,v|=W;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;W=S,S=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);if(X===null&&(R=Y),f.baseState=R,f.firstBaseUpdate=U,f.lastBaseUpdate=X,i=f.shared.interleaved,i!==null){f=i;do v|=f.lane,f=f.next;while(f!==i)}else g===null&&(f.shared.lanes=0);Hi|=v,n.lanes=v,n.memoizedState=Y}}function um(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var ka={},tr=Gr(ka),xa=Gr(ka),Na=Gr(ka);function Ki(n){if(n===ka)throw Error(t(174));return n}function $h(n,i){switch(We(Na,i),We(xa,n),We(tr,ka),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:gt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=gt(i,n)}Xe(tr),We(tr,i)}function uo(){Xe(tr),Xe(xa),Xe(Na)}function cm(n){Ki(Na.current);var i=Ki(tr.current),a=gt(i,n.type);i!==a&&(We(xa,n),We(tr,a))}function Kh(n){xa.current===n&&(Xe(tr),Xe(xa))}var nt=Gr(0);function _u(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var qh=[];function Hh(){for(var n=0;n<qh.length;n++)qh[n]._workInProgressVersionPrimary=null;qh.length=0}var vu=_e.ReactCurrentDispatcher,Gh=_e.ReactCurrentBatchConfig,qi=0,rt=null,_t=null,At=null,Eu=!1,Va=!1,Da=0,bw=0;function Ot(){throw Error(t(321))}function Wh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Fn(n[a],i[a]))return!1;return!0}function Qh(n,i,a,h,f,g){if(qi=g,rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,vu.current=n===null||n.memoizedState===null?Fw:Uw,n=a(h,f),Va){g=0;do{if(Va=!1,Da=0,25<=g)throw Error(t(301));g+=1,At=_t=null,i.updateQueue=null,vu.current=zw,n=a(h,f)}while(Va)}if(vu.current=Tu,i=_t!==null&&_t.next!==null,qi=0,At=_t=rt=null,Eu=!1,i)throw Error(t(300));return n}function Xh(){var n=Da!==0;return Da=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?rt.memoizedState=At=n:At=At.next=n,At}function Tn(){if(_t===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=At===null?rt.memoizedState:At.next;if(i!==null)At=i,_t=n;else{if(n===null)throw Error(t(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},At===null?rt.memoizedState=At=n:At=At.next=n}return At}function ba(n,i){return typeof i=="function"?i(n):i}function Yh(n){var i=Tn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=_t,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var S=v=null,R=null,U=g;do{var X=U.lane;if((qi&X)===X)R!==null&&(R=R.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),h=U.hasEagerState?U.eagerState:n(h,U.action);else{var Y={lane:X,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};R===null?(S=R=Y,v=h):R=R.next=Y,rt.lanes|=X,Hi|=X}U=U.next}while(U!==null&&U!==g);R===null?v=h:R.next=S,Fn(h,i.memoizedState)||(Jt=!0),i.memoizedState=h,i.baseState=v,i.baseQueue=R,a.lastRenderedState=h}if(n=a.interleaved,n!==null){f=n;do g=f.lane,rt.lanes|=g,Hi|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Jh(n){var i=Tn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,f=a.pending,g=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);Fn(g,i.memoizedState)||(Jt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,h]}function hm(){}function dm(n,i){var a=rt,h=Tn(),f=i(),g=!Fn(h.memoizedState,f);if(g&&(h.memoizedState=f,Jt=!0),h=h.queue,Zh(mm.bind(null,a,h,n),[n]),h.getSnapshot!==i||g||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Oa(9,pm.bind(null,a,h,f,i),void 0,null),Pt===null)throw Error(t(349));(qi&30)!==0||fm(a,i,f)}return f}function fm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function pm(n,i,a,h){i.value=a,i.getSnapshot=h,gm(i)&&ym(n)}function mm(n,i,a){return a(function(){gm(i)&&ym(n)})}function gm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Fn(n,a)}catch{return!0}}function ym(n){var i=Tr(n,1);i!==null&&$n(i,n,1,-1)}function _m(n){var i=nr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:n},i.queue=n,n=n.dispatch=Lw.bind(null,rt,n),[i.memoizedState,n]}function Oa(n,i,a,h){return n={tag:n,create:i,destroy:a,deps:h,next:null},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,i.lastEffect=n)),n}function vm(){return Tn().memoizedState}function wu(n,i,a,h){var f=nr();rt.flags|=n,f.memoizedState=Oa(1|i,a,void 0,h===void 0?null:h)}function Iu(n,i,a,h){var f=Tn();h=h===void 0?null:h;var g=void 0;if(_t!==null){var v=_t.memoizedState;if(g=v.destroy,h!==null&&Wh(h,v.deps)){f.memoizedState=Oa(i,a,g,h);return}}rt.flags|=n,f.memoizedState=Oa(1|i,a,g,h)}function Em(n,i){return wu(8390656,8,n,i)}function Zh(n,i){return Iu(2048,8,n,i)}function wm(n,i){return Iu(4,2,n,i)}function Im(n,i){return Iu(4,4,n,i)}function Tm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Sm(n,i,a){return a=a!=null?a.concat([n]):null,Iu(4,4,Tm.bind(null,i,n),a)}function ed(){}function Am(n,i){var a=Tn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Wh(i,h[1])?h[0]:(a.memoizedState=[n,i],n)}function Pm(n,i){var a=Tn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Wh(i,h[1])?h[0]:(n=n(),a.memoizedState=[n,i],n)}function Rm(n,i,a){return(qi&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(Fn(a,i)||(a=bi(),rt.lanes|=a,Hi|=a,n.baseState=!0),i)}function Ow(n,i){var a=Ne;Ne=a!==0&&4>a?a:4,n(!0);var h=Gh.transition;Gh.transition={};try{n(!1),i()}finally{Ne=a,Gh.transition=h}}function Cm(){return Tn().memoizedState}function Mw(n,i,a){var h=ti(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},km(n))xm(i,a);else if(a=om(n,i,a,h),a!==null){var f=Kt();$n(a,n,h,f),Nm(a,i,h)}}function Lw(n,i,a){var h=ti(n),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(km(n))xm(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,S=g(v,a);if(f.hasEagerState=!0,f.eagerState=S,Fn(S,v)){var R=i.interleaved;R===null?(f.next=f,Bh(i)):(f.next=R.next,R.next=f),i.interleaved=f;return}}catch{}finally{}a=om(n,i,f,h),a!==null&&(f=Kt(),$n(a,n,h,f),Nm(a,i,h))}}function km(n){var i=n.alternate;return n===rt||i!==null&&i===rt}function xm(n,i){Va=Eu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Nm(n,i,a){if((a&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,a|=h,i.lanes=a,zr(n,a)}}var Tu={readContext:In,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},Fw={readContext:In,useCallback:function(n,i){return nr().memoizedState=[n,i===void 0?null:i],n},useContext:In,useEffect:Em,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,wu(4194308,4,Tm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return wu(4194308,4,n,i)},useInsertionEffect:function(n,i){return wu(4,2,n,i)},useMemo:function(n,i){var a=nr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var h=nr();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=Mw.bind(null,rt,n),[h.memoizedState,n]},useRef:function(n){var i=nr();return n={current:n},i.memoizedState=n},useState:_m,useDebugValue:ed,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=_m(!1),i=n[0];return n=Ow.bind(null,n[1]),nr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var h=rt,f=nr();if(Je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Pt===null)throw Error(t(349));(qi&30)!==0||fm(h,i,a)}f.memoizedState=a;var g={value:a,getSnapshot:i};return f.queue=g,Em(mm.bind(null,h,g,n),[n]),h.flags|=2048,Oa(9,pm.bind(null,h,g,a,i),void 0,null),a},useId:function(){var n=nr(),i=Pt.identifierPrefix;if(Je){var a=Ir,h=wr;a=(h&~(1<<32-Bt(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=Da++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=bw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Uw={readContext:In,useCallback:Am,useContext:In,useEffect:Zh,useImperativeHandle:Sm,useInsertionEffect:wm,useLayoutEffect:Im,useMemo:Pm,useReducer:Yh,useRef:vm,useState:function(){return Yh(ba)},useDebugValue:ed,useDeferredValue:function(n){var i=Tn();return Rm(i,_t.memoizedState,n)},useTransition:function(){var n=Yh(ba)[0],i=Tn().memoizedState;return[n,i]},useMutableSource:hm,useSyncExternalStore:dm,useId:Cm,unstable_isNewReconciler:!1},zw={readContext:In,useCallback:Am,useContext:In,useEffect:Zh,useImperativeHandle:Sm,useInsertionEffect:wm,useLayoutEffect:Im,useMemo:Pm,useReducer:Jh,useRef:vm,useState:function(){return Jh(ba)},useDebugValue:ed,useDeferredValue:function(n){var i=Tn();return _t===null?i.memoizedState=n:Rm(i,_t.memoizedState,n)},useTransition:function(){var n=Jh(ba)[0],i=Tn().memoizedState;return[n,i]},useMutableSource:hm,useSyncExternalStore:dm,useId:Cm,unstable_isNewReconciler:!1};function zn(n,i){if(n&&n.defaultProps){i=te({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function td(n,i,a,h){i=n.memoizedState,a=a(h,i),a=a==null?i:te({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Su={isMounted:function(n){return(n=n._reactInternals)?Nn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var h=Kt(),f=ti(n),g=Sr(h,f);g.payload=i,a!=null&&(g.callback=a),i=Yr(n,g,f),i!==null&&($n(i,n,f,h),gu(i,n,f))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var h=Kt(),f=ti(n),g=Sr(h,f);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Yr(n,g,f),i!==null&&($n(i,n,f,h),gu(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Kt(),h=ti(n),f=Sr(a,h);f.tag=2,i!=null&&(f.callback=i),i=Yr(n,f,h),i!==null&&($n(i,n,h,a),gu(i,n,h))}};function Vm(n,i,a,h,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,v):i.prototype&&i.prototype.isPureReactComponent?!wa(a,h)||!wa(f,g):!0}function Dm(n,i,a){var h=!1,f=Wr,g=i.contextType;return typeof g=="object"&&g!==null?g=In(g):(f=Yt(i)?zi:bt.current,h=i.contextTypes,g=(h=h!=null)?no(n,f):Wr),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Su,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),i}function bm(n,i,a,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==n&&Su.enqueueReplaceState(i,i.state,null)}function nd(n,i,a,h){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},jh(n);var g=i.contextType;typeof g=="object"&&g!==null?f.context=In(g):(g=Yt(i)?zi:bt.current,f.context=no(n,g)),f.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(td(n,i,g,a),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Su.enqueueReplaceState(f,f.state,null),yu(n,a,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function co(n,i){try{var a="",h=i;do a+=Ce(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:f,digest:null}}function rd(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function id(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Bw=typeof WeakMap=="function"?WeakMap:Map;function Om(n,i,a){a=Sr(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){Nu||(Nu=!0,vd=h),id(n,i)},a}function Mm(n,i,a){a=Sr(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=i.value;a.payload=function(){return h(f)},a.callback=function(){id(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){id(n,i),typeof h!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function Lm(n,i,a){var h=n.pingCache;if(h===null){h=n.pingCache=new Bw;var f=new Set;h.set(i,f)}else f=h.get(i),f===void 0&&(f=new Set,h.set(i,f));f.has(a)||(f.add(a),n=tI.bind(null,n,i,a),i.then(n,n))}function Fm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Um(n,i,a,h,f){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Sr(-1,1),i.tag=2,Yr(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var jw=_e.ReactCurrentOwner,Jt=!1;function $t(n,i,a,h){i.child=n===null?sm(i,null,a,h):oo(i,n.child,a,h)}function zm(n,i,a,h,f){a=a.render;var g=i.ref;return lo(i,f),h=Qh(n,i,a,h,g,f),a=Xh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Ar(n,i,f)):(Je&&a&&Vh(i),i.flags|=1,$t(n,i,h,f),i.child)}function Bm(n,i,a,h,f){if(n===null){var g=a.type;return typeof g=="function"&&!Pd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,jm(n,i,g,h,f)):(n=Lu(a.type,null,h,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&f)===0){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:wa,a(v,h)&&n.ref===i.ref)return Ar(n,i,f)}return i.flags|=1,n=ri(g,h),n.ref=i.ref,n.return=i,i.child=n}function jm(n,i,a,h,f){if(n!==null){var g=n.memoizedProps;if(wa(g,h)&&n.ref===i.ref)if(Jt=!1,i.pendingProps=h=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Jt=!0);else return i.lanes=n.lanes,Ar(n,i,f)}return sd(n,i,a,h,f)}function $m(n,i,a){var h=i.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(fo,dn),dn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,We(fo,dn),dn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,We(fo,dn),dn|=h}else g!==null?(h=g.baseLanes|a,i.memoizedState=null):h=a,We(fo,dn),dn|=h;return $t(n,i,f,a),i.child}function Km(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function sd(n,i,a,h,f){var g=Yt(a)?zi:bt.current;return g=no(i,g),lo(i,f),a=Qh(n,i,a,h,g,f),h=Xh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Ar(n,i,f)):(Je&&h&&Vh(i),i.flags|=1,$t(n,i,a,f),i.child)}function qm(n,i,a,h,f){if(Yt(a)){var g=!0;lu(i)}else g=!1;if(lo(i,f),i.stateNode===null)Pu(n,i),Dm(i,a,h),nd(i,a,h,f),h=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var R=v.context,U=a.contextType;typeof U=="object"&&U!==null?U=In(U):(U=Yt(a)?zi:bt.current,U=no(i,U));var X=a.getDerivedStateFromProps,Y=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";Y||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==h||R!==U)&&bm(i,v,h,U),Xr=!1;var W=i.memoizedState;v.state=W,yu(i,h,v,f),R=i.memoizedState,S!==h||W!==R||Xt.current||Xr?(typeof X=="function"&&(td(i,a,X,h),R=i.memoizedState),(S=Xr||Vm(i,a,S,h,W,R,U))?(Y||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=R),v.props=h,v.state=R,v.context=U,h=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{v=i.stateNode,am(n,i),S=i.memoizedProps,U=i.type===i.elementType?S:zn(i.type,S),v.props=U,Y=i.pendingProps,W=v.context,R=a.contextType,typeof R=="object"&&R!==null?R=In(R):(R=Yt(a)?zi:bt.current,R=no(i,R));var oe=a.getDerivedStateFromProps;(X=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==Y||W!==R)&&bm(i,v,h,R),Xr=!1,W=i.memoizedState,v.state=W,yu(i,h,v,f);var ue=i.memoizedState;S!==Y||W!==ue||Xt.current||Xr?(typeof oe=="function"&&(td(i,a,oe,h),ue=i.memoizedState),(U=Xr||Vm(i,a,U,h,W,ue,R)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,ue,R),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,ue,R)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&W===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&W===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ue),v.props=h,v.state=ue,v.context=R,h=U):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&W===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&W===n.memoizedState||(i.flags|=1024),h=!1)}return od(n,i,a,h,g,f)}function od(n,i,a,h,f,g){Km(n,i);var v=(i.flags&128)!==0;if(!h&&!v)return f&&Xp(i,a,!1),Ar(n,i,g);h=i.stateNode,jw.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&v?(i.child=oo(i,n.child,null,g),i.child=oo(i,null,S,g)):$t(n,i,S,g),i.memoizedState=h.state,f&&Xp(i,a,!0),i.child}function Hm(n){var i=n.stateNode;i.pendingContext?Wp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Wp(n,i.context,!1),$h(n,i.containerInfo)}function Gm(n,i,a,h,f){return so(),Mh(f),i.flags|=256,$t(n,i,a,h),i.child}var ad={dehydrated:null,treeContext:null,retryLane:0};function ld(n){return{baseLanes:n,cachePool:null,transitions:null}}function Wm(n,i,a){var h=i.pendingProps,f=nt.current,g=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(f&2)!==0),S?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),We(nt,f&1),n===null)return Oh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=h.children,n=h.fallback,g?(h=i.mode,g=i.child,v={mode:"hidden",children:v},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=Fu(v,h,0,null),n=Xi(n,h,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=ld(a),i.memoizedState=ad,n):ud(i,v));if(f=n.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return $w(n,i,v,h,S,f,a);if(g){g=h.fallback,v=i.mode,f=n.child,S=f.sibling;var R={mode:"hidden",children:h.children};return(v&1)===0&&i.child!==f?(h=i.child,h.childLanes=0,h.pendingProps=R,i.deletions=null):(h=ri(f,R),h.subtreeFlags=f.subtreeFlags&14680064),S!==null?g=ri(S,g):(g=Xi(g,v,a,null),g.flags|=2),g.return=i,h.return=i,h.sibling=g,i.child=h,h=g,g=i.child,v=n.child.memoizedState,v=v===null?ld(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~a,i.memoizedState=ad,h}return g=n.child,n=g.sibling,h=ri(g,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=h,i.memoizedState=null,h}function ud(n,i){return i=Fu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Au(n,i,a,h){return h!==null&&Mh(h),oo(i,n.child,null,a),n=ud(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function $w(n,i,a,h,f,g,v){if(a)return i.flags&256?(i.flags&=-257,h=rd(Error(t(422))),Au(n,i,v,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=h.fallback,f=i.mode,h=Fu({mode:"visible",children:h.children},f,0,null),g=Xi(g,f,v,null),g.flags|=2,h.return=i,g.return=i,h.sibling=g,i.child=h,(i.mode&1)!==0&&oo(i,n.child,null,v),i.child.memoizedState=ld(v),i.memoizedState=ad,g);if((i.mode&1)===0)return Au(n,i,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var S=h.dgst;return h=S,g=Error(t(419)),h=rd(g,h,void 0),Au(n,i,v,h)}if(S=(v&n.childLanes)!==0,Jt||S){if(h=Pt,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|v))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Tr(n,f),$n(h,n,f,-1))}return Ad(),h=rd(Error(t(421))),Au(n,i,v,h)}return f.data==="$?"?(i.flags|=128,i.child=n.child,i=nI.bind(null,n),f._reactRetry=i,null):(n=g.treeContext,hn=Hr(f.nextSibling),cn=i,Je=!0,Un=null,n!==null&&(En[wn++]=wr,En[wn++]=Ir,En[wn++]=Bi,wr=n.id,Ir=n.overflow,Bi=i),i=ud(i,h.children),i.flags|=4096,i)}function Qm(n,i,a){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),zh(n.return,i,a)}function cd(n,i,a,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function Xm(n,i,a){var h=i.pendingProps,f=h.revealOrder,g=h.tail;if($t(n,i,h.children,a),h=nt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Qm(n,a,i);else if(n.tag===19)Qm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(We(nt,h),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&_u(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),cd(i,!1,f,a,g);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&_u(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}cd(i,!0,a,null,g);break;case"together":cd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Pu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Ar(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Hi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ri(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ri(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Kw(n,i,a){switch(i.tag){case 3:Hm(i),so();break;case 5:cm(i);break;case 1:Yt(i.type)&&lu(i);break;case 4:$h(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,f=i.memoizedProps.value;We(pu,h._currentValue),h._currentValue=f;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(We(nt,nt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Wm(n,i,a):(We(nt,nt.current&1),n=Ar(n,i,a),n!==null?n.sibling:null);We(nt,nt.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(n.flags&128)!==0){if(h)return Xm(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(nt,nt.current),h)break;return null;case 22:case 23:return i.lanes=0,$m(n,i,a)}return Ar(n,i,a)}var Ym,hd,Jm,Zm;Ym=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},hd=function(){},Jm=function(n,i,a,h){var f=n.memoizedProps;if(f!==h){n=i.stateNode,Ki(tr.current);var g=null;switch(a){case"input":f=Ti(n,f),h=Ti(n,h),g=[];break;case"select":f=te({},f,{value:void 0}),h=te({},h,{value:void 0}),g=[];break;case"textarea":f=Xo(n,f),h=Xo(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=su)}na(a,h);var v;a=null;for(U in f)if(!h.hasOwnProperty(U)&&f.hasOwnProperty(U)&&f[U]!=null)if(U==="style"){var S=f[U];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?g||(g=[]):(g=g||[]).push(U,null));for(U in h){var R=h[U];if(S=f!=null?f[U]:void 0,h.hasOwnProperty(U)&&R!==S&&(R!=null||S!=null))if(U==="style")if(S){for(v in S)!S.hasOwnProperty(v)||R&&R.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in R)R.hasOwnProperty(v)&&S[v]!==R[v]&&(a||(a={}),a[v]=R[v])}else a||(g||(g=[]),g.push(U,a)),a=R;else U==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,S=S?S.__html:void 0,R!=null&&S!==R&&(g=g||[]).push(U,R)):U==="children"?typeof R!="string"&&typeof R!="number"||(g=g||[]).push(U,""+R):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(R!=null&&U==="onScroll"&&Qe("scroll",n),g||S===R||(g=[])):(g=g||[]).push(U,R))}a&&(g=g||[]).push("style",a);var U=g;(i.updateQueue=U)&&(i.flags|=4)}},Zm=function(n,i,a,h){a!==h&&(i.flags|=4)};function Ma(n,i){if(!Je)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Mt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=a,i}function qw(n,i,a){var h=i.pendingProps;switch(Dh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(i),null;case 1:return Yt(i.type)&&au(),Mt(i),null;case 3:return h=i.stateNode,uo(),Xe(Xt),Xe(bt),Hh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(du(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Un!==null&&(Id(Un),Un=null))),hd(n,i),Mt(i),null;case 5:Kh(i);var f=Ki(Na.current);if(a=i.type,n!==null&&i.stateNode!=null)Jm(n,i,a,h,f),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Mt(i),null}if(n=Ki(tr.current),du(i)){h=i.stateNode,a=i.type;var g=i.memoizedProps;switch(h[er]=i,h[Pa]=g,n=(i.mode&1)!==0,a){case"dialog":Qe("cancel",h),Qe("close",h);break;case"iframe":case"object":case"embed":Qe("load",h);break;case"video":case"audio":for(f=0;f<Ta.length;f++)Qe(Ta[f],h);break;case"source":Qe("error",h);break;case"img":case"image":case"link":Qe("error",h),Qe("load",h);break;case"details":Qe("toggle",h);break;case"input":Ss(h,g),Qe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Qe("invalid",h);break;case"textarea":Ps(h,g),Qe("invalid",h)}na(a,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var S=g[v];v==="children"?typeof S=="string"?h.textContent!==S&&(g.suppressHydrationWarning!==!0&&iu(h.textContent,S,n),f=["children",S]):typeof S=="number"&&h.textContent!==""+S&&(g.suppressHydrationWarning!==!0&&iu(h.textContent,S,n),f=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Qe("scroll",h)}switch(a){case"input":ur(h),xl(h,g,!0);break;case"textarea":ur(h),Yo(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=su)}h=f,i.updateQueue=h,h!==null&&(i.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=v.createElement(a,{is:h.is}):(n=v.createElement(a),a==="select"&&(v=n,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):n=v.createElementNS(n,a),n[er]=i,n[Pa]=h,Ym(n,i,!1,!1),i.stateNode=n;e:{switch(v=ra(a,h),a){case"dialog":Qe("cancel",n),Qe("close",n),f=h;break;case"iframe":case"object":case"embed":Qe("load",n),f=h;break;case"video":case"audio":for(f=0;f<Ta.length;f++)Qe(Ta[f],n);f=h;break;case"source":Qe("error",n),f=h;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),f=h;break;case"details":Qe("toggle",n),f=h;break;case"input":Ss(n,h),f=Ti(n,h),Qe("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=te({},h,{value:void 0}),Qe("invalid",n);break;case"textarea":Ps(n,h),f=Xo(n,h),Qe("invalid",n);break;default:f=h}na(a,f),S=f;for(g in S)if(S.hasOwnProperty(g)){var R=S[g];g==="style"?ea(n,R):g==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Jo(n,R)):g==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&Or(n,R):typeof R=="number"&&Or(n,""+R):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?R!=null&&g==="onScroll"&&Qe("scroll",n):R!=null&&se(n,g,R,v))}switch(a){case"input":ur(n),xl(n,h,!1);break;case"textarea":ur(n),Yo(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Ue(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?hr(n,!!h.multiple,g,!1):h.defaultValue!=null&&hr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=su)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Mt(i),null;case 6:if(n&&i.stateNode!=null)Zm(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ki(Na.current),Ki(tr.current),du(i)){if(h=i.stateNode,a=i.memoizedProps,h[er]=i,(g=h.nodeValue!==a)&&(n=cn,n!==null))switch(n.tag){case 3:iu(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&iu(h.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[er]=i,i.stateNode=h}return Mt(i),null;case 13:if(Xe(nt),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Je&&hn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)nm(),so(),i.flags|=98560,g=!1;else if(g=du(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[er]=i}else so(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Mt(i),g=!1}else Un!==null&&(Id(Un),Un=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(nt.current&1)!==0?vt===0&&(vt=3):Ad())),i.updateQueue!==null&&(i.flags|=4),Mt(i),null);case 4:return uo(),hd(n,i),n===null&&Sa(i.stateNode.containerInfo),Mt(i),null;case 10:return Uh(i.type._context),Mt(i),null;case 17:return Yt(i.type)&&au(),Mt(i),null;case 19:if(Xe(nt),g=i.memoizedState,g===null)return Mt(i),null;if(h=(i.flags&128)!==0,v=g.rendering,v===null)if(h)Ma(g,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=_u(n),v!==null){for(i.flags|=128,Ma(g,!1),h=v.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)g=a,n=h,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(nt,nt.current&1|2),i.child}n=n.sibling}g.tail!==null&&Ge()>po&&(i.flags|=128,h=!0,Ma(g,!1),i.lanes=4194304)}else{if(!h)if(n=_u(v),n!==null){if(i.flags|=128,h=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ma(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Je)return Mt(i),null}else 2*Ge()-g.renderingStartTime>po&&a!==1073741824&&(i.flags|=128,h=!0,Ma(g,!1),i.lanes=4194304);g.isBackwards?(v.sibling=i.child,i.child=v):(a=g.last,a!==null?a.sibling=v:i.child=v,g.last=v)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Ge(),i.sibling=null,a=nt.current,We(nt,h?a&1|2:a&1),i):(Mt(i),null);case 22:case 23:return Sd(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(dn&1073741824)!==0&&(Mt(i),i.subtreeFlags&6&&(i.flags|=8192)):Mt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Hw(n,i){switch(Dh(i),i.tag){case 1:return Yt(i.type)&&au(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return uo(),Xe(Xt),Xe(bt),Hh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Kh(i),null;case 13:if(Xe(nt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));so()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Xe(nt),null;case 4:return uo(),null;case 10:return Uh(i.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var Ru=!1,Lt=!1,Gw=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ho(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ot(n,i,h)}else a.current=null}function dd(n,i,a){try{a()}catch(h){ot(n,i,h)}}var eg=!1;function Ww(n,i){if(Sh=$r,n=Vp(),gh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var v=0,S=-1,R=-1,U=0,X=0,Y=n,W=null;t:for(;;){for(var oe;Y!==a||f!==0&&Y.nodeType!==3||(S=v+f),Y!==g||h!==0&&Y.nodeType!==3||(R=v+h),Y.nodeType===3&&(v+=Y.nodeValue.length),(oe=Y.firstChild)!==null;)W=Y,Y=oe;for(;;){if(Y===n)break t;if(W===a&&++U===f&&(S=v),W===g&&++X===h&&(R=v),(oe=Y.nextSibling)!==null)break;Y=W,W=Y.parentNode}Y=oe}a=S===-1||R===-1?null:{start:S,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ah={focusedElem:n,selectionRange:a},$r=!1,ae=i;ae!==null;)if(i=ae,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ae=n;else for(;ae!==null;){i=ae;try{var ue=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var de=ue.memoizedProps,ut=ue.memoizedState,L=i.stateNode,x=L.getSnapshotBeforeUpdate(i.elementType===i.type?de:zn(i.type,de),ut);L.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var F=i.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){ot(i,i.return,ee)}if(n=i.sibling,n!==null){n.return=i.return,ae=n;break}ae=i.return}return ue=eg,eg=!1,ue}function La(n,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&dd(i,a,g)}f=f.next}while(f!==h)}}function Cu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function fd(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function tg(n){var i=n.alternate;i!==null&&(n.alternate=null,tg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[er],delete i[Pa],delete i[kh],delete i[xw],delete i[Nw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ng(n){return n.tag===5||n.tag===3||n.tag===4}function rg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ng(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pd(n,i,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=su));else if(h!==4&&(n=n.child,n!==null))for(pd(n,i,a),n=n.sibling;n!==null;)pd(n,i,a),n=n.sibling}function md(n,i,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(md(n,i,a),n=n.sibling;n!==null;)md(n,i,a),n=n.sibling}var Nt=null,Bn=!1;function Jr(n,i,a){for(a=a.child;a!==null;)ig(n,i,a),a=a.sibling}function ig(n,i,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Vi,a)}catch{}switch(a.tag){case 5:Lt||ho(a,i);case 6:var h=Nt,f=Bn;Nt=null,Jr(n,i,a),Nt=h,Bn=f,Nt!==null&&(Bn?(n=Nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(Bn?(n=Nt,a=a.stateNode,n.nodeType===8?Ch(n.parentNode,a):n.nodeType===1&&Ch(n,a),Mn(n)):Ch(Nt,a.stateNode));break;case 4:h=Nt,f=Bn,Nt=a.stateNode.containerInfo,Bn=!0,Jr(n,i,a),Nt=h,Bn=f;break;case 0:case 11:case 14:case 15:if(!Lt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&dd(a,i,v),f=f.next}while(f!==h)}Jr(n,i,a);break;case 1:if(!Lt&&(ho(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(S){ot(a,i,S)}Jr(n,i,a);break;case 21:Jr(n,i,a);break;case 22:a.mode&1?(Lt=(h=Lt)||a.memoizedState!==null,Jr(n,i,a),Lt=h):Jr(n,i,a);break;default:Jr(n,i,a)}}function sg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Gw),i.forEach(function(h){var f=rI.bind(null,n,h);a.has(h)||(a.add(h),h.then(f,f))})}}function jn(n,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:Nt=S.stateNode,Bn=!1;break e;case 3:Nt=S.stateNode.containerInfo,Bn=!0;break e;case 4:Nt=S.stateNode.containerInfo,Bn=!0;break e}S=S.return}if(Nt===null)throw Error(t(160));ig(g,v,f),Nt=null,Bn=!1;var R=f.alternate;R!==null&&(R.return=null),f.return=null}catch(U){ot(f,i,U)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)og(i,n),i=i.sibling}function og(n,i){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(jn(i,n),rr(n),h&4){try{La(3,n,n.return),Cu(3,n)}catch(de){ot(n,n.return,de)}try{La(5,n,n.return)}catch(de){ot(n,n.return,de)}}break;case 1:jn(i,n),rr(n),h&512&&a!==null&&ho(a,a.return);break;case 5:if(jn(i,n),rr(n),h&512&&a!==null&&ho(a,a.return),n.flags&32){var f=n.stateNode;try{Or(f,"")}catch(de){ot(n,n.return,de)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=a!==null?a.memoizedProps:g,S=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{S==="input"&&g.type==="radio"&&g.name!=null&&Wo(f,g),ra(S,v);var U=ra(S,g);for(v=0;v<R.length;v+=2){var X=R[v],Y=R[v+1];X==="style"?ea(f,Y):X==="dangerouslySetInnerHTML"?Jo(f,Y):X==="children"?Or(f,Y):se(f,X,Y,U)}switch(S){case"input":Qo(f,g);break;case"textarea":Rs(f,g);break;case"select":var W=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var oe=g.value;oe!=null?hr(f,!!g.multiple,oe,!1):W!==!!g.multiple&&(g.defaultValue!=null?hr(f,!!g.multiple,g.defaultValue,!0):hr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Pa]=g}catch(de){ot(n,n.return,de)}}break;case 6:if(jn(i,n),rr(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(de){ot(n,n.return,de)}}break;case 3:if(jn(i,n),rr(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Mn(i.containerInfo)}catch(de){ot(n,n.return,de)}break;case 4:jn(i,n),rr(n);break;case 13:jn(i,n),rr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(_d=Ge())),h&4&&sg(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Lt=(U=Lt)||X,jn(i,n),Lt=U):jn(i,n),rr(n),h&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!X&&(n.mode&1)!==0)for(ae=n,X=n.child;X!==null;){for(Y=ae=X;ae!==null;){switch(W=ae,oe=W.child,W.tag){case 0:case 11:case 14:case 15:La(4,W,W.return);break;case 1:ho(W,W.return);var ue=W.stateNode;if(typeof ue.componentWillUnmount=="function"){h=W,a=W.return;try{i=h,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(de){ot(h,a,de)}}break;case 5:ho(W,W.return);break;case 22:if(W.memoizedState!==null){ug(Y);continue}}oe!==null?(oe.return=W,ae=oe):ug(Y)}X=X.sibling}e:for(X=null,Y=n;;){if(Y.tag===5){if(X===null){X=Y;try{f=Y.stateNode,U?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(S=Y.stateNode,R=Y.memoizedProps.style,v=R!=null&&R.hasOwnProperty("display")?R.display:null,S.style.display=Zo("display",v))}catch(de){ot(n,n.return,de)}}}else if(Y.tag===6){if(X===null)try{Y.stateNode.nodeValue=U?"":Y.memoizedProps}catch(de){ot(n,n.return,de)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;X===Y&&(X=null),Y=Y.return}X===Y&&(X=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:jn(i,n),rr(n),h&4&&sg(n);break;case 21:break;default:jn(i,n),rr(n)}}function rr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(ng(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Or(f,""),h.flags&=-33);var g=rg(n);md(n,g,f);break;case 3:case 4:var v=h.stateNode.containerInfo,S=rg(n);pd(n,S,v);break;default:throw Error(t(161))}}catch(R){ot(n,n.return,R)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Qw(n,i,a){ae=n,ag(n)}function ag(n,i,a){for(var h=(n.mode&1)!==0;ae!==null;){var f=ae,g=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||Ru;if(!v){var S=f.alternate,R=S!==null&&S.memoizedState!==null||Lt;S=Ru;var U=Lt;if(Ru=v,(Lt=R)&&!U)for(ae=f;ae!==null;)v=ae,R=v.child,v.tag===22&&v.memoizedState!==null?cg(f):R!==null?(R.return=v,ae=R):cg(f);for(;g!==null;)ae=g,ag(g),g=g.sibling;ae=f,Ru=S,Lt=U}lg(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ae=g):lg(n)}}function lg(n){for(;ae!==null;){var i=ae;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Lt||Cu(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Lt)if(a===null)h.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:zn(i.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&um(i,g,h);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}um(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var R=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var U=i.alternate;if(U!==null){var X=U.memoizedState;if(X!==null){var Y=X.dehydrated;Y!==null&&Mn(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||i.flags&512&&fd(i)}catch(W){ot(i,i.return,W)}}if(i===n){ae=null;break}if(a=i.sibling,a!==null){a.return=i.return,ae=a;break}ae=i.return}}function ug(n){for(;ae!==null;){var i=ae;if(i===n){ae=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ae=a;break}ae=i.return}}function cg(n){for(;ae!==null;){var i=ae;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Cu(4,i)}catch(R){ot(i,a,R)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var f=i.return;try{h.componentDidMount()}catch(R){ot(i,f,R)}}var g=i.return;try{fd(i)}catch(R){ot(i,g,R)}break;case 5:var v=i.return;try{fd(i)}catch(R){ot(i,v,R)}}}catch(R){ot(i,i.return,R)}if(i===n){ae=null;break}var S=i.sibling;if(S!==null){S.return=i.return,ae=S;break}ae=i.return}}var Xw=Math.ceil,ku=_e.ReactCurrentDispatcher,gd=_e.ReactCurrentOwner,Sn=_e.ReactCurrentBatchConfig,Me=0,Pt=null,ht=null,Vt=0,dn=0,fo=Gr(0),vt=0,Fa=null,Hi=0,xu=0,yd=0,Ua=null,Zt=null,_d=0,po=1/0,Pr=null,Nu=!1,vd=null,Zr=null,Vu=!1,ei=null,Du=0,za=0,Ed=null,bu=-1,Ou=0;function Kt(){return(Me&6)!==0?Ge():bu!==-1?bu:bu=Ge()}function ti(n){return(n.mode&1)===0?1:(Me&2)!==0&&Vt!==0?Vt&-Vt:Dw.transition!==null?(Ou===0&&(Ou=bi()),Ou):(n=Ne,n!==0||(n=window.event,n=n===void 0?16:pa(n.type)),n)}function $n(n,i,a,h){if(50<za)throw za=0,Ed=null,Error(t(185));Ur(n,a,h),((Me&2)===0||n!==Pt)&&(n===Pt&&((Me&2)===0&&(xu|=a),vt===4&&ni(n,Vt)),en(n,h),a===1&&Me===0&&(i.mode&1)===0&&(po=Ge()+500,uu&&Qr()))}function en(n,i){var a=n.callbackNode;pr(n,i);var h=Di(n,n===Pt?Vt:0);if(h===0)a!==null&&ua(a),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(a!=null&&ua(a),i===1)n.tag===0?Vw(dg.bind(null,n)):Yp(dg.bind(null,n)),Cw(function(){(Me&6)===0&&Qr()}),a=null;else{switch(Br(h)){case 1:a=Ni;break;case 4:a=Mr;break;case 16:a=yn;break;case 536870912:a=Ol;break;default:a=yn}a=Eg(a,hg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function hg(n,i){if(bu=-1,Ou=0,(Me&6)!==0)throw Error(t(327));var a=n.callbackNode;if(mo()&&n.callbackNode!==a)return null;var h=Di(n,n===Pt?Vt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=Mu(n,h);else{i=h;var f=Me;Me|=2;var g=pg();(Pt!==n||Vt!==i)&&(Pr=null,po=Ge()+500,Wi(n,i));do try{Zw();break}catch(S){fg(n,S)}while(!0);Fh(),ku.current=g,Me=f,ht!==null?i=0:(Pt=null,Vt=0,i=vt)}if(i!==0){if(i===2&&(f=an(n),f!==0&&(h=f,i=wd(n,f))),i===1)throw a=Fa,Wi(n,0),ni(n,h),en(n,Ge()),a;if(i===6)ni(n,h);else{if(f=n.current.alternate,(h&30)===0&&!Yw(f)&&(i=Mu(n,h),i===2&&(g=an(n),g!==0&&(h=g,i=wd(n,g))),i===1))throw a=Fa,Wi(n,0),ni(n,h),en(n,Ge()),a;switch(n.finishedWork=f,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Qi(n,Zt,Pr);break;case 3:if(ni(n,h),(h&130023424)===h&&(i=_d+500-Ge(),10<i)){if(Di(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){Kt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Rh(Qi.bind(null,n,Zt,Pr),i);break}Qi(n,Zt,Pr);break;case 4:if(ni(n,h),(h&4194240)===h)break;for(i=n.eventTimes,f=-1;0<h;){var v=31-Bt(h);g=1<<v,v=i[v],v>f&&(f=v),h&=~g}if(h=f,h=Ge()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Xw(h/1960))-h,10<h){n.timeoutHandle=Rh(Qi.bind(null,n,Zt,Pr),h);break}Qi(n,Zt,Pr);break;case 5:Qi(n,Zt,Pr);break;default:throw Error(t(329))}}}return en(n,Ge()),n.callbackNode===a?hg.bind(null,n):null}function wd(n,i){var a=Ua;return n.current.memoizedState.isDehydrated&&(Wi(n,i).flags|=256),n=Mu(n,i),n!==2&&(i=Zt,Zt=a,i!==null&&Id(i)),n}function Id(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function Yw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Fn(g(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ni(n,i){for(i&=~yd,i&=~xu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Bt(i),h=1<<a;n[a]=-1,i&=~h}}function dg(n){if((Me&6)!==0)throw Error(t(327));mo();var i=Di(n,0);if((i&1)===0)return en(n,Ge()),null;var a=Mu(n,i);if(n.tag!==0&&a===2){var h=an(n);h!==0&&(i=h,a=wd(n,h))}if(a===1)throw a=Fa,Wi(n,0),ni(n,i),en(n,Ge()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Qi(n,Zt,Pr),en(n,Ge()),null}function Td(n,i){var a=Me;Me|=1;try{return n(i)}finally{Me=a,Me===0&&(po=Ge()+500,uu&&Qr())}}function Gi(n){ei!==null&&ei.tag===0&&(Me&6)===0&&mo();var i=Me;Me|=1;var a=Sn.transition,h=Ne;try{if(Sn.transition=null,Ne=1,n)return n()}finally{Ne=h,Sn.transition=a,Me=i,(Me&6)===0&&Qr()}}function Sd(){dn=fo.current,Xe(fo)}function Wi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Rw(a)),ht!==null)for(a=ht.return;a!==null;){var h=a;switch(Dh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&au();break;case 3:uo(),Xe(Xt),Xe(bt),Hh();break;case 5:Kh(h);break;case 4:uo();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:Uh(h.type._context);break;case 22:case 23:Sd()}a=a.return}if(Pt=n,ht=n=ri(n.current,null),Vt=dn=i,vt=0,Fa=null,yd=xu=Hi=0,Zt=Ua=null,$i!==null){for(i=0;i<$i.length;i++)if(a=$i[i],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var v=g.next;g.next=f,h.next=v}a.pending=h}$i=null}return n}function fg(n,i){do{var a=ht;try{if(Fh(),vu.current=Tu,Eu){for(var h=rt.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Eu=!1}if(qi=0,At=_t=rt=null,Va=!1,Da=0,gd.current=null,a===null||a.return===null){vt=1,Fa=i,ht=null;break}e:{var g=n,v=a.return,S=a,R=i;if(i=Vt,S.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var U=R,X=S,Y=X.tag;if((X.mode&1)===0&&(Y===0||Y===11||Y===15)){var W=X.alternate;W?(X.updateQueue=W.updateQueue,X.memoizedState=W.memoizedState,X.lanes=W.lanes):(X.updateQueue=null,X.memoizedState=null)}var oe=Fm(v);if(oe!==null){oe.flags&=-257,Um(oe,v,S,g,i),oe.mode&1&&Lm(g,U,i),i=oe,R=U;var ue=i.updateQueue;if(ue===null){var de=new Set;de.add(R),i.updateQueue=de}else ue.add(R);break e}else{if((i&1)===0){Lm(g,U,i),Ad();break e}R=Error(t(426))}}else if(Je&&S.mode&1){var ut=Fm(v);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Um(ut,v,S,g,i),Mh(co(R,S));break e}}g=R=co(R,S),vt!==4&&(vt=2),Ua===null?Ua=[g]:Ua.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var L=Om(g,R,i);lm(g,L);break e;case 1:S=R;var x=g.type,F=g.stateNode;if((g.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Zr===null||!Zr.has(F)))){g.flags|=65536,i&=-i,g.lanes|=i;var ee=Mm(g,S,i);lm(g,ee);break e}}g=g.return}while(g!==null)}gg(a)}catch(fe){i=fe,ht===a&&a!==null&&(ht=a=a.return);continue}break}while(!0)}function pg(){var n=ku.current;return ku.current=Tu,n===null?Tu:n}function Ad(){(vt===0||vt===3||vt===2)&&(vt=4),Pt===null||(Hi&268435455)===0&&(xu&268435455)===0||ni(Pt,Vt)}function Mu(n,i){var a=Me;Me|=2;var h=pg();(Pt!==n||Vt!==i)&&(Pr=null,Wi(n,i));do try{Jw();break}catch(f){fg(n,f)}while(!0);if(Fh(),Me=a,ku.current=h,ht!==null)throw Error(t(261));return Pt=null,Vt=0,vt}function Jw(){for(;ht!==null;)mg(ht)}function Zw(){for(;ht!==null&&!Dl();)mg(ht)}function mg(n){var i=vg(n.alternate,n,dn);n.memoizedProps=n.pendingProps,i===null?gg(n):ht=i,gd.current=null}function gg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=qw(a,i,dn),a!==null){ht=a;return}}else{if(a=Hw(a,i),a!==null){a.flags&=32767,ht=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vt=6,ht=null;return}}if(i=i.sibling,i!==null){ht=i;return}ht=i=n}while(i!==null);vt===0&&(vt=5)}function Qi(n,i,a){var h=Ne,f=Sn.transition;try{Sn.transition=null,Ne=1,eI(n,i,a,h)}finally{Sn.transition=f,Ne=h}return null}function eI(n,i,a,h){do mo();while(ei!==null);if((Me&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(qe(n,g),n===Pt&&(ht=Pt=null,Vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Vu||(Vu=!0,Eg(yn,function(){return mo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Sn.transition,Sn.transition=null;var v=Ne;Ne=1;var S=Me;Me|=4,gd.current=null,Ww(n,a),og(a,n),Ew(Ah),$r=!!Sh,Ah=Sh=null,n.current=a,Qw(a),lh(),Me=S,Ne=v,Sn.transition=g}else n.current=a;if(Vu&&(Vu=!1,ei=n,Du=f),g=n.pendingLanes,g===0&&(Zr=null),Ml(a.stateNode),en(n,Ge()),i!==null)for(h=n.onRecoverableError,a=0;a<i.length;a++)f=i[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(Nu)throw Nu=!1,n=vd,vd=null,n;return(Du&1)!==0&&n.tag!==0&&mo(),g=n.pendingLanes,(g&1)!==0?n===Ed?za++:(za=0,Ed=n):za=0,Qr(),null}function mo(){if(ei!==null){var n=Br(Du),i=Sn.transition,a=Ne;try{if(Sn.transition=null,Ne=16>n?16:n,ei===null)var h=!1;else{if(n=ei,ei=null,Du=0,(Me&6)!==0)throw Error(t(331));var f=Me;for(Me|=4,ae=n.current;ae!==null;){var g=ae,v=g.child;if((ae.flags&16)!==0){var S=g.deletions;if(S!==null){for(var R=0;R<S.length;R++){var U=S[R];for(ae=U;ae!==null;){var X=ae;switch(X.tag){case 0:case 11:case 15:La(8,X,g)}var Y=X.child;if(Y!==null)Y.return=X,ae=Y;else for(;ae!==null;){X=ae;var W=X.sibling,oe=X.return;if(tg(X),X===U){ae=null;break}if(W!==null){W.return=oe,ae=W;break}ae=oe}}}var ue=g.alternate;if(ue!==null){var de=ue.child;if(de!==null){ue.child=null;do{var ut=de.sibling;de.sibling=null,de=ut}while(de!==null)}}ae=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,ae=v;else e:for(;ae!==null;){if(g=ae,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:La(9,g,g.return)}var L=g.sibling;if(L!==null){L.return=g.return,ae=L;break e}ae=g.return}}var x=n.current;for(ae=x;ae!==null;){v=ae;var F=v.child;if((v.subtreeFlags&2064)!==0&&F!==null)F.return=v,ae=F;else e:for(v=x;ae!==null;){if(S=ae,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Cu(9,S)}}catch(fe){ot(S,S.return,fe)}if(S===v){ae=null;break e}var ee=S.sibling;if(ee!==null){ee.return=S.return,ae=ee;break e}ae=S.return}}if(Me=f,Qr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Vi,n)}catch{}h=!0}return h}finally{Ne=a,Sn.transition=i}}return!1}function yg(n,i,a){i=co(a,i),i=Om(n,i,1),n=Yr(n,i,1),i=Kt(),n!==null&&(Ur(n,1,i),en(n,i))}function ot(n,i,a){if(n.tag===3)yg(n,n,a);else for(;i!==null;){if(i.tag===3){yg(i,n,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Zr===null||!Zr.has(h))){n=co(a,n),n=Mm(i,n,1),i=Yr(i,n,1),n=Kt(),i!==null&&(Ur(i,1,n),en(i,n));break}}i=i.return}}function tI(n,i,a){var h=n.pingCache;h!==null&&h.delete(i),i=Kt(),n.pingedLanes|=n.suspendedLanes&a,Pt===n&&(Vt&a)===a&&(vt===4||vt===3&&(Vt&130023424)===Vt&&500>Ge()-_d?Wi(n,0):yd|=a),en(n,i)}function _g(n,i){i===0&&((n.mode&1)===0?i=1:(i=Ls,Ls<<=1,(Ls&130023424)===0&&(Ls=4194304)));var a=Kt();n=Tr(n,i),n!==null&&(Ur(n,i,a),en(n,a))}function nI(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),_g(n,a)}function rI(n,i){var a=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),_g(n,a)}var vg;vg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Xt.current)Jt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Jt=!1,Kw(n,i,a);Jt=(n.flags&131072)!==0}else Jt=!1,Je&&(i.flags&1048576)!==0&&Jp(i,hu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Pu(n,i),n=i.pendingProps;var f=no(i,bt.current);lo(i,a),f=Qh(null,i,h,n,f,a);var g=Xh();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yt(h)?(g=!0,lu(i)):g=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,jh(i),f.updater=Su,i.stateNode=f,f._reactInternals=i,nd(i,h,n,a),i=od(null,i,h,!0,g,a)):(i.tag=0,Je&&g&&Vh(i),$t(null,i,f,a),i=i.child),i;case 16:h=i.elementType;e:{switch(Pu(n,i),n=i.pendingProps,f=h._init,h=f(h._payload),i.type=h,f=i.tag=sI(h),n=zn(h,n),f){case 0:i=sd(null,i,h,n,a);break e;case 1:i=qm(null,i,h,n,a);break e;case 11:i=zm(null,i,h,n,a);break e;case 14:i=Bm(null,i,h,zn(h.type,n),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:zn(h,f),sd(n,i,h,f,a);case 1:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:zn(h,f),qm(n,i,h,f,a);case 3:e:{if(Hm(i),n===null)throw Error(t(387));h=i.pendingProps,g=i.memoizedState,f=g.element,am(n,i),yu(i,h,null,a);var v=i.memoizedState;if(h=v.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){f=co(Error(t(423)),i),i=Gm(n,i,h,a,f);break e}else if(h!==f){f=co(Error(t(424)),i),i=Gm(n,i,h,a,f);break e}else for(hn=Hr(i.stateNode.containerInfo.firstChild),cn=i,Je=!0,Un=null,a=sm(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(so(),h===f){i=Ar(n,i,a);break e}$t(n,i,h,a)}i=i.child}return i;case 5:return cm(i),n===null&&Oh(i),h=i.type,f=i.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,Ph(h,f)?v=null:g!==null&&Ph(h,g)&&(i.flags|=32),Km(n,i),$t(n,i,v,a),i.child;case 6:return n===null&&Oh(i),null;case 13:return Wm(n,i,a);case 4:return $h(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=oo(i,null,h,a):$t(n,i,h,a),i.child;case 11:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:zn(h,f),zm(n,i,h,f,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,f=i.pendingProps,g=i.memoizedProps,v=f.value,We(pu,h._currentValue),h._currentValue=v,g!==null)if(Fn(g.value,v)){if(g.children===f.children&&!Xt.current){i=Ar(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var S=g.dependencies;if(S!==null){v=g.child;for(var R=S.firstContext;R!==null;){if(R.context===h){if(g.tag===1){R=Sr(-1,a&-a),R.tag=2;var U=g.updateQueue;if(U!==null){U=U.shared;var X=U.pending;X===null?R.next=R:(R.next=X.next,X.next=R),U.pending=R}}g.lanes|=a,R=g.alternate,R!==null&&(R.lanes|=a),zh(g.return,a,i),S.lanes|=a;break}R=R.next}}else if(g.tag===10)v=g.type===i.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),zh(v,a,i),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===i){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}$t(n,i,f.children,a),i=i.child}return i;case 9:return f=i.type,h=i.pendingProps.children,lo(i,a),f=In(f),h=h(f),i.flags|=1,$t(n,i,h,a),i.child;case 14:return h=i.type,f=zn(h,i.pendingProps),f=zn(h.type,f),Bm(n,i,h,f,a);case 15:return jm(n,i,i.type,i.pendingProps,a);case 17:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:zn(h,f),Pu(n,i),i.tag=1,Yt(h)?(n=!0,lu(i)):n=!1,lo(i,a),Dm(i,h,f),nd(i,h,f,a),od(null,i,h,!0,n,a);case 19:return Xm(n,i,a);case 22:return $m(n,i,a)}throw Error(t(156,i.tag))};function Eg(n,i){return Os(n,i)}function iI(n,i,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,i,a,h){return new iI(n,i,a,h)}function Pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function sI(n){if(typeof n=="function")return Pd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===wt)return 14}return 2}function ri(n,i){var a=n.alternate;return a===null?(a=An(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Lu(n,i,a,h,f,g){var v=2;if(h=n,typeof n=="function")Pd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case C:return Xi(a.children,f,g,i);case T:v=8,f|=8;break;case P:return n=An(12,a,i,f|2),n.elementType=P,n.lanes=g,n;case A:return n=An(13,a,i,f),n.elementType=A,n.lanes=g,n;case tt:return n=An(19,a,i,f),n.elementType=tt,n.lanes=g,n;case Z:return Fu(a,f,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:v=10;break e;case V:v=9;break e;case b:v=11;break e;case wt:v=14;break e;case It:v=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=An(v,a,i,f),i.elementType=n,i.type=h,i.lanes=g,i}function Xi(n,i,a,h){return n=An(7,n,h,i),n.lanes=a,n}function Fu(n,i,a,h){return n=An(22,n,h,i),n.elementType=Z,n.lanes=a,n.stateNode={isHidden:!1},n}function Rd(n,i,a){return n=An(6,n,null,i),n.lanes=a,n}function Cd(n,i,a){return i=An(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function oI(n,i,a,h,f){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fr(0),this.expirationTimes=Fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function kd(n,i,a,h,f,g,v,S,R){return n=new oI(n,i,a,S,R),i===1?(i=1,g===!0&&(i|=8)):i=0,g=An(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(g),n}function aI(n,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:h==null?null:""+h,children:n,containerInfo:i,implementation:a}}function wg(n){if(!n)return Wr;n=n._reactInternals;e:{if(Nn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Yt(a))return Qp(n,a,i)}return i}function Ig(n,i,a,h,f,g,v,S,R){return n=kd(a,h,!0,n,f,g,v,S,R),n.context=wg(null),a=n.current,h=Kt(),f=ti(a),g=Sr(h,f),g.callback=i??null,Yr(a,g,f),n.current.lanes=f,Ur(n,f,h),en(n,h),n}function Uu(n,i,a,h){var f=i.current,g=Kt(),v=ti(f);return a=wg(a),i.context===null?i.context=a:i.pendingContext=a,i=Sr(g,v),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=Yr(f,i,v),n!==null&&($n(n,f,v,g),gu(n,f,v)),v}function zu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Tg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function xd(n,i){Tg(n,i),(n=n.alternate)&&Tg(n,i)}function lI(){return null}var Sg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Nd(n){this._internalRoot=n}Bu.prototype.render=Nd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Uu(n,i,null,null)},Bu.prototype.unmount=Nd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Gi(function(){Uu(null,n,null,null)}),i[vr]=null}};function Bu(n){this._internalRoot=n}Bu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Bl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Xn.length&&i!==0&&i<Xn[a].priority;a++);Xn.splice(a,0,n),a===0&&Kl(n)}};function Vd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ju(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ag(){}function uI(n,i,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var U=zu(v);g.call(U)}}var v=Ig(i,h,n,0,null,!1,!1,"",Ag);return n._reactRootContainer=v,n[vr]=v.current,Sa(n.nodeType===8?n.parentNode:n),Gi(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var S=h;h=function(){var U=zu(R);S.call(U)}}var R=kd(n,0,!1,null,null,!1,!1,"",Ag);return n._reactRootContainer=R,n[vr]=R.current,Sa(n.nodeType===8?n.parentNode:n),Gi(function(){Uu(i,R,a,h)}),R}function $u(n,i,a,h,f){var g=a._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var S=f;f=function(){var R=zu(v);S.call(R)}}Uu(i,v,n,f)}else v=uI(a,i,n,f,h);return zu(v)}Ul=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Lr(i.pendingLanes);a!==0&&(zr(i,a|1),en(i,Ge()),(Me&6)===0&&(po=Ge()+500,Qr()))}break;case 13:Gi(function(){var h=Tr(n,1);if(h!==null){var f=Kt();$n(h,n,1,f)}}),xd(n,1)}},Fs=function(n){if(n.tag===13){var i=Tr(n,134217728);if(i!==null){var a=Kt();$n(i,n,134217728,a)}xd(n,134217728)}},zl=function(n){if(n.tag===13){var i=ti(n),a=Tr(n,i);if(a!==null){var h=Kt();$n(a,n,i,h)}xd(n,i)}},Bl=function(){return Ne},jl=function(n,i){var a=Ne;try{return Ne=n,i()}finally{Ne=a}},ks=function(n,i,a){switch(i){case"input":if(Qo(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==n&&h.form===n.form){var f=ou(h);if(!f)throw Error(t(90));Ts(h),Qo(h,f)}}}break;case"textarea":Rs(n,a);break;case"select":i=a.value,i!=null&&hr(n,!!a.multiple,i,!1)}},Ri=Td,sa=Gi;var cI={usingClientEntryPoint:!1,Events:[Ra,eo,ou,Wn,ia,Td]},Ba={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hI={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_e.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=la(n),n===null?null:n.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||lI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{Vi=Ku.inject(hI),on=Ku}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cI,tn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vd(i))throw Error(t(200));return aI(n,i,null,a)},tn.createRoot=function(n,i){if(!Vd(n))throw Error(t(299));var a=!1,h="",f=Sg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=kd(n,1,!1,null,null,a,!1,h,f),n[vr]=i.current,Sa(n.nodeType===8?n.parentNode:n),new Nd(i)},tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=la(i),n=n===null?null:n.stateNode,n},tn.flushSync=function(n){return Gi(n)},tn.hydrate=function(n,i,a){if(!ju(i))throw Error(t(200));return $u(null,n,i,!0,a)},tn.hydrateRoot=function(n,i,a){if(!Vd(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",v=Sg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Ig(i,null,n,1,a??null,f,!1,g,v),n[vr]=i.current,Sa(n),h)for(n=0;n<h.length;n++)a=h[n],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new Bu(i)},tn.render=function(n,i,a){if(!ju(i))throw Error(t(200));return $u(null,n,i,!1,a)},tn.unmountComponentAtNode=function(n){if(!ju(n))throw Error(t(40));return n._reactRootContainer?(Gi(function(){$u(null,null,n,!1,function(){n._reactRootContainer=null,n[vr]=null})}),!0):!1},tn.unstable_batchedUpdates=Td,tn.unstable_renderSubtreeIntoContainer=function(n,i,a,h){if(!ju(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return $u(n,i,a,!1,h)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Ng;function yI(){if(Ng)return bd.exports;Ng=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),bd.exports=gI(),bd.exports}var Vg;function _I(){if(Vg)return qu;Vg=1;var s=yI();return qu.createRoot=s.createRoot,qu.hydrateRoot=s.hydrateRoot,qu}var vI=_I();const EI=I_(vI);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S_=(...s)=>s.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var II={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=ft.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:c,...d},p)=>ft.createElement("svg",{ref:p,...II,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:S_("lucide",o),...d},[...c.map(([_,w])=>ft.createElement(_,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=(s,e)=>{const t=ft.forwardRef(({className:r,...o},l)=>ft.createElement(TI,{ref:l,iconNode:e,className:S_(`lucide-${wI(s)}`,r),...o}));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Hn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Hn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=Hn("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=Hn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Hn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Hn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Hn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Hn("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=Hn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Hn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Hn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),DI=()=>{};var Og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},bI=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[t++],c=s[t++],d=s[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},P_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const l=s[o],c=o+1<s.length,d=c?s[o+1]:0,p=o+2<s.length,_=p?s[o+2]:0,w=l>>2,I=(l&3)<<4|d>>4;let N=(d&15)<<2|_>>6,B=_&63;p||(B=64,c||(N=64)),r.push(t[w],t[I],t[N],t[B])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(A_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):bI(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const l=t[s.charAt(o++)],d=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const I=o<s.length?t[s.charAt(o)]:64;if(++o,l==null||d==null||_==null||I==null)throw new OI;const N=l<<2|d>>4;if(r.push(N),_!==64){const B=d<<4&240|_>>2;if(r.push(B),I!==64){const Q=_<<6&192|I;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class OI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MI=function(s){const e=A_(s);return P_.encodeByteArray(e,!0)},R_=function(s){return MI(s).replace(/\./g,"")},C_=function(s){try{return P_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=()=>k_().__FIREBASE_DEFAULTS__,FI=()=>{if(typeof process>"u"||typeof Og>"u")return;const s=Og.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},UI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&C_(s[1]);return e&&JSON.parse(e)},kf=()=>{try{return DI()||LI()||FI()||UI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},zI=()=>{var s;return(s=kf())===null||s===void 0?void 0:s.config},BI=s=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(s){return s.endsWith(".cloudworkstations.dev")}async function $I(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function x_(){var s;const e=(s=kf())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function GI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N_(){return!x_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V_(){return!x_()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function D_(){try{return typeof indexedDB=="object"}catch{return!1}}function WI(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="FirebaseError";class Ei extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=QI,Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?XI(l,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ei(o,d,r)}}function XI(s,e){return s.replace(YI,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const YI=/\{\$([^}]+)}/g;function mc(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=s[o],c=e[o];if(Mg(l)&&Mg(c)){if(!mc(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Mg(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JI(s,e){const t=new ZI(s,e);return t.subscribe.bind(t)}class ZI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");e0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Ld),o.error===void 0&&(o.error=Ld),o.complete===void 0&&(o.complete=Ld);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e0(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(s){return s&&s._delegate?s._delegate:s}class ds{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new jI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r0(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:n0(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n0(s){return s===Ji?void 0:s}function r0(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new t0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(xe||(xe={}));const s0={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},o0=xe.INFO,a0={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},l0=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=a0[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xf{constructor(e){this.name=e,this._logLevel=o0,this._logHandler=l0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const u0=(s,e)=>e.some(t=>s instanceof t);let Lg,Fg;function c0(){return Lg||(Lg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h0(){return Fg||(Fg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O_=new WeakMap,Yd=new WeakMap,M_=new WeakMap,Fd=new WeakMap,Nf=new WeakMap;function d0(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(hi(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&O_.set(t,s)}).catch(()=>{}),Nf.set(e,s),e}function f0(s){if(Yd.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Yd.set(s,e)}let Jd={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Yd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||M_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function p0(s){Jd=s(Jd)}function m0(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Ud(this),e,...t);return M_.set(r,e.sort?e.sort():[e]),hi(r)}:h0().includes(s)?function(...e){return s.apply(Ud(this),e),hi(O_.get(this))}:function(...e){return hi(s.apply(Ud(this),e))}}function g0(s){return typeof s=="function"?m0(s):(s instanceof IDBTransaction&&f0(s),u0(s,c0())?new Proxy(s,Jd):s)}function hi(s){if(s instanceof IDBRequest)return d0(s);if(Fd.has(s))return Fd.get(s);const e=g0(s);return e!==s&&(Fd.set(s,e),Nf.set(e,s)),e}const Ud=s=>Nf.get(s);function y0(s,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(s,e),d=hi(c);return r&&c.addEventListener("upgradeneeded",p=>{r(hi(c.result),p.oldVersion,p.newVersion,hi(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),d}const _0=["get","getKey","getAll","getAllKeys","count"],v0=["put","add","delete","clear"],zd=new Map;function Ug(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=v0.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||_0.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let _=p.store;return r&&(_=_.index(d.shift())),(await Promise.all([_[t](...d),o&&p.done]))[0]};return zd.set(e,l),l}p0(s=>({...s,get:(e,t,r)=>Ug(e,t)||s.get(e,t,r),has:(e,t)=>!!Ug(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w0(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function w0(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zd="@firebase/app",zg="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new xf("@firebase/app"),I0="@firebase/app-compat",T0="@firebase/analytics-compat",S0="@firebase/analytics",A0="@firebase/app-check-compat",P0="@firebase/app-check",R0="@firebase/auth",C0="@firebase/auth-compat",k0="@firebase/database",x0="@firebase/data-connect",N0="@firebase/database-compat",V0="@firebase/functions",D0="@firebase/functions-compat",b0="@firebase/installations",O0="@firebase/installations-compat",M0="@firebase/messaging",L0="@firebase/messaging-compat",F0="@firebase/performance",U0="@firebase/performance-compat",z0="@firebase/remote-config",B0="@firebase/remote-config-compat",j0="@firebase/storage",$0="@firebase/storage-compat",K0="@firebase/firestore",q0="@firebase/ai",H0="@firebase/firestore-compat",G0="firebase",W0="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="[DEFAULT]",X0={[Zd]:"fire-core",[I0]:"fire-core-compat",[S0]:"fire-analytics",[T0]:"fire-analytics-compat",[P0]:"fire-app-check",[A0]:"fire-app-check-compat",[R0]:"fire-auth",[C0]:"fire-auth-compat",[k0]:"fire-rtdb",[x0]:"fire-data-connect",[N0]:"fire-rtdb-compat",[V0]:"fire-fn",[D0]:"fire-fn-compat",[b0]:"fire-iid",[O0]:"fire-iid-compat",[M0]:"fire-fcm",[L0]:"fire-fcm-compat",[F0]:"fire-perf",[U0]:"fire-perf-compat",[z0]:"fire-rc",[B0]:"fire-rc-compat",[j0]:"fire-gcs",[$0]:"fire-gcs-compat",[K0]:"fire-fst",[H0]:"fire-fst-compat",[q0]:"fire-vertex","fire-js":"fire-js",[G0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=new Map,Y0=new Map,tf=new Map;function Bg(s,e){try{s.container.addComponent(e)}catch(t){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function xo(s){const e=s.name;if(tf.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;tf.set(e,s);for(const t of ef.values())Bg(t,s);for(const t of Y0.values())Bg(t,s);return!0}function J0(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ts(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new wl("app","Firebase",Z0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=W0;function tT(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Q0,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw ls.create("bad-app-name",{appName:String(o)});if(t||(t=zI()),!t)throw ls.create("no-options");const l=ef.get(o);if(l){if(mc(t,l.options)&&mc(r,l.config))return l;throw ls.create("duplicate-app",{appName:o})}const c=new i0(o);for(const p of tf.values())c.addComponent(p);const d=new eT(t,r,c);return ef.set(o,d),d}function di(s,e,t){var r;let o=(r=X0[s])!==null&&r!==void 0?r:s;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(d.join(" "));return}xo(new ds(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="firebase-heartbeat-database",rT=1,al="firebase-heartbeat-store";let Bd=null;function L_(){return Bd||(Bd=y0(nT,rT,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(s=>{throw ls.create("idb-open",{originalErrorMessage:s.message})})),Bd}async function iT(s){try{const t=(await L_()).transaction(al),r=await t.objectStore(al).get(F_(s));return await t.done,r}catch(e){if(e instanceof Ei)xr.warn(e.message);else{const t=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(t.message)}}}async function jg(s,e){try{const r=(await L_()).transaction(al,"readwrite");await r.objectStore(al).put(e,F_(s)),await r.done}catch(t){if(t instanceof Ei)xr.warn(t.message);else{const r=ls.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xr.warn(r.message)}}}function F_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=1024,oT=30;class aT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$g();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>oT){const c=cT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$g(),{heartbeatsToSend:r,unsentEntries:o}=lT(this._heartbeatsCache.heartbeats),l=R_(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xr.warn(t),""}}}function $g(){return new Date().toISOString().substring(0,10)}function lT(s,e=sT){const t=[];let r=s.slice();for(const o of s){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Kg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Kg(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class uT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D_()?WI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await iT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return jg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return jg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Kg(s){return R_(JSON.stringify({version:2,heartbeats:s})).length}function cT(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(s){xo(new ds("platform-logger",e=>new E0(e),"PRIVATE")),xo(new ds("heartbeat",e=>new aT(e),"PRIVATE")),di(Zd,zg,s),di(Zd,zg,"esm2017"),di("fire-js","")}hT("");var dT="firebase",fT="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(dT,fT,"app");var qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fi,U_;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function P(){}P.prototype=T.prototype,C.D=T.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(k,V,b){for(var A=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)A[tt-2]=arguments[tt];return T.prototype[V].apply(k,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,T,P){P||(P=0);var k=Array(16);if(typeof T=="string")for(var V=0;16>V;++V)k[V]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(V=0;16>V;++V)k[V]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=C.g[0],P=C.g[1],V=C.g[2];var b=C.g[3],A=T+(b^P&(V^b))+k[0]+3614090360&4294967295;T=P+(A<<7&4294967295|A>>>25),A=b+(V^T&(P^V))+k[1]+3905402710&4294967295,b=T+(A<<12&4294967295|A>>>20),A=V+(P^b&(T^P))+k[2]+606105819&4294967295,V=b+(A<<17&4294967295|A>>>15),A=P+(T^V&(b^T))+k[3]+3250441966&4294967295,P=V+(A<<22&4294967295|A>>>10),A=T+(b^P&(V^b))+k[4]+4118548399&4294967295,T=P+(A<<7&4294967295|A>>>25),A=b+(V^T&(P^V))+k[5]+1200080426&4294967295,b=T+(A<<12&4294967295|A>>>20),A=V+(P^b&(T^P))+k[6]+2821735955&4294967295,V=b+(A<<17&4294967295|A>>>15),A=P+(T^V&(b^T))+k[7]+4249261313&4294967295,P=V+(A<<22&4294967295|A>>>10),A=T+(b^P&(V^b))+k[8]+1770035416&4294967295,T=P+(A<<7&4294967295|A>>>25),A=b+(V^T&(P^V))+k[9]+2336552879&4294967295,b=T+(A<<12&4294967295|A>>>20),A=V+(P^b&(T^P))+k[10]+4294925233&4294967295,V=b+(A<<17&4294967295|A>>>15),A=P+(T^V&(b^T))+k[11]+2304563134&4294967295,P=V+(A<<22&4294967295|A>>>10),A=T+(b^P&(V^b))+k[12]+1804603682&4294967295,T=P+(A<<7&4294967295|A>>>25),A=b+(V^T&(P^V))+k[13]+4254626195&4294967295,b=T+(A<<12&4294967295|A>>>20),A=V+(P^b&(T^P))+k[14]+2792965006&4294967295,V=b+(A<<17&4294967295|A>>>15),A=P+(T^V&(b^T))+k[15]+1236535329&4294967295,P=V+(A<<22&4294967295|A>>>10),A=T+(V^b&(P^V))+k[1]+4129170786&4294967295,T=P+(A<<5&4294967295|A>>>27),A=b+(P^V&(T^P))+k[6]+3225465664&4294967295,b=T+(A<<9&4294967295|A>>>23),A=V+(T^P&(b^T))+k[11]+643717713&4294967295,V=b+(A<<14&4294967295|A>>>18),A=P+(b^T&(V^b))+k[0]+3921069994&4294967295,P=V+(A<<20&4294967295|A>>>12),A=T+(V^b&(P^V))+k[5]+3593408605&4294967295,T=P+(A<<5&4294967295|A>>>27),A=b+(P^V&(T^P))+k[10]+38016083&4294967295,b=T+(A<<9&4294967295|A>>>23),A=V+(T^P&(b^T))+k[15]+3634488961&4294967295,V=b+(A<<14&4294967295|A>>>18),A=P+(b^T&(V^b))+k[4]+3889429448&4294967295,P=V+(A<<20&4294967295|A>>>12),A=T+(V^b&(P^V))+k[9]+568446438&4294967295,T=P+(A<<5&4294967295|A>>>27),A=b+(P^V&(T^P))+k[14]+3275163606&4294967295,b=T+(A<<9&4294967295|A>>>23),A=V+(T^P&(b^T))+k[3]+4107603335&4294967295,V=b+(A<<14&4294967295|A>>>18),A=P+(b^T&(V^b))+k[8]+1163531501&4294967295,P=V+(A<<20&4294967295|A>>>12),A=T+(V^b&(P^V))+k[13]+2850285829&4294967295,T=P+(A<<5&4294967295|A>>>27),A=b+(P^V&(T^P))+k[2]+4243563512&4294967295,b=T+(A<<9&4294967295|A>>>23),A=V+(T^P&(b^T))+k[7]+1735328473&4294967295,V=b+(A<<14&4294967295|A>>>18),A=P+(b^T&(V^b))+k[12]+2368359562&4294967295,P=V+(A<<20&4294967295|A>>>12),A=T+(P^V^b)+k[5]+4294588738&4294967295,T=P+(A<<4&4294967295|A>>>28),A=b+(T^P^V)+k[8]+2272392833&4294967295,b=T+(A<<11&4294967295|A>>>21),A=V+(b^T^P)+k[11]+1839030562&4294967295,V=b+(A<<16&4294967295|A>>>16),A=P+(V^b^T)+k[14]+4259657740&4294967295,P=V+(A<<23&4294967295|A>>>9),A=T+(P^V^b)+k[1]+2763975236&4294967295,T=P+(A<<4&4294967295|A>>>28),A=b+(T^P^V)+k[4]+1272893353&4294967295,b=T+(A<<11&4294967295|A>>>21),A=V+(b^T^P)+k[7]+4139469664&4294967295,V=b+(A<<16&4294967295|A>>>16),A=P+(V^b^T)+k[10]+3200236656&4294967295,P=V+(A<<23&4294967295|A>>>9),A=T+(P^V^b)+k[13]+681279174&4294967295,T=P+(A<<4&4294967295|A>>>28),A=b+(T^P^V)+k[0]+3936430074&4294967295,b=T+(A<<11&4294967295|A>>>21),A=V+(b^T^P)+k[3]+3572445317&4294967295,V=b+(A<<16&4294967295|A>>>16),A=P+(V^b^T)+k[6]+76029189&4294967295,P=V+(A<<23&4294967295|A>>>9),A=T+(P^V^b)+k[9]+3654602809&4294967295,T=P+(A<<4&4294967295|A>>>28),A=b+(T^P^V)+k[12]+3873151461&4294967295,b=T+(A<<11&4294967295|A>>>21),A=V+(b^T^P)+k[15]+530742520&4294967295,V=b+(A<<16&4294967295|A>>>16),A=P+(V^b^T)+k[2]+3299628645&4294967295,P=V+(A<<23&4294967295|A>>>9),A=T+(V^(P|~b))+k[0]+4096336452&4294967295,T=P+(A<<6&4294967295|A>>>26),A=b+(P^(T|~V))+k[7]+1126891415&4294967295,b=T+(A<<10&4294967295|A>>>22),A=V+(T^(b|~P))+k[14]+2878612391&4294967295,V=b+(A<<15&4294967295|A>>>17),A=P+(b^(V|~T))+k[5]+4237533241&4294967295,P=V+(A<<21&4294967295|A>>>11),A=T+(V^(P|~b))+k[12]+1700485571&4294967295,T=P+(A<<6&4294967295|A>>>26),A=b+(P^(T|~V))+k[3]+2399980690&4294967295,b=T+(A<<10&4294967295|A>>>22),A=V+(T^(b|~P))+k[10]+4293915773&4294967295,V=b+(A<<15&4294967295|A>>>17),A=P+(b^(V|~T))+k[1]+2240044497&4294967295,P=V+(A<<21&4294967295|A>>>11),A=T+(V^(P|~b))+k[8]+1873313359&4294967295,T=P+(A<<6&4294967295|A>>>26),A=b+(P^(T|~V))+k[15]+4264355552&4294967295,b=T+(A<<10&4294967295|A>>>22),A=V+(T^(b|~P))+k[6]+2734768916&4294967295,V=b+(A<<15&4294967295|A>>>17),A=P+(b^(V|~T))+k[13]+1309151649&4294967295,P=V+(A<<21&4294967295|A>>>11),A=T+(V^(P|~b))+k[4]+4149444226&4294967295,T=P+(A<<6&4294967295|A>>>26),A=b+(P^(T|~V))+k[11]+3174756917&4294967295,b=T+(A<<10&4294967295|A>>>22),A=V+(T^(b|~P))+k[2]+718787259&4294967295,V=b+(A<<15&4294967295|A>>>17),A=P+(b^(V|~T))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+b&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var P=T-this.blockSize,k=this.B,V=this.h,b=0;b<T;){if(V==0)for(;b<=P;)o(this,C,b),b+=this.blockSize;if(typeof C=="string"){for(;b<T;)if(k[V++]=C.charCodeAt(b++),V==this.blockSize){o(this,k),V=0;break}}else for(;b<T;)if(k[V++]=C[b++],V==this.blockSize){o(this,k),V=0;break}}this.h=V,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var P=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=P&255,P/=256;for(this.u(C),C=Array(16),T=P=0;4>T;++T)for(var k=0;32>k;k+=8)C[P++]=this.g[T]>>>k&255;return C};function l(C,T){var P=d;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=T(C)}function c(C,T){this.h=T;for(var P=[],k=!0,V=C.length-1;0<=V;V--){var b=C[V]|0;k&&b==T||(P[V]=b,k=!1)}this.g=P}var d={};function p(C){return-128<=C&&128>C?l(C,function(T){return new c([T|0],0>T?-1:0)}):new c([C|0],0>C?-1:0)}function _(C){if(isNaN(C)||!isFinite(C))return I;if(0>C)return K(_(-C));for(var T=[],P=1,k=0;C>=P;k++)T[k]=C/P|0,P*=4294967296;return new c(T,0)}function w(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return K(w(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=_(Math.pow(T,8)),k=I,V=0;V<C.length;V+=8){var b=Math.min(8,C.length-V),A=parseInt(C.substring(V,V+b),T);8>b?(b=_(Math.pow(T,b)),k=k.j(b).add(_(A))):(k=k.j(P),k=k.add(_(A)))}return k}var I=p(0),N=p(1),B=p(16777216);s=c.prototype,s.m=function(){if(G(this))return-K(this).m();for(var C=0,T=1,P=0;P<this.g.length;P++){var k=this.i(P);C+=(0<=k?k:4294967296+k)*T,T*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(Q(this))return"0";if(G(this))return"-"+K(this).toString(C);for(var T=_(Math.pow(C,6)),P=this,k="";;){var V=_e(P,T).g;P=we(P,V.j(T));var b=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=V,Q(P))return b+k;for(;6>b.length;)b="0"+b;k=b+k}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function Q(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function G(C){return C.h==-1}s.l=function(C){return C=we(this,C),G(C)?-1:Q(C)?0:1};function K(C){for(var T=C.g.length,P=[],k=0;k<T;k++)P[k]=~C.g[k];return new c(P,~C.h).add(N)}s.abs=function(){return G(this)?K(this):this},s.add=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],k=0,V=0;V<=T;V++){var b=k+(this.i(V)&65535)+(C.i(V)&65535),A=(b>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);k=A>>>16,b&=65535,A&=65535,P[V]=A<<16|b}return new c(P,P[P.length-1]&-2147483648?-1:0)};function we(C,T){return C.add(K(T))}s.j=function(C){if(Q(this)||Q(C))return I;if(G(this))return G(C)?K(this).j(K(C)):K(K(this).j(C));if(G(C))return K(this.j(K(C)));if(0>this.l(B)&&0>C.l(B))return _(this.m()*C.m());for(var T=this.g.length+C.g.length,P=[],k=0;k<2*T;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var V=0;V<C.g.length;V++){var b=this.i(k)>>>16,A=this.i(k)&65535,tt=C.i(V)>>>16,wt=C.i(V)&65535;P[2*k+2*V]+=A*wt,he(P,2*k+2*V),P[2*k+2*V+1]+=b*wt,he(P,2*k+2*V+1),P[2*k+2*V+1]+=A*tt,he(P,2*k+2*V+1),P[2*k+2*V+2]+=b*tt,he(P,2*k+2*V+2)}for(k=0;k<T;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=T;k<2*T;k++)P[k]=0;return new c(P,0)};function he(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function se(C,T){this.g=C,this.h=T}function _e(C,T){if(Q(T))throw Error("division by zero");if(Q(C))return new se(I,I);if(G(C))return T=_e(K(C),T),new se(K(T.g),K(T.h));if(G(T))return T=_e(C,K(T)),new se(K(T.g),T.h);if(30<C.g.length){if(G(C)||G(T))throw Error("slowDivide_ only works with positive integers.");for(var P=N,k=T;0>=k.l(C);)P=Ae(P),k=Ae(k);var V=me(P,1),b=me(k,1);for(k=me(k,2),P=me(P,2);!Q(k);){var A=b.add(k);0>=A.l(C)&&(V=V.add(P),b=A),k=me(k,1),P=me(P,1)}return T=we(C,V.j(T)),new se(V,T)}for(V=I;0<=C.l(T);){for(P=Math.max(1,Math.floor(C.m()/T.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),b=_(P),A=b.j(T);G(A)||0<A.l(C);)P-=k,b=_(P),A=b.j(T);Q(b)&&(b=N),V=V.add(b),C=we(C,A)}return new se(V,C)}s.A=function(C){return _e(this,C).h},s.and=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],k=0;k<T;k++)P[k]=this.i(k)&C.i(k);return new c(P,this.h&C.h)},s.or=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],k=0;k<T;k++)P[k]=this.i(k)|C.i(k);return new c(P,this.h|C.h)},s.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],k=0;k<T;k++)P[k]=this.i(k)^C.i(k);return new c(P,this.h^C.h)};function Ae(C){for(var T=C.g.length+1,P=[],k=0;k<T;k++)P[k]=C.i(k)<<1|C.i(k-1)>>>31;return new c(P,C.h)}function me(C,T){var P=T>>5;T%=32;for(var k=C.g.length-P,V=[],b=0;b<k;b++)V[b]=0<T?C.i(b+P)>>>T|C.i(b+P+1)<<32-T:C.i(b+P);return new c(V,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=_,c.fromString=w,fi=c}).apply(typeof qg<"u"?qg:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z_,Ga,B_,tc,nf,j_,$_,K_;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function o(u,m){if(m)e:{var y=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var O=u[E];if(!(O in y))break e;y=y[O]}u=u[u.length-1],E=y[u],m=m(E),m!=E&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var y=0,E=!1,O={next:function(){if(!E&&y<u.length){var z=y++;return{value:m(z,u[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function w(u,m,y){return u.call.apply(u.bind,arguments)}function I(u,m,y){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),u.apply(m,O)}}return function(){return u.apply(m,arguments)}}function N(u,m,y){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:I,N.apply(null,arguments)}function B(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function Q(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(E,O,z){for(var ne=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ne[Be-2]=arguments[Be];return m.prototype[O].apply(E,ne)}}function G(u){const m=u.length;if(0<m){const y=Array(m);for(let E=0;E<m;E++)y[E]=u[E];return y}return[]}function K(u,m){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(p(E)){const O=u.length||0,z=E.length||0;u.length=O+z;for(let ne=0;ne<z;ne++)u[O+ne]=E[ne]}else u.push(E)}}class we{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function he(u){return/^[\s\xa0]*$/.test(u)}function se(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function _e(u){return _e[" "](u),u}_e[" "]=function(){};var Ae=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function me(u,m,y){for(const E in u)m.call(y,u[E],E,u)}function C(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function T(u){const m={};for(const y in u)m[y]=u[y];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let y,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(y in E)u[y]=E[y];for(let z=0;z<P.length;z++)y=P[z],Object.prototype.hasOwnProperty.call(E,y)&&(u[y]=E[y])}}function V(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function b(u){d.setTimeout(()=>{throw u},0)}function A(){var u=re;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class tt{constructor(){this.h=this.g=null}add(m,y){const E=wt.get();E.set(m,y),this.h?this.h.next=E:this.g=E,this.h=E}}var wt=new we(()=>new It,u=>u.reset());class It{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,j=!1,re=new tt,te=()=>{const u=d.Promise.resolve(void 0);Z=()=>{u.then(D)}};var D=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(y){b(y)}var m=wt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}j=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};d.addEventListener("test",y,m),d.removeEventListener("test",y,m)}catch{}return u}();function Ce(u,m){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Ae){e:{try{_e(m.nodeName);var O=!0;break e}catch{}O=!1}O||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}Q(Ce,ge);var De={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function He(u,m,y,E,O){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!E,this.ha=O,this.key=++Ue,this.da=this.fa=!1}function Tt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ur(u){this.src=u,this.g={},this.h=0}ur.prototype.add=function(u,m,y,E,O){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var ne=br(u,m,E,O);return-1<ne?(m=u[ne],y||(m.fa=!1)):(m=new He(m,this.src,z,!!E,O),m.fa=y,u.push(m)),m};function Ts(u,m){var y=m.type;if(y in u.g){var E=u.g[y],O=Array.prototype.indexOf.call(E,m,void 0),z;(z=0<=O)&&Array.prototype.splice.call(E,O,1),z&&(Tt(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function br(u,m,y,E){for(var O=0;O<u.length;++O){var z=u[O];if(!z.da&&z.listener==m&&z.capture==!!y&&z.ha==E)return O}return-1}var Ti="closure_lm_"+(1e6*Math.random()|0),Ss={};function Wo(u,m,y,E,O){if(Array.isArray(m)){for(var z=0;z<m.length;z++)Wo(u,m[z],y,E,O);return null}return y=Yo(y),u&&u[Fe]?u.K(m,y,_(E)?!!E.capture:!1,O):Qo(u,m,y,!1,E,O)}function Qo(u,m,y,E,O,z){if(!m)throw Error("Invalid event type");var ne=_(O)?!!O.capture:!!O,Be=Ps(u);if(Be||(u[Ti]=Be=new ur(u)),y=Be.add(m,y,E,ne,z),y.proxy)return y;if(E=xl(),y.proxy=E,E.src=u,E.listener=y,u.addEventListener)Pe||(O=ne),O===void 0&&(O=!1),u.addEventListener(m.toString(),E,O);else if(u.attachEvent)u.attachEvent(hr(m.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function xl(){function u(y){return m.call(u.src,u.listener,y)}const m=Xo;return u}function As(u,m,y,E,O){if(Array.isArray(m))for(var z=0;z<m.length;z++)As(u,m[z],y,E,O);else E=_(E)?!!E.capture:!!E,y=Yo(y),u&&u[Fe]?(u=u.i,m=String(m).toString(),m in u.g&&(z=u.g[m],y=br(z,y,E,O),-1<y&&(Tt(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ps(u))&&(m=u.g[m.toString()],u=-1,m&&(u=br(m,y,E,O)),(y=-1<u?m[u]:null)&&cr(y))}function cr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Fe])Ts(m.i,u);else{var y=u.type,E=u.proxy;m.removeEventListener?m.removeEventListener(y,E,u.capture):m.detachEvent?m.detachEvent(hr(y),E):m.addListener&&m.removeListener&&m.removeListener(E),(y=Ps(m))?(Ts(y,u),y.h==0&&(y.src=null,m[Ti]=null)):Tt(u)}}}function hr(u){return u in Ss?Ss[u]:Ss[u]="on"+u}function Xo(u,m){if(u.da)u=!0;else{m=new Ce(m,this);var y=u.listener,E=u.ha||u.src;u.fa&&cr(u),u=y.call(E,m)}return u}function Ps(u){return u=u[Ti],u instanceof ur?u:null}var Rs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yo(u){return typeof u=="function"?u:(u[Rs]||(u[Rs]=function(m){return u.handleEvent(m)}),u[Rs])}function mt(){q.call(this),this.i=new ur(this),this.M=this,this.F=null}Q(mt,q),mt.prototype[Fe]=!0,mt.prototype.removeEventListener=function(u,m,y,E){As(this,u,m,y,E)};function gt(u,m){var y,E=u.F;if(E)for(y=[];E;E=E.F)y.push(E);if(u=u.M,E=m.type||m,typeof m=="string")m=new ge(m,u);else if(m instanceof ge)m.target=m.target||u;else{var O=m;m=new ge(E,u),k(m,O)}if(O=!0,y)for(var z=y.length-1;0<=z;z--){var ne=m.g=y[z];O=dr(ne,E,!0,m)&&O}if(ne=m.g=u,O=dr(ne,E,!0,m)&&O,O=dr(ne,E,!1,m)&&O,y)for(z=0;z<y.length;z++)ne=m.g=y[z],O=dr(ne,E,!1,m)&&O}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],E=0;E<y.length;E++)Tt(y[E]);delete u.g[m],u.h--}}this.F=null},mt.prototype.K=function(u,m,y,E){return this.i.add(String(u),m,!1,y,E)},mt.prototype.L=function(u,m,y,E){return this.i.add(String(u),m,!0,y,E)};function dr(u,m,y,E){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var O=!0,z=0;z<m.length;++z){var ne=m[z];if(ne&&!ne.da&&ne.capture==y){var Be=ne.listener,yt=ne.ha||ne.src;ne.fa&&Ts(u.i,ne),O=Be.call(yt,E)!==!1&&O}}return O&&!E.defaultPrevented}function Jo(u,m,y){if(typeof u=="function")y&&(u=N(u,y));else if(u&&typeof u.handleEvent=="function")u=N(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Or(u){u.g=Jo(()=>{u.g=null,u.i&&(u.i=!1,Or(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Si extends q{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(u){q.call(this),this.h=u,this.g={}}Q(Ai,q);var Zo=[];function ea(u){me(u.g,function(m,y){this.g.hasOwnProperty(y)&&cr(m)},u),u.g={}}Ai.prototype.N=function(){Ai.aa.N.call(this),ea(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ta=d.JSON.stringify,na=d.JSON.parse,ra=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Pi(){}Pi.prototype.h=null;function Cs(u){return u.h||(u.h=u.i())}function ks(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){ge.call(this,"d")}Q(Gn,ge);function xs(){ge.call(this,"c")}Q(xs,ge);var Wn={},ia=null;function Ri(){return ia=ia||new mt}Wn.La="serverreachability";function sa(u){ge.call(this,Wn.La,u)}Q(sa,ge);function fr(u){const m=Ri();gt(m,new sa(m))}Wn.STAT_EVENT="statevent";function oa(u,m){ge.call(this,Wn.STAT_EVENT,u),this.stat=m}Q(oa,ge);function lt(u){const m=Ri();gt(m,new oa(m,u))}Wn.Ma="timingevent";function Ns(u,m){ge.call(this,Wn.Ma,u),this.size=m}Q(Ns,ge);function kn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Ci(){this.g=!0}Ci.prototype.xa=function(){this.g=!1};function ki(u,m,y,E,O,z){u.info(function(){if(u.g)if(z)for(var ne="",Be=z.split("&"),yt=0;yt<Be.length;yt++){var be=Be[yt].split("=");if(1<be.length){var St=be[0];be=be[1];var ct=St.split("_");ne=2<=ct.length&&ct[1]=="type"?ne+(St+"="+be+"&"):ne+(St+"=redacted&")}}else ne=null;else ne=z;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+m+`
`+y+`
`+ne})}function Vs(u,m,y,E,O,z,ne){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+m+`
`+y+`
`+z+" "+ne})}function xn(u,m,y,E){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ah(u,y)+(E?" "+E:"")})}function aa(u,m){u.info(function(){return"TIMEOUT: "+m})}Ci.prototype.info=function(){};function ah(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var E=y[u];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ne=1;ne<O.length;ne++)O[ne]=""}}}}return ta(y)}catch{return m}}var Ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function xi(){}Q(xi,Pi),xi.prototype.g=function(){return new XMLHttpRequest},xi.prototype.i=function(){return{}},Nn=new xi;function Vn(u,m,y,E){this.j=u,this.i=m,this.l=y,this.R=E||1,this.U=new Ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vl}function Vl(){this.i=null,this.g="",this.h=!1}var la={},bs={};function Os(u,m,y){u.L=1,u.v=zr(an(m)),u.m=y,u.P=!0,ua(u,null)}function ua(u,m){u.F=Date.now(),Ge(u),u.A=an(u.v);var y=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),jr(y.i,"t",E),u.C=0,y=u.j.J,u.h=new Vl,u.g=Xl(u.j,y?m:null,!u.m),0<u.O&&(u.M=new Si(N(u.Y,u,u.g),u.O)),m=u.U,y=u.g,E=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Zo[0]=O.toString()),O=Zo);for(var z=0;z<O.length;z++){var ne=Wo(y,O[z],E||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),fr(),ki(u.i,u.u,u.A,u.l,u.R,u.m)}Vn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Qt(u)==3?m.j():this.Y(u)},Vn.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Qt(this.g);var m=this.g.Ba();const vn=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||ma(this.g)))){this.J||ct!=4||m==7||(m==8||0>=vn?fr(3):fr(2)),Ni(this);var y=this.g.Z();this.X=y;t:if(Dl(this)){var E=ma(this.g);u="";var O=E.length,z=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Mr(this);var ne="";break t}this.h.i=new d.TextDecoder}for(m=0;m<O;m++)this.h.h=!0,u+=this.h.i.decode(E[m],{stream:!(z&&m==O-1)});E.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=y==200,Vs(this.i,this.u,this.A,this.l,this.R,ct,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,yt=this.g;if((Be=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!he(Be)){var be=Be;break t}}be=null}if(y=be)xn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ca(this,y);else{this.o=!1,this.s=3,lt(12),yn(this),Mr(this);break e}}if(this.P){y=!0;let un;for(;!this.J&&this.C<ne.length;)if(un=lh(this,ne),un==bs){ct==4&&(this.s=4,lt(14),y=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(un==la){this.s=4,lt(15),xn(this.i,this.l,ne,"[Invalid Chunk]"),y=!1;break}else xn(this.i,this.l,un,null),ca(this,un);if(Dl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||ne.length!=0||this.h.h||(this.s=1,lt(16),y=!1),this.o=this.o&&y,!y)xn(this.i,this.l,ne,"[Invalid Chunked Response]"),yn(this),Mr(this);else if(0<ne.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),ya(St),St.M=!0,lt(11))}}else xn(this.i,this.l,ne,null),ca(this,ne);ct==4&&yn(this),this.o&&!this.J&&(ct==4?Hs(this.j,this):(this.o=!1,Ge(this)))}else Bs(this.g),y==400&&0<ne.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),yn(this),Mr(this)}}}catch{}finally{}};function Dl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function lh(u,m){var y=u.C,E=m.indexOf(`
`,y);return E==-1?bs:(y=Number(m.substring(y,E)),isNaN(y)?la:(E+=1,E+y>m.length?bs:(m=m.slice(E,E+y),u.C=E+y,m)))}Vn.prototype.cancel=function(){this.J=!0,yn(this)};function Ge(u){u.S=Date.now()+u.I,bl(u,u.I)}function bl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kn(N(u.ba,u),m)}function Ni(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Vn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(aa(this.i,this.A),this.L!=2&&(fr(),lt(17)),yn(this),this.s=2,Mr(this)):bl(this,this.S-u)};function Mr(u){u.j.G==0||u.J||Hs(u.j,u)}function yn(u){Ni(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ea(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ca(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||Bt(y.h,u))){if(!u.K&&Bt(y.h,u)&&y.G==3){try{var E=y.Da.g.parse(m)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)qs(y),Ln(y);else break e;Ks(y),lt(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=kn(N(y.Za,y),6e3));if(1>=Ml(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else _r(y,11)}else if((u.K||y.g==u)&&qs(y),!he(m))for(O=y.Da.g.parse(m),m=0;m<O.length;m++){let be=O[m];if(y.T=be[0],be=be[1],y.G==2)if(be[0]=="c"){y.K=be[1],y.ia=be[2];const St=be[3];St!=null&&(y.la=St,y.j.info("VER="+y.la));const ct=be[4];ct!=null&&(y.Aa=ct,y.j.info("SVER="+y.Aa));const vn=be[5];vn!=null&&typeof vn=="number"&&0<vn&&(E=1.5*vn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const un=u.g;if(un){const Fi=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var z=E.h;z.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ha(z,z.h),z.h=null))}if(E.D){const Ws=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Ws&&(E.ya=Ws,qe(E.I,E.D,Ws))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var ne=u;if(E.qa=Ql(E,E.J?E.ia:null,E.W),ne.K){Ll(E.h,ne);var Be=ne,yt=E.L;yt&&(Be.I=yt),Be.B&&(Ni(Be),Ge(Be)),E.g=ne}else Li(E);0<y.i.length&&Jn(y)}else be[0]!="stop"&&be[0]!="close"||_r(y,7);else y.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?_r(y,7):xt(y):be[0]!="noop"&&y.l&&y.l.ta(be),y.v=0)}}fr(4)}catch{}}var Ol=class{constructor(u,m){this.g=u,this.map=m}};function Vi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ml(u){return u.h?1:u.g?u.g.size:0}function Bt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ha(u,m){u.g?u.g.add(m):u.h=m}function Ll(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Vi.prototype.cancel=function(){if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Fl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return G(u.i)}function Ms(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],y=u.length,E=0;E<y;E++)m.push(u[E]);return m}m=[],y=0;for(E in u)m[y++]=u[E];return m}function Ls(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const E in u)m[y++]=E;return m}}}function Lr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Ls(u),E=Ms(u),O=E.length,z=0;z<O;z++)m.call(void 0,E[z],y&&y[z],u)}var Di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uh(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var E=u[y].indexOf("="),O=null;if(0<=E){var z=u[y].substring(0,E);O=u[y].substring(E+1)}else z=u[y];m(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function pr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pr){this.h=u.h,bi(this,u.j),this.o=u.o,this.g=u.g,Fr(this,u.s),this.l=u.l;var m=u.i,y=new Qn;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Ur(this,y),this.m=u.m}else u&&(m=String(u).match(Di))?(this.h=!1,bi(this,m[1]||"",!0),this.o=Ne(m[2]||""),this.g=Ne(m[3]||"",!0),Fr(this,m[4]),this.l=Ne(m[5]||"",!0),Ur(this,m[6]||"",!0),this.m=Ne(m[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}pr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Br(m,Fs,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Br(m,Fs,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Br(y,y.charAt(0)=="/"?Bl:zl,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Br(y,da)),u.join("")};function an(u){return new pr(u)}function bi(u,m,y){u.j=y?Ne(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Fr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ur(u,m,y){m instanceof Qn?(u.i=m,Xn(u.i,u.h)):(y||(m=Br(m,jl)),u.i=new Qn(m,u.h))}function qe(u,m,y){u.i.set(m,y)}function zr(u){return qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ne(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Br(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Ul),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ul(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fs=/[#\/\?@]/g,zl=/[#\?:]/g,Bl=/[#\?]/g,jl=/[#\?@]/g,da=/#/g;function Qn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function kt(u){u.g||(u.g=new Map,u.h=0,u.i&&uh(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}s=Qn.prototype,s.add=function(u,m){kt(this),this.i=null,u=_n(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Dn(u,m){kt(u),m=_n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function bn(u,m){return kt(u),m=_n(u,m),u.g.has(m)}s.forEach=function(u,m){kt(this),this.g.forEach(function(y,E){y.forEach(function(O){u.call(m,O,E,this)},this)},this)},s.na=function(){kt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let E=0;E<m.length;E++){const O=u[E];for(let z=0;z<O.length;z++)y.push(m[E])}return y},s.V=function(u){kt(this);let m=[];if(typeof u=="string")bn(this,u)&&(m=m.concat(this.g.get(_n(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},s.set=function(u,m){return kt(this),this.i=null,u=_n(this,u),bn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function jr(u,m,y){Dn(u,m),0<y.length&&(u.i=null,u.g.set(_n(u,m),G(y)),u.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var E=m[y];const z=encodeURIComponent(String(E)),ne=this.V(E);for(E=0;E<ne.length;E++){var O=z;ne[E]!==""&&(O+="="+encodeURIComponent(String(ne[E]))),u.push(O)}}return this.i=u.join("&")};function _n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Xn(u,m){m&&!u.j&&(kt(u),u.i=null,u.g.forEach(function(y,E){var O=E.toLowerCase();E!=O&&(Dn(this,E),jr(this,O,y))},u)),u.j=m}function ch(u,m){const y=new Ci;if(d.Image){const E=new Image;E.onload=B(Wt,y,"TestLoadImage: loaded",!0,m,E),E.onerror=B(Wt,y,"TestLoadImage: error",!1,m,E),E.onabort=B(Wt,y,"TestLoadImage: abort",!1,m,E),E.ontimeout=B(Wt,y,"TestLoadImage: timeout",!1,m,E),d.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else m(!1)}function $l(u,m){const y=new Ci,E=new AbortController,O=setTimeout(()=>{E.abort(),Wt(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:E.signal}).then(z=>{clearTimeout(O),z.ok?Wt(y,"TestPingServer: ok",!0,m):Wt(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(O),Wt(y,"TestPingServer: error",!1,m)})}function Wt(u,m,y,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(y)}catch{}}function hh(){this.g=new ra}function Kl(u,m,y){const E=y||"";try{Lr(u,function(O,z){let ne=O;_(O)&&(ne=ta(O)),m.push(E+z+"="+encodeURIComponent(ne))})}catch(O){throw m.push(E+"type="+encodeURIComponent("_badmap")),O}}function mr(u){this.l=u.Ub||null,this.j=u.eb||!1}Q(mr,Pi),mr.prototype.g=function(){return new Oi(this.l,this.j)},mr.prototype.i=function(u){return function(){return u}}({});function Oi(u,m){mt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(Oi,mt),s=Oi.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Mn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ql(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ql(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?On(this):Mn(this),this.readyState==3&&ql(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,On(this))},s.Qa=function(u){this.g&&(this.response=u,On(this))},s.ga=function(){this.g&&On(this)};function On(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mn(u)}s.setRequestHeader=function(u,m){this.u.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gr(u){let m="";return me(u,function(y,E){m+=E,m+=":",m+=y,m+=`\r
`}),m}function $r(u,m,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=gr(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):qe(u,m,y))}function Ye(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(Ye,mt);var dh=/^https?$/i,fa=["POST","PUT"];s=Ye.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,m,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?Cs(this.o):Cs(Nn),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){Mi(this,z);return}if(u=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)y.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const z of E.keys())y.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),O=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(fa,m,void 0))||E||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ne]of y)this.g.setRequestHeader(z,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zs(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){Mi(this,z)}};function Mi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Us(u),ln(u)}function Us(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),ln(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),Ye.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},s.bb=function(){pa(this)};function pa(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Qt(u)!=4||u.Z()!=2)){if(u.u&&Qt(u)==4)Jo(u.Ea,0,u);else if(gt(u,"readystatechange"),Qt(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var E;if(E=ne===0){var O=String(u.D).match(Di)[1]||null;!O&&d.self&&d.self.location&&(O=d.self.location.protocol.slice(0,-1)),E=!dh.test(O?O.toLowerCase():"")}y=E}if(y)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var z=2<Qt(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",Us(u)}}finally{ln(u)}}}}function ln(u,m){if(u.g){zs(u);const y=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||gt(u,"ready");try{y.onreadystatechange=E}catch{}}}function zs(u){u.I&&(d.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Qt(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),na(m)}};function ma(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Bs(u){const m={};u=(u.g&&2<=Qt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(he(u[E]))continue;var y=V(u[E]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=m[O]||[];m[O]=z,z.push(y)}C(m,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function ga(u){this.Aa=0,this.i=[],this.j=new Ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,u),this.cb=Yn("retryDelaySeedMs",1e4,u),this.Wa=Yn("forwardChannelMaxRetries",2,u),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Vi(u&&u.concurrentRequestLimit),this.Da=new hh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ga.prototype,s.la=8,s.G=1,s.connect=function(u,m,y,E){lt(0),this.W=u,this.H=m||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Ql(this,null,this.W),Jn(this)};function xt(u){if(js(u),u.G==3){var m=u.U++,y=an(u.I);if(qe(y,"SID",u.K),qe(y,"RID",m),qe(y,"TYPE","terminate"),yr(u,y),m=new Vn(u,u.j,m),m.L=2,m.v=zr(an(y)),y=!1,d.navigator&&d.navigator.sendBeacon)try{y=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&d.Image&&(new Image().src=m.v,y=!0),y||(m.g=Xl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ge(m)}Wl(u)}function Ln(u){u.g&&(ya(u),u.g.cancel(),u.g=null)}function js(u){Ln(u),u.u&&(d.clearTimeout(u.u),u.u=null),qs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Jn(u){if(!on(u.h)&&!u.s){u.s=!0;var m=u.Ga;Z||te(),j||(Z(),j=!0),re.add(m,u),u.B=0}}function fh(u,m){return Ml(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kn(N(u.Ga,u,m),Gl(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Vn(this,this.j,u);let z=this.o;if(this.S&&(z?(z=T(z),k(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(m+=E,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Kr(this,O,m),y=an(this.I),qe(y,"RID",u),qe(y,"CVER",22),this.D&&qe(y,"X-HTTP-Session-Id",this.D),yr(this,y),z&&(this.O?m="headers="+encodeURIComponent(String(gr(z)))+"&"+m:this.m&&$r(y,this.m,z)),ha(this.h,O),this.Ua&&qe(y,"TYPE","init"),this.P?(qe(y,"$req",m),qe(y,"SID","null"),O.T=!0,Os(O,y,null)):Os(O,y,m),this.G=2}}else this.G==3&&(u?$s(this,u):this.i.length==0||on(this.h)||$s(this))};function $s(u,m){var y;m?y=m.l:y=u.U++;const E=an(u.I);qe(E,"SID",u.K),qe(E,"RID",y),qe(E,"AID",u.T),yr(u,E),u.m&&u.o&&$r(E,u.m,u.o),y=new Vn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Kr(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ha(u.h,y),Os(y,E,m)}function yr(u,m){u.H&&me(u.H,function(y,E){qe(m,E,y)}),u.l&&Lr({},function(y,E){qe(m,E,y)})}function Kr(u,m,y){y=Math.min(u.i.length,y);var E=u.l?N(u.l.Na,u.l,u):null;e:{var O=u.i;let z=-1;for(;;){const ne=["count="+y];z==-1?0<y?(z=O[0].g,ne.push("ofs="+z)):z=0:ne.push("ofs="+z);let Be=!0;for(let yt=0;yt<y;yt++){let be=O[yt].g;const St=O[yt].map;if(be-=z,0>be)z=Math.max(0,O[yt].g-100),Be=!1;else try{Kl(St,ne,"req"+be+"_")}catch{E&&E(St)}}if(Be){E=ne.join("&");break e}}}return u=u.i.splice(0,y),m.D=u,E}function Li(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Z||te(),j||(Z(),j=!0),re.add(m,u),u.v=0}}function Ks(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kn(N(u.Fa,u),Gl(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kn(N(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Ln(this),Hl(this))};function ya(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Hl(u){u.g=new Vn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=an(u.qa);qe(m,"RID","rpc"),qe(m,"SID",u.K),qe(m,"AID",u.T),qe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&qe(m,"TO",u.ja),qe(m,"TYPE","xmlhttp"),yr(u,m),u.m&&u.o&&$r(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=zr(an(m)),y.m=null,y.P=!0,ua(y,u)}s.Za=function(){this.C!=null&&(this.C=null,Ln(this),Ks(this),lt(19))};function qs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Hs(u,m){var y=null;if(u.g==m){qs(u),ya(u),u.g=null;var E=2}else if(Bt(u.h,m))y=m.D,Ll(u.h,m),E=1;else return;if(u.G!=0){if(m.o)if(E==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var O=u.B;E=Ri(),gt(E,new Ns(E,y)),Jn(u)}else Li(u);else if(O=m.s,O==3||O==0&&0<m.X||!(E==1&&fh(u,m)||E==2&&Ks(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),O){case 1:_r(u,5);break;case 4:_r(u,10);break;case 3:_r(u,6);break;default:_r(u,2)}}}function Gl(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function _r(u,m){if(u.j.info("Error code "+m),m==2){var y=N(u.fb,u),E=u.Xa;const O=!E;E=new pr(E||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||bi(E,"https"),zr(E),O?ch(E.toString(),y):$l(E.toString(),y)}else lt(2);u.G=0,u.l&&u.l.sa(m),Wl(u),js(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Wl(u){if(u.G=0,u.ka=[],u.l){const m=Fl(u.h);(m.length!=0||u.i.length!=0)&&(K(u.ka,m),K(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function Ql(u,m,y){var E=y instanceof pr?an(y):new pr(y);if(E.g!="")m&&(E.g=m+"."+E.g),Fr(E,E.s);else{var O=d.location;E=O.protocol,m=m?m+"."+O.hostname:O.hostname,O=+O.port;var z=new pr(null);E&&bi(z,E),m&&(z.g=m),O&&Fr(z,O),y&&(z.l=y),E=z}return y=u.D,m=u.ya,y&&m&&qe(E,y,m),qe(E,"VER",u.la),yr(u,E),E}function Xl(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ye(new mr({eb:y})):new Ye(u.pa),m.Ha(u.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function _a(){}s=_a.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Gs(){}Gs.prototype.g=function(u,m){return new jt(u,m)};function jt(u,m){mt.call(this),this.g=new ga(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!he(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!he(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Zn(this)}Q(jt,mt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){xt(this.g)},jt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=ta(u),u=y);m.i.push(new Ol(m.Ya++,u)),m.G==3&&Jn(m)},jt.prototype.N=function(){this.g.l=null,delete this.j,xt(this.g),delete this.g,jt.aa.N.call(this)};function Yl(u){Gn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Q(Yl,Gn);function Jl(){xs.call(this),this.status=1}Q(Jl,xs);function Zn(u){this.g=u}Q(Zn,_a),Zn.prototype.ua=function(){gt(this.g,"a")},Zn.prototype.ta=function(u){gt(this.g,new Yl(u))},Zn.prototype.sa=function(u){gt(this.g,new Jl)},Zn.prototype.ra=function(){gt(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,K_=function(){return new Gs},$_=function(){return Ri()},j_=Wn,nf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,tc=Ds,Nl.COMPLETE="complete",B_=Nl,ks.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Ga=ks,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,z_=Ye}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Hg="@firebase/firestore",Gg="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new xf("@firebase/firestore");function Io(){return fs.logLevel}function J(s,...e){if(fs.logLevel<=xe.DEBUG){const t=e.map(Vf);fs.debug(`Firestore (${qo}): ${s}`,...t)}}function Ht(s,...e){if(fs.logLevel<=xe.ERROR){const t=e.map(Vf);fs.error(`Firestore (${qo}): ${s}`,...t)}}function ll(s,...e){if(fs.logLevel<=xe.WARN){const t=e.map(Vf);fs.warn(`Firestore (${qo}): ${s}`,...t)}}function Vf(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,q_(s,r,t)}function q_(s,e,t){let r=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ht(r),new Error(r)}function pe(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||q_(e,o,r)}function Se(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Ei{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qt.UNAUTHENTICATED))}shutdown(){}}class gT{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new pT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new qt(e)}}class yT{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _T{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vT{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pe(this.o===void 0,3512);const r=l=>{l.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,J("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Wg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=ET(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Ie(s,e){return s<e?-1:s>e?1:0}function rf(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Ie(r,o);{const l=H_(),c=wT(l.encode(Qg(s,t)),l.encode(Qg(e,t)));return c!==0?c:Ie(r,o)}}t+=r>65535?2:1}return Ie(s.length,e.length)}function Qg(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function wT(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Ie(s[t],e[t]);return Ie(s.length,e.length)}function No(s,e,t){return s.length===e.length&&s.every((r,o)=>t(r,e[o]))}function W_(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=-62135596800,Yg=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Yg);return new st(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xg)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yg}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Xg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new st(0,0))}static max(){return new ye(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="__name__";class ir{constructor(e,t,r){t===void 0?t=0:t>e.length&&ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=ir.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ie(e.length,t.length)}static compareSegments(e,t){const r=ir.isNumericId(e),o=ir.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?ir.extractNumericId(e).compare(ir.extractNumericId(t)):rf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fi.fromString(e.substring(4,e.length-2))}}class je extends ir{construct(e,t,r){return new je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new je(t)}static emptyPath(){return new je([])}}const IT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends ir{construct(e,t,r){return new it(e,t,r)}static isValidIdentifier(e){return IT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jg}static keyField(){return new it([Jg])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new le(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new le(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(l(),o++)}if(l(),c)throw new le(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(t)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(je.fromString(e))}static fromName(e){return new ie(je.fromString(e).popFirst(5))}static empty(){return new ie(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=-1;class gc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function sf(s){return s.fields.find(e=>e.kind===2)}function Zi(s){return s.fields.filter(e=>e.kind!==2)}gc.UNKNOWN_ID=-1;class nc{constructor(e,t){this.fieldPath=e,this.kind=t}}class cl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cl(0,mn.min())}}function TT(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=ye.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new mn(o,ie.empty(),e)}function Q_(s){return new mn(s.readTime,s.key,ul)}class mn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new mn(ye.min(),ie.empty(),ul)}static max(){return new mn(ye.max(),ie.empty(),ul)}}function Df(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ie.comparator(s.documentKey,e.documentKey),t!==0?t:Ie(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Es(s){if(s.code!==H.FAILED_PRECONDITION||s.message!==X_)throw s;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new M((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof M?t:M.resolve(t)}catch(t){return M.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):M.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):M.reject(t)}static resolve(e){return new M((t,r)=>{t(e)})}static reject(e){return new M((t,r)=>{r(e)})}static waitFor(e){return new M((t,r)=>{let o=0,l=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++l,c&&l===o&&t()},p=>r(p))}),c=!0,l===o&&t()})}static or(e){let t=M.resolve(!1);for(const r of e)t=t.next(o=>o?M.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}static mapArray(e,t){return new M((r,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const _=p;t(e[_]).next(w=>{c[_]=w,++d,d===l&&r(c)},w=>o(w))}})}static doWhile(e,t){return new M((r,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="SimpleDb";class zc{static open(e,t,r,o){try{return new zc(t,e.transaction(o,r))}catch(l){throw new Ya(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Cr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ya(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=bf(r.target.error);this.S.reject(new Ya(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(J(fn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AT(t)}}class pi{static delete(e){return J(fn,"Removing database:",e),ns(k_().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!D_())return!1;if(pi.F())return!0;const e=sn(),t=pi.M(e),r=0<t&&t<10,o=J_(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,pi.M(sn())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(J(fn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=l=>{const c=l.target.result;t(c)},o.onblocked=()=>{r(new Ya(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new le(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new le(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Ya(e,c))},o.onupgradeneeded=l=>{J(fn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${c.version}`);this.B.q(c,o.transaction,l.oldVersion,this.version).next(()=>{J(fn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const d=zc.open(this.db,e,l?"readonly":"readwrite",r),p=o(d).next(_=>(d.v(),_)).catch(_=>(d.abort(_),M.reject(_))).toPromise();return p.catch(()=>{}),await d.D,p}catch(d){const p=d,_=p.name!=="FirebaseError"&&c<3;if(J(fn,"Transaction failed with error:",p.message,"Retrying:",_),this.close(),!_)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function J_(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ST{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return ns(this.K.delete())}}class Ya extends le{constructor(e,t){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wi(s){return s.name==="IndexedDbTransactionError"}class AT{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(J(fn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(J(fn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ns(r)}add(e){return J(fn,"ADD",this.store.name,e,e),ns(this.store.add(e))}get(e){return ns(this.store.get(e)).next(t=>(t===void 0&&(t=null),J(fn,"GET",this.store.name,e,t),t))}delete(e){return J(fn,"DELETE",this.store.name,e),ns(this.store.delete(e))}count(){return J(fn,"COUNT",this.store.name),ns(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const l=o.getAll(r.range);return new M((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}})}{const l=this.cursor(r),c=[];return this.Y(l,(d,p)=>{c.push(p)}).next(()=>c)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new M((o,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}X(e,t){J(fn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const o=this.cursor(r);return this.Y(o,(l,c,d)=>d.delete())}te(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Y(o,t)}ne(e){const t=this.cursor({});return new M((r,o)=>{t.onerror=l=>{const c=bf(l.target.error);o(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}Y(e,t){const r=[];return new M((o,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void o();const p=new ST(d),_=t(d.primaryKey,d.value,p);if(_ instanceof M){const w=_.catch(I=>(p.done(),M.reject(I)));r.push(w)}p.isDone?o():p.j===null?d.continue():d.continue(p.j)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ns(s){return new M((e,t)=>{s.onsuccess=r=>{const o=r.target.result;e(o)},s.onerror=r=>{const o=bf(r.target.error);t(o)}})}let Zg=!1;function bf(s){const e=pi.M(sn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zg||(Zg=!0,setTimeout(()=>{throw r},0)),r}}return s}const Ja="IndexBackfiller";class PT{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){J(Ja,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();J(Ja,`Documents written: ${t}`)}catch(t){wi(t)?J(Ja,"Ignoring IndexedDB error during index backfill: ",t):await Es(t)}await this.ie(6e4)})}}class RT{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let o=t,l=!0;return M.doWhile(()=>l===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return J(Ja,`Processing collection: ${c}`),this._e(e,c,o).next(d=>{o-=d,r.add(c)});l=!1})).next(()=>t-o)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ae(o,l)).next(d=>(J(Ja,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}ae(e,t){let r=e;return t.changes.forEach((o,l)=>{const c=Q_(l);Df(c,r)>0&&(r=c)}),new mn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Pn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=-1;function Bc(s){return s==null}function hl(s){return s===0&&1/s==-1/0}function CT(s){return typeof s=="number"&&Number.isInteger(s)&&!hl(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="";function zt(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=ey(e)),e=kT(s.get(t),e);return ey(e)}function kT(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const l=s.charAt(o);switch(l){case"\0":t+="";break;case yc:t+="";break;default:t+=l}}return t}function ey(s){return s+yc+""}function sr(s){const e=s.length;if(pe(e>=2,64408,{path:s}),e===2)return pe(s.charAt(0)===yc&&s.charAt(1)==="",56145,{path:s}),je.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const c=s.indexOf(yc,l);switch((c<0||c>t)&&ce(50515,{path:s}),s.charAt(c+1)){case"":const d=s.substring(l,c);let p;o.length===0?p=d:(o+=d,p=o,o=""),r.push(p);break;case"":o+=s.substring(l,c),o+="\0";break;case"":o+=s.substring(l,c+1);break;default:ce(61167,{path:s})}l=c+2}return new je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="remoteDocuments",Il="owner",go="owner",dl="mutationQueues",xT="userId",Kn="mutations",ty="batchId",os="userMutationsIndex",ny=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(s,e){return[s,zt(e)]}function Z_(s,e,t){return[s,zt(e),t]}const NT={},Vo="documentMutations",_c="remoteDocumentsV14",VT=["prefixPath","collectionGroup","readTime","documentId"],ic="documentKeyIndex",DT=["prefixPath","collectionGroup","documentId"],ev="collectionGroupIndex",bT=["collectionGroup","readTime","prefixPath","documentId"],fl="remoteDocumentGlobal",of="remoteDocumentGlobalKey",Do="targets",tv="queryTargetsIndex",OT=["canonicalId","targetId"],bo="targetDocuments",MT=["targetId","path"],Of="documentTargetsIndex",LT=["path","targetId"],vc="targetGlobalKey",cs="targetGlobal",pl="collectionParents",FT=["collectionId","parent"],Oo="clientMetadata",UT="clientId",jc="bundles",zT="bundleId",$c="namedQueries",BT="name",Mf="indexConfiguration",jT="indexId",af="collectionGroupIndex",$T="collectionGroup",Za="indexState",KT=["indexId","uid"],nv="sequenceNumberIndex",qT=["uid","sequenceNumber"],el="indexEntries",HT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rv="documentKeyIndex",GT=["indexId","uid","orderedDocumentKey"],Kc="documentOverlays",WT=["userId","collectionPath","documentId"],lf="collectionPathOverlayIndex",QT=["userId","collectionPath","largestBatchId"],iv="collectionGroupOverlayIndex",XT=["userId","collectionGroup","largestBatchId"],Lf="globals",YT="name",sv=[dl,Kn,Vo,es,Do,Il,cs,bo,Oo,fl,pl,jc,$c],JT=[...sv,Kc],ov=[dl,Kn,Vo,_c,Do,Il,cs,bo,Oo,fl,pl,jc,$c,Kc],av=ov,Ff=[...av,Mf,Za,el],ZT=Ff,lv=[...Ff,Lf],eS=lv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends Y_{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Et(s,e){const t=Se(s);return pi.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ws(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function uv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??Dt.RED,this.left=o??Dt.EMPTY,this.right=l??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Dt(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iy(this.data.getIterator())}getIteratorFrom(e){return new iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $e(this.comparator);return t.data=e,t}}class iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new $e(it.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new cv("Invalid base64 string: "+l):l}}(e);return new pt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const tS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(s){if(pe(!!s,39018),typeof s=="string"){let e=0;const t=tS.exec(s);if(pe(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(s.seconds),nanos:Ze(s.nanos)}}function Ze(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Vr(s){return typeof s=="string"?pt.fromBase64String(s):pt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="server_timestamp",dv="__type__",fv="__previous_value__",pv="__local_write_time__";function Uf(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[dv])===null||t===void 0?void 0:t.stringValue)===hv}function qc(s){const e=s.mapValue.fields[fv];return Uf(e)?qc(e):e}function ml(s){const e=Nr(s.mapValue.fields[pv].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t,r,o,l,c,d,p,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=_,this.isUsingEmulator=w}}const Ec="(default)";class ps{constructor(e,t){this.projectId=e,this.database=t||Ec}static empty(){return new ps("","")}get isDefaultDatabase(){return this.database===Ec}isEqual(e){return e instanceof ps&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="__type__",mv="__max__",ci={mapValue:{fields:{__type__:{stringValue:mv}}}},Bf="__vector__",Mo="value",sc={nullValue:"NULL_VALUE"};function gi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Uf(s)?4:gv(s)?9007199254740991:Hc(s)?10:11:ce(28295,{value:s})}function lr(s,e){if(s===e)return!0;const t=gi(s);if(t!==gi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ml(s).isEqual(ml(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Nr(o.timestampValue),d=Nr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,l){return Vr(o.bytesValue).isEqual(Vr(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,l){return Ze(o.geoPointValue.latitude)===Ze(l.geoPointValue.latitude)&&Ze(o.geoPointValue.longitude)===Ze(l.geoPointValue.longitude)}(s,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Ze(o.integerValue)===Ze(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Ze(o.doubleValue),d=Ze(l.doubleValue);return c===d?hl(c)===hl(d):isNaN(c)&&isNaN(d)}return!1}(s,e);case 9:return No(s.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(ry(c)!==ry(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!lr(c[p],d[p])))return!1;return!0}(s,e);default:return ce(52216,{left:s})}}function gl(s,e){return(s.values||[]).find(t=>lr(t,e))!==void 0}function yi(s,e){if(s===e)return 0;const t=gi(s),r=gi(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(s.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Ze(l.integerValue||l.doubleValue),p=Ze(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(s,e);case 3:return sy(s.timestampValue,e.timestampValue);case 4:return sy(ml(s),ml(e));case 5:return rf(s.stringValue,e.stringValue);case 6:return function(l,c){const d=Vr(l),p=Vr(c);return d.compareTo(p)}(s.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),p=c.split("/");for(let _=0;_<d.length&&_<p.length;_++){const w=Ie(d[_],p[_]);if(w!==0)return w}return Ie(d.length,p.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ie(Ze(l.latitude),Ze(c.latitude));return d!==0?d:Ie(Ze(l.longitude),Ze(c.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return oy(s.arrayValue,e.arrayValue);case 10:return function(l,c){var d,p,_,w;const I=l.fields||{},N=c.fields||{},B=(d=I[Mo])===null||d===void 0?void 0:d.arrayValue,Q=(p=N[Mo])===null||p===void 0?void 0:p.arrayValue,G=Ie(((_=B==null?void 0:B.values)===null||_===void 0?void 0:_.length)||0,((w=Q==null?void 0:Q.values)===null||w===void 0?void 0:w.length)||0);return G!==0?G:oy(B,Q)}(s.mapValue,e.mapValue);case 11:return function(l,c){if(l===ci.mapValue&&c===ci.mapValue)return 0;if(l===ci.mapValue)return 1;if(c===ci.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),_=c.fields||{},w=Object.keys(_);p.sort(),w.sort();for(let I=0;I<p.length&&I<w.length;++I){const N=rf(p[I],w[I]);if(N!==0)return N;const B=yi(d[p[I]],_[w[I]]);if(B!==0)return B}return Ie(p.length,w.length)}(s.mapValue,e.mapValue);default:throw ce(23264,{Pe:t})}}function sy(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ie(s,e);const t=Nr(s),r=Nr(e),o=Ie(t.seconds,r.seconds);return o!==0?o:Ie(t.nanos,r.nanos)}function oy(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=yi(t[o],r[o]);if(l)return l}return Ie(t.length,r.length)}function Lo(s){return cf(s)}function cf(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=Nr(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return Vr(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return ie.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=cf(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${cf(t.fields[c])}`;return o+"}"}(s.mapValue):ce(61005,{value:s})}function oc(s){switch(gi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qc(s);return e?16+oc(e):16;case 5:return 2*s.stringValue.length;case 6:return Vr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,l)=>o+oc(l),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return ws(r.fields,(l,c)=>{o+=l.length+oc(c)}),o}(s.mapValue);default:throw ce(13486,{value:s})}}function jf(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function hf(s){return!!s&&"integerValue"in s}function yl(s){return!!s&&"arrayValue"in s}function ay(s){return!!s&&"nullValue"in s}function ly(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ac(s){return!!s&&"mapValue"in s}function Hc(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[zf])===null||t===void 0?void 0:t.stringValue)===Bf}function tl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ws(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tl(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(s.arrayValue.values[t]);return e}return Object.assign({},s)}function gv(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===mv}const yv={mapValue:{fields:{[zf]:{stringValue:Bf},[Mo]:{arrayValue:{}}}}};function rS(s){return"nullValue"in s?sc:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?jf(ps.empty(),ie.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Hc(s)?yv:{mapValue:{}}:ce(35942,{value:s})}function iS(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?jf(ps.empty(),ie.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?yv:"mapValue"in s?Hc(s)?{mapValue:{}}:ci:ce(61959,{value:s})}function uy(s,e){const t=yi(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function cy(s,e){const t=yi(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=it.emptyPath(),r={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=tl(c):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];ac(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ws(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new nn(tl(this.value))}}function _v(s){const e=[];return ws(s.fields,(t,r)=>{const o=new it([t]);if(ac(r)){const l=_v(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t,r,o,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new at(e,0,ye.min(),ye.min(),ye.min(),nn.empty(),0)}static newFoundDocument(e,t,r,o){return new at(e,1,t,ye.min(),r,o,0)}static newNoDocument(e,t){return new at(e,2,t,ye.min(),ye.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,ye.min(),ye.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this.position=e,this.inclusive=t}}function hy(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const l=e[o],c=s.position[o];if(l.field.isKeyField()?r=ie.comparator(ie.fromName(c.referenceValue),t.key):r=yi(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function dy(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!lr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function sS(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{}class Ve extends vv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oS(e,t,r):t==="array-contains"?new uS(e,r):t==="in"?new Av(e,r):t==="not-in"?new cS(e,r):t==="array-contains-any"?new hS(e,r):new Ve(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aS(e,r):new lS(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(yi(t,this.value)):t!==null&&gi(this.value)===gi(t)&&this.matchesComparison(yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends vv{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ke(e,t)}matches(e){return Uo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Uo(s){return s.op==="and"}function df(s){return s.op==="or"}function $f(s){return Ev(s)&&Uo(s)}function Ev(s){for(const e of s.filters)if(e instanceof Ke)return!1;return!0}function ff(s){if(s instanceof Ve)return s.field.canonicalString()+s.op.toString()+Lo(s.value);if($f(s))return s.filters.map(e=>ff(e)).join(",");{const e=s.filters.map(t=>ff(t)).join(",");return`${s.op}(${e})`}}function wv(s,e){return s instanceof Ve?function(r,o){return o instanceof Ve&&r.op===o.op&&r.field.isEqual(o.field)&&lr(r.value,o.value)}(s,e):s instanceof Ke?function(r,o){return o instanceof Ke&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((l,c,d)=>l&&wv(c,o.filters[d]),!0):!1}(s,e):void ce(19439)}function Iv(s,e){const t=s.filters.concat(e);return Ke.create(t,s.op)}function Tv(s){return s instanceof Ve?function(t){return`${t.field.canonicalString()} ${t.op} ${Lo(t.value)}`}(s):s instanceof Ke?function(t){return t.op.toString()+" {"+t.getFilters().map(Tv).join(" ,")+"}"}(s):"Filter"}class oS extends Ve{constructor(e,t,r){super(e,t,r),this.key=ie.fromName(r.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class aS extends Ve{constructor(e,t){super(e,"in",t),this.keys=Sv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lS extends Ve{constructor(e,t){super(e,"not-in",t),this.keys=Sv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sv(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ie.fromName(r.referenceValue))}class uS extends Ve{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yl(t)&&gl(t.arrayValue,this.value)}}class Av extends Ve{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gl(this.value.arrayValue,t)}}class cS extends Ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gl(this.value.arrayValue,t)}}class hS extends Ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,t=null,r=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function pf(s,e=null,t=[],r=[],o=null,l=null,c=null){return new dS(s,e,t,r,o,l,c)}function ms(s){const e=Se(s);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ff(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lo(r)).join(",")),e.Ie=t}return e.Ie}function Tl(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!sS(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!wv(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!dy(s.startAt,e.startAt)&&dy(s.endAt,e.endAt)}function Ic(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Tc(s,e){return s.filters.filter(t=>t instanceof Ve&&t.field.isEqual(e))}function fy(s,e,t){let r=sc,o=!0;for(const l of Tc(s,e)){let c=sc,d=!0;switch(l.op){case"<":case"<=":c=rS(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=sc}uy({value:r,inclusive:o},{value:c,inclusive:d})<0&&(r=c,o=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];uy({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function py(s,e,t){let r=ci,o=!0;for(const l of Tc(s,e)){let c=ci,d=!0;switch(l.op){case">=":case">":c=iS(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ci}cy({value:r,inclusive:o},{value:c,inclusive:d})>0&&(r=c,o=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];cy({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t=null,r=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function fS(s,e,t,r,o,l,c,d){return new Gc(s,e,t,r,o,l,c,d)}function Kf(s){return new Gc(s)}function my(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function pS(s){return s.collectionGroup!==null}function nl(s){const e=Se(s);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(it.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(_=>{_.isInequality()&&(d=d.add(_.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new wc(l,r))}),t.has(it.keyField().canonicalString())||e.Ee.push(new wc(it.keyField(),r))}return e.Ee}function Cn(s){const e=Se(s);return e.de||(e.de=mS(e,nl(s))),e.de}function mS(s,e){if(s.limitType==="F")return pf(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new wc(o.field,l)});const t=s.endAt?new Fo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Fo(s.startAt.position,s.startAt.inclusive):null;return pf(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function mf(s,e,t){return new Gc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Wc(s,e){return Tl(Cn(s),Cn(e))&&s.limitType===e.limitType}function Pv(s){return`${ms(Cn(s))}|lt:${s.limitType}`}function To(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>Tv(o)).join(", ")}]`),Bc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Lo(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Lo(o)).join(",")),`Target(${r})`}(Cn(s))}; limitType=${s.limitType})`}function Sl(s,e){return e.isFoundDocument()&&function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ie.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,o){for(const l of nl(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(c,d,p){const _=hy(c,d,p);return c.inclusive?_<=0:_<0}(r.startAt,nl(r),o)||r.endAt&&!function(c,d,p){const _=hy(c,d,p);return c.inclusive?_>=0:_>0}(r.endAt,nl(r),o))}(s,e)}function gS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Rv(s){return(e,t)=>{let r=!1;for(const o of nl(s)){const l=yS(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function yS(s,e,t){const r=s.field.isKeyField()?ie.comparator(e.key,t.key):function(l,c,d){const p=c.data.field(l),_=d.data.field(l);return p!==null&&_!==null?yi(p,_):ce(42886)}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ce(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return uv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new et(ie.comparator);function pn(){return _S}const Cv=new et(ie.comparator);function Wa(...s){let e=Cv;for(const t of s)e=e.insert(t.key,t);return e}function kv(s){let e=Cv;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function or(){return rl()}function xv(){return rl()}function rl(){return new Dr(s=>s.toString(),(s,e)=>s.isEqual(e))}const vS=new et(ie.comparator),ES=new $e(ie.comparator);function Re(...s){let e=ES;for(const t of s)e=e.add(t);return e}const wS=new $e(Ie);function IS(){return wS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hl(e)?"-0":e}}function Nv(s){return{integerValue:""+s}}function TS(s,e){return CT(e)?Nv(e):qf(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this._=void 0}}function SS(s,e,t){return s instanceof _l?function(o,l){const c={fields:{[dv]:{stringValue:hv},[pv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Uf(l)&&(l=qc(l)),l&&(c.fields[fv]=l),{mapValue:c}}(t,e):s instanceof zo?Dv(s,e):s instanceof Bo?bv(s,e):function(o,l){const c=Vv(o,l),d=gy(c)+gy(o.Re);return hf(c)&&hf(o.Re)?Nv(d):qf(o.serializer,d)}(s,e)}function AS(s,e,t){return s instanceof zo?Dv(s,e):s instanceof Bo?bv(s,e):t}function Vv(s,e){return s instanceof vl?function(r){return hf(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class _l extends Qc{}class zo extends Qc{constructor(e){super(),this.elements=e}}function Dv(s,e){const t=Ov(e);for(const r of s.elements)t.some(o=>lr(o,r))||t.push(r);return{arrayValue:{values:t}}}class Bo extends Qc{constructor(e){super(),this.elements=e}}function bv(s,e){let t=Ov(e);for(const r of s.elements)t=t.filter(o=>!lr(o,r));return{arrayValue:{values:t}}}class vl extends Qc{constructor(e,t){super(),this.serializer=e,this.Re=t}}function gy(s){return Ze(s.integerValue||s.doubleValue)}function Ov(s){return yl(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t){this.field=e,this.transform=t}}function RS(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof zo&&o instanceof zo||r instanceof Bo&&o instanceof Bo?No(r.elements,o.elements,lr):r instanceof vl&&o instanceof vl?lr(r.Re,o.Re):r instanceof _l&&o instanceof _l}(s.transform,e.transform)}class CS{constructor(e,t){this.version=e,this.transformResults=t}}class rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Xc{}function Mv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Yc(s.key,rn.none()):new Ho(s.key,s.data,rn.none());{const t=s.data,r=nn.empty();let o=new $e(it.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new Ii(s.key,r,new Rn(o.toArray()),rn.none())}}function kS(s,e,t){s instanceof Ho?function(o,l,c){const d=o.value.clone(),p=_y(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,e,t):s instanceof Ii?function(o,l,c){if(!lc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=_y(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Lv(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(s,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function il(s,e,t,r){return s instanceof Ho?function(l,c,d,p){if(!lc(l.precondition,c))return d;const _=l.value.clone(),w=vy(l.fieldTransforms,p,c);return _.setAll(w),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),null}(s,e,t,r):s instanceof Ii?function(l,c,d,p){if(!lc(l.precondition,c))return d;const _=vy(l.fieldTransforms,p,c),w=c.data;return w.setAll(Lv(l)),w.setAll(_),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(I=>I.field))}(s,e,t,r):function(l,c,d){return lc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,e,t)}function xS(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),l=Vv(r.transform,o||null);l!=null&&(t===null&&(t=nn.empty()),t.set(r.field,l))}return t||null}function yy(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&No(r,o,(l,c)=>RS(l,c))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ho extends Xc{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ii extends Xc{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Lv(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function _y(s,e,t){const r=new Map;pe(s.length===t.length,32656,{Ve:t.length,me:s.length});for(let o=0;o<t.length;o++){const l=s[o],c=l.transform,d=e.data.field(l.field);r.set(l.field,AS(c,d,t[o]))}return r}function vy(s,e,t){const r=new Map;for(const o of s){const l=o.transform,c=t.data.field(o.field);r.set(o.field,SS(l,c,e))}return r}class Yc extends Xc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fv extends Xc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&kS(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=il(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=il(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=xv();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=Mv(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(t,r)=>yy(t,r))&&No(this.baseMutations,e.baseMutations,(t,r)=>yy(t,r))}}class Gf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){pe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return vS}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new Gf(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Oe;function VS(s){switch(s){case H.OK:return ce(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ce(15467,{code:s})}}function Uv(s){if(s===void 0)return Ht("GRPC error has no .code"),H.UNKNOWN;switch(s){case dt.OK:return H.OK;case dt.CANCELLED:return H.CANCELLED;case dt.UNKNOWN:return H.UNKNOWN;case dt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case dt.INTERNAL:return H.INTERNAL;case dt.UNAVAILABLE:return H.UNAVAILABLE;case dt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case dt.NOT_FOUND:return H.NOT_FOUND;case dt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case dt.ABORTED:return H.ABORTED;case dt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case dt.DATA_LOSS:return H.DATA_LOSS;default:return ce(39323,{code:s})}}(Oe=dt||(dt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=new fi([4294967295,4294967295],0);function Ey(s){const e=H_().encode(s),t=new U_;return t.update(e),new Uint8Array(t.digest())}function wy(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new fi([t,r],0),new fi([o,l],0)]}class Qf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qa(`Invalid padding: ${t}`);if(r<0)throw new Qa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=fi.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(fi.fromNumber(r)));return o.compare(DS)===1&&(o=new fi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Ey(e),[r,o]=wy(t);for(let l=0;l<this.hashCount;l++){const c=this.we(r,o,l);if(!this.be(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Qf(l,o,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=Ey(e),[r,o]=wy(t);for(let l=0;l<this.hashCount;l++){const c=this.we(r,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Jc(ye.min(),o,new et(Ie),pn(),Re())}}class Al{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Al(r,t,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class zv{constructor(e,t){this.targetId=e,this.Ce=t}}class Bv{constructor(e,t,r=pt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Iy{constructor(){this.Fe=0,this.Me=Ty(),this.xe=pt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Re(),t=Re(),r=Re();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ce(38017,{changeType:l})}}),new Al(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Ty()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,pe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class bS{constructor(e){this.ze=e,this.je=new Map,this.He=pn(),this.Je=Wu(),this.Ye=Wu(),this.Ze=new et(Ie)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:ce(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(Ic(l))if(r===0){const c=new ie(l.path);this.tt(t,c,at.newNoDocument(c,ye.min()))}else pe(r===1,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,_)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=Vr(r).toUint8Array()}catch(p){if(p instanceof cv)return ll("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Qf(c,o,l)}catch(p){return ll(p instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&Ic(d.target)){const p=new ie(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,at.newNoDocument(p,e))}l.Le&&(t.set(c,l.qe()),l.Qe())}});let r=Re();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(p=>{const _=this._t(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const o=new Jc(e,t,this.Ze,this.He,r);return this.He=pn(),this.Je=Wu(),this.Ye=Wu(),this.Ze=new et(Ie),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Iy,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new $e(Ie),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new $e(Ie),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Iy),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Wu(){return new et(ie.comparator)}function Ty(){return new et(ie.comparator)}const OS={asc:"ASCENDING",desc:"DESCENDING"},MS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LS={and:"AND",or:"OR"};class FS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gf(s,e){return s.useProto3Json||Bc(e)?e:{value:e}}function jo(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function US(s,e){return jo(s,e.toTimestamp())}function Gt(s){return pe(!!s,49232),ye.fromTimestamp(function(t){const r=Nr(t);return new st(r.seconds,r.nanos)}(s))}function Xf(s,e){return yf(s,e).canonicalString()}function yf(s,e){const t=function(o){return new je(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function $v(s){const e=je.fromString(s);return pe(Jv(e),10190,{key:e.toString()}),e}function Sc(s,e){return Xf(s.databaseId,e.path)}function hs(s,e){const t=$v(e);if(t.get(1)!==s.databaseId.projectId)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ie(Hv(t))}function Kv(s,e){return Xf(s.databaseId,e)}function qv(s){const e=$v(s);return e.length===4?je.emptyPath():Hv(e)}function _f(s){return new je(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Hv(s){return pe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Sy(s,e,t){return{name:Sc(s,e),fields:t.value.mapValue.fields}}function zS(s,e,t){const r=hs(s,e.name),o=Gt(e.updateTime),l=e.createTime?Gt(e.createTime):ye.min(),c=new nn({mapValue:{fields:e.fields}}),d=at.newFoundDocument(r,o,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function BS(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ce(39313,{state:_})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(_,w){return _.useProto3Json?(pe(w===void 0||typeof w=="string",58123),pt.fromBase64String(w||"")):(pe(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),pt.fromUint8Array(w||new Uint8Array))}(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(_){const w=_.code===void 0?H.UNKNOWN:Uv(_.code);return new le(w,_.message||"")}(c);t=new Bv(r,o,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=hs(s,r.document.name),l=Gt(r.document.updateTime),c=r.document.createTime?Gt(r.document.createTime):ye.min(),d=new nn({mapValue:{fields:r.document.fields}}),p=at.newFoundDocument(o,l,c,d),_=r.targetIds||[],w=r.removedTargetIds||[];t=new uc(_,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=hs(s,r.document),l=r.readTime?Gt(r.readTime):ye.min(),c=at.newNoDocument(o,l),d=r.removedTargetIds||[];t=new uc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=hs(s,r.document),l=r.removedTargetIds||[];t=new uc([],l,o,null)}else{if(!("filter"in e))return ce(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new NS(o,l),d=r.targetId;t=new zv(d,c)}}return t}function Ac(s,e){let t;if(e instanceof Ho)t={update:Sy(s,e.key,e.value)};else if(e instanceof Yc)t={delete:Sc(s,e.key)};else if(e instanceof Ii)t={update:Sy(s,e.key,e.data),updateMask:GS(e.fieldMask)};else{if(!(e instanceof Fv))return ce(16599,{ft:e.type});t={verify:Sc(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof _l)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof zo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Bo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof vl)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw ce(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:US(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ce(27497)}(s,e.precondition)),t}function vf(s,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?rn.updateTime(Gt(l.updateTime)):l.exists!==void 0?rn.exists(l.exists):rn.none()}(e.currentDocument):rn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,d){let p=null;if("setToServerValue"in d)pe(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new _l;else if("appendMissingElements"in d){const w=d.appendMissingElements.values||[];p=new zo(w)}else if("removeAllFromArray"in d){const w=d.removeAllFromArray.values||[];p=new Bo(w)}else"increment"in d?p=new vl(c,d.increment):ce(16584,{proto:d});const _=it.fromServerFormat(d.fieldPath);return new PS(_,p)}(s,o)):[];if(e.update){e.update.name;const o=hs(s,e.update.name),l=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(p){const _=p.fieldPaths||[];return new Rn(_.map(w=>it.fromServerFormat(w)))}(e.updateMask);return new Ii(o,l,c,t,r)}return new Ho(o,l,t,r)}if(e.delete){const o=hs(s,e.delete);return new Yc(o,t)}if(e.verify){const o=hs(s,e.verify);return new Fv(o,t)}return ce(1463,{proto:e})}function jS(s,e){return s&&s.length>0?(pe(e!==void 0,14353),s.map(t=>function(o,l){let c=o.updateTime?Gt(o.updateTime):Gt(l);return c.isEqual(ye.min())&&(c=Gt(l)),new CS(c,o.transformResults||[])}(t,e))):[]}function Gv(s,e){return{documents:[Kv(s,e.path)]}}function Wv(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Kv(s,o);const l=function(_){if(_.length!==0)return Yv(Ke.create(_,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(_){if(_.length!==0)return _.map(w=>function(N){return{field:So(N.field),direction:KS(N.dir)}}(w))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=gf(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{gt:t,parent:o}}function Qv(s){let e=qv(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){pe(r===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(I){const N=Xv(I);return N instanceof Ke&&$f(N)?N.getFilters():[N]}(t.where));let c=[];t.orderBy&&(c=function(I){return I.map(N=>function(Q){return new wc(Ao(Q.field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Q.direction))}(N))}(t.orderBy));let d=null;t.limit&&(d=function(I){let N;return N=typeof I=="object"?I.value:I,Bc(N)?null:N}(t.limit));let p=null;t.startAt&&(p=function(I){const N=!!I.before,B=I.values||[];return new Fo(B,N)}(t.startAt));let _=null;return t.endAt&&(_=function(I){const N=!I.before,B=I.values||[];return new Fo(B,N)}(t.endAt)),fS(e,o,c,l,d,"F",p,_)}function $S(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Xv(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ao(t.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(t.unaryFilter.field);return Ve.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ao(t.unaryFilter.field);return Ve.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ao(t.unaryFilter.field);return Ve.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}}(s):s.fieldFilter!==void 0?function(t){return Ve.create(Ao(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return Ke.create(t.compositeFilter.filters.map(r=>Xv(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ce(1026)}}(t.compositeFilter.op))}(s):ce(30097,{filter:s})}function KS(s){return OS[s]}function qS(s){return MS[s]}function HS(s){return LS[s]}function So(s){return{fieldPath:s.canonicalString()}}function Ao(s){return it.fromServerFormat(s.fieldPath)}function Yv(s){return s instanceof Ve?function(t){if(t.op==="=="){if(ly(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(ay(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ly(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(ay(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:qS(t.op),value:t.value}}}(s):s instanceof Ke?function(t){const r=t.getFilters().map(o=>Yv(o));return r.length===1?r[0]:{compositeFilter:{op:HS(t.op),filters:r}}}(s):ce(54877,{filter:s})}function GS(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Jv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t,r,o,l=ye.min(),c=ye.min(),d=pt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this.wt=e}}function WS(s,e){let t;if(e.document)t=zS(s.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ie.fromSegments(e.noDocument.path),o=ys(e.noDocument.readTime);t=at.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ce(56709);{const r=ie.fromSegments(e.unknownDocument.path),o=ys(e.unknownDocument.version);t=at.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(o){const l=new st(o[0],o[1]);return ye.fromTimestamp(l)}(e.readTime)),t}function Ay(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:Sc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:jo(l,c.version.toTimestamp()),createTime:jo(l,c.createTime.toTimestamp())}}(s.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gs(e.version)};else{if(!e.isUnknownDocument())return ce(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:gs(e.version)}}return r}function Pc(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function gs(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ys(s){const e=new st(s.seconds,s.nanoseconds);return ye.fromTimestamp(e)}function rs(s,e){const t=(e.baseMutations||[]).map(l=>vf(s.wt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>vf(s.wt,l)),o=st.fromMillis(e.localWriteTimeMs);return new Hf(e.batchId,o,t,r)}function Xa(s){const e=ys(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?ys(s.lastLimboFreeSnapshotVersion):ye.min();let r;return r=function(l){return l.documents!==void 0}(s.query)?function(l){const c=l.documents.length;return pe(c===1,1966,{count:c}),Cn(Kf(qv(l.documents[0])))}(s.query):function(l){return Cn(Qv(l))}(s.query),new Rr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,pt.fromBase64String(s.resumeToken))}function eE(s,e){const t=gs(e.snapshotVersion),r=gs(e.lastLimboFreeSnapshotVersion);let o;o=Ic(e.target)?Gv(s.wt,e.target):Wv(s.wt,e.target).gt;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ms(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function tE(s){const e=Qv({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?mf(e,e.limit,"L"):e}function jd(s,e){return new Wf(e.largestBatchId,vf(s.wt,e.overlayMutation))}function Py(s,e){const t=e.path.lastSegment();return[s,zt(e.path.popLast()),t]}function Ry(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:gs(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{getBundleMetadata(e,t){return Cy(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:ys(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return Cy(e).put(function(o){return{bundleId:o.id,createTime:gs(Gt(o.createTime)),version:o.version}}(t))}getNamedQuery(e,t){return ky(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:tE(l.bundledQuery),readTime:ys(l.readTime)}}(r)})}saveNamedQuery(e,t){return ky(e).put(function(o){return{name:o.name,readTime:gs(Gt(o.readTime)),bundledQuery:o.bundledQuery}}(t))}}function Cy(s){return Et(s,jc)}function ky(s){return Et(s,$c)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const r=t.uid||"";return new Zc(e,r)}getOverlay(e,t){return ja(e).get(Py(this.userId,t)).next(r=>r?jd(this.serializer,r):null)}getOverlays(e,t){const r=or();return M.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((l,c)=>{const d=new Wf(t,c);o.push(this.St(e,d))}),M.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(zt(c.getCollectionPath())));const l=[];return o.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(ja(e).X(lf,d))}),M.waitFor(l)}getOverlaysForCollection(e,t,r){const o=or(),l=zt(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return ja(e).J(lf,c).next(d=>{for(const p of d){const _=jd(this.serializer,p);o.set(_.getKey(),_)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=or();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ja(e).te({index:iv,range:d},(p,_,w)=>{const I=jd(this.serializer,_);l.size()<o||I.largestBatchId===c?(l.set(I.getKey(),I),c=I.largestBatchId):w.done()}).next(()=>l)}St(e,t){return ja(e).put(function(o,l,c){const[d,p,_]=Py(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:_,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Ac(o.wt,c.mutation)}}(this.serializer,this.userId,t))}}function ja(s){return Et(s,Kc)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{Dt(e){return Et(e,Lf)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?pt.fromUint8Array(r):pt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Ze(e.integerValue));else if("doubleValue"in e){const r=Ze(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),hl(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Nr(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Vr(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?gv(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Hc(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):ce(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const o of Object.keys(r))this.Nt(o,t),this.Ct(r[o],t)}qt(e,t){var r,o;const l=e.fields||{};this.Mt(t,53);const c=Mo,d=((o=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.Mt(t,15),t.xt(Ze(d)),this.Nt(c,t),this.Ct(l[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const o of r)this.Ct(o,t)}kt(e,t){this.Mt(t,37),ie.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}is.Wt=new is;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=255;function YS(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function xy(s){const e=64-function(r){let o=0;for(let l=0;l<8;++l){const c=YS(255&r[l]);if(o+=c,c!==8)break}return o}(s);return Math.ceil(e/8)}class JS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const o=t.codePointAt(0);this.zt(240|o>>>18),this.zt(128|63&o>>>12),this.zt(128|63&o>>>6),this.zt(128|63&o)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Yt()}en(e){const t=this.tn(e),r=xy(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}rn(e){const t=this.tn(e),r=xy(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}sn(){this._n(_o),this._n(255)}an(){this.un(_o),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===_o?(this._n(_o),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===_o?(this.un(_o),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class ZS{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class eA{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class $a{constructor(){this.ln=new JS,this.hn=new ZS(this.ln),this.Pn=new eA(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t,r,o){this.In=e,this.En=t,this.dn=r,this.An=o}Rn(){const e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.An,0),t!==e?r.set([0],this.An.length):++r[r.length-1],new ss(this.In,this.En,this.dn,r)}Vn(e,t,r){return{indexId:this.In,uid:e,arrayValue:cc(this.dn),directionalValue:cc(this.An),orderedDocumentKey:cc(t),documentKey:r.path.toArray()}}mn(e,t,r){const o=this.Vn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function si(s,e){let t=s.In-e.In;return t!==0?t:(t=Ny(s.dn,e.dn),t!==0?t:(t=Ny(s.An,e.An),t!==0?t:ie.comparator(s.En,e.En)))}function Ny(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function cc(s){return V_()?function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r}(s):s}function Vy(s){return typeof s!="string"?s:function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(s)}class Dy{constructor(e){this.fn=new $e((t,r)=>it.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const r=t;r.isInequality()?this.fn=this.fn.add(r):this.pn.push(r)}}get yn(){return this.fn.size>1}wn(e){if(pe(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=sf(e);if(t!==void 0&&!this.bn(t))return!1;const r=Zi(e);let o=new Set,l=0,c=0;for(;l<r.length&&this.bn(r[l]);++l)o=o.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.fn.size>0){const d=this.fn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=r[l];if(!this.Sn(d,p)||!this.Dn(this.gn[c++],p))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.gn.length||!this.Dn(this.gn[c++],d))return!1}return!0}vn(){if(this.yn)return null;let e=new $e(it.comparator);const t=[];for(const r of this.pn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new nc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new nc(r.field,0))}for(const r of this.gn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new nc(r.field,r.dir==="asc"?0:1)));return new gc(gc.UNKNOWN_ID,this.collectionId,t,cl.empty())}bn(e){for(const t of this.pn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(s){var e,t;if(pe(s instanceof Ve||s instanceof Ke,20012),s instanceof Ve){if(s instanceof Av){const o=((t=(e=s.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>Ve.create(s.field,"==",l)))||[];return Ke.create(o,"or")}return s}const r=s.filters.map(o=>nE(o));return Ke.create(r,s.op)}function tA(s){if(s.getFilters().length===0)return[];const e=If(nE(s));return pe(rE(e),7391),Ef(e)||wf(e)?[e]:e.getFilters()}function Ef(s){return s instanceof Ve}function wf(s){return s instanceof Ke&&$f(s)}function rE(s){return Ef(s)||wf(s)||function(t){if(t instanceof Ke&&df(t)){for(const r of t.getFilters())if(!Ef(r)&&!wf(r))return!1;return!0}return!1}(s)}function If(s){if(pe(s instanceof Ve||s instanceof Ke,34018),s instanceof Ve)return s;if(s.filters.length===1)return If(s.filters[0]);const e=s.filters.map(r=>If(r));let t=Ke.create(e,s.op);return t=Rc(t),rE(t)?t:(pe(t instanceof Ke,64498),pe(Uo(t),40251),pe(t.filters.length>1,57927),t.filters.reduce((r,o)=>Yf(r,o)))}function Yf(s,e){let t;return pe(s instanceof Ve||s instanceof Ke,38388),pe(e instanceof Ve||e instanceof Ke,25473),t=s instanceof Ve?e instanceof Ve?function(o,l){return Ke.create([o,l],"and")}(s,e):by(s,e):e instanceof Ve?by(e,s):function(o,l){if(pe(o.filters.length>0&&l.filters.length>0,48005),Uo(o)&&Uo(l))return Iv(o,l.getFilters());const c=df(o)?o:l,d=df(o)?l:o,p=c.filters.map(_=>Yf(_,d));return Ke.create(p,"or")}(s,e),Rc(t)}function by(s,e){if(Uo(e))return Iv(e,s.getFilters());{const t=e.filters.map(r=>Yf(s,r));return Ke.create(t,"or")}}function Rc(s){if(pe(s instanceof Ve||s instanceof Ke,11850),s instanceof Ve)return s;const e=s.getFilters();if(e.length===1)return Rc(e[0]);if(Ev(s))return s;const t=e.map(o=>Rc(o)),r=[];return t.forEach(o=>{o instanceof Ve?r.push(o):o instanceof Ke&&(o.op===s.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:Ke.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.Cn=new Jf}addToCollectionParentIndex(e,t){return this.Cn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(mn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(mn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}}class Jf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new $e(je.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new $e(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="IndexedDbIndexManager",Qu=new Uint8Array(0);class rA{constructor(e,t){this.databaseId=t,this.Fn=new Jf,this.Mn=new Dr(r=>ms(r),(r,o)=>Tl(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const l={collectionId:r,parent:zt(o)};return My(e).put(l)}return M.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[W_(t),""],!1,!0);return My(e).J(o).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(sr(c.parent))}return r})}addFieldIndex(e,t){const r=Ka(e),o=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete o.indexId;const l=r.add(o);if(t.indexState){const c=Eo(e);return l.next(d=>{c.put(Ry(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Ka(e),o=Eo(e),l=vo(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ka(e),r=vo(e),o=Eo(e);return t.X().next(()=>r.X()).next(()=>o.X())}createTargetIndexes(e,t){return M.forEach(this.xn(t),r=>this.getIndexType(e,r).next(o=>{if(o===0||o===1){const l=new Dy(r).vn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=vo(e);let o=!0;const l=new Map;return M.forEach(this.xn(t),c=>this.On(e,c).next(d=>{o&&(o=!!d),l.set(c,d)})).next(()=>{if(o){let c=Re();const d=[];return M.forEach(l,(p,_)=>{J(Oy,`Using index ${function(se){return`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map(_e=>`${_e.fieldPath}:${_e.kind}`).join(",")}`}(p)} to execute ${ms(t)}`);const w=function(se,_e){const Ae=sf(_e);if(Ae===void 0)return null;for(const me of Tc(se,Ae.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null}(_,p),I=function(se,_e){const Ae=new Map;for(const me of Zi(_e))for(const C of Tc(se,me.fieldPath))switch(C.op){case"==":case"in":Ae.set(me.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return Ae.set(me.fieldPath.canonicalString(),C.value),Array.from(Ae.values())}return null}(_,p),N=function(se,_e){const Ae=[];let me=!0;for(const C of Zi(_e)){const T=C.kind===0?fy(se,C.fieldPath,se.startAt):py(se,C.fieldPath,se.startAt);Ae.push(T.value),me&&(me=T.inclusive)}return new Fo(Ae,me)}(_,p),B=function(se,_e){const Ae=[];let me=!0;for(const C of Zi(_e)){const T=C.kind===0?py(se,C.fieldPath,se.endAt):fy(se,C.fieldPath,se.endAt);Ae.push(T.value),me&&(me=T.inclusive)}return new Fo(Ae,me)}(_,p),Q=this.Nn(p,_,N),G=this.Nn(p,_,B),K=this.Bn(p,_,I),we=this.Ln(p.indexId,w,Q,N.inclusive,G,B.inclusive,K);return M.forEach(we,he=>r.Z(he,t.limit).next(se=>{se.forEach(_e=>{const Ae=ie.fromSegments(_e.documentKey);c.has(Ae)||(c=c.add(Ae),d.push(Ae))})}))}).next(()=>d)}return M.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=tA(Ke.create(e.filters,"and")).map(r=>pf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,r,o,l,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,l.length),_=p/(t!=null?t.length:1),w=[];for(let I=0;I<p;++I){const N=t?this.kn(t[I/_]):Qu,B=this.qn(e,N,r[I%_],o),Q=this.Qn(e,N,l[I%_],c),G=d.map(K=>this.qn(e,N,K,!0));w.push(...this.createRange(B,Q,G))}return w}qn(e,t,r,o){const l=new ss(e,ie.empty(),t,r);return o?l:l.Rn()}Qn(e,t,r,o){const l=new ss(e,ie.empty(),t,r);return o?l.Rn():l}On(e,t){const r=new Dy(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{let c=null;for(const d of l)r.wn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const o=this.xn(t);return M.forEach(o,l=>this.On(e,l).next(c=>{c?r!==0&&c.fields.length<function(p){let _=new $e(it.comparator),w=!1;for(const I of p.filters)for(const N of I.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?w=!0:_=_.add(N.field));for(const I of p.orderBy)I.field.isKeyField()||(_=_.add(I.field));return _.size+(w?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&o.length>1&&r===2?1:r)}$n(e,t){const r=new $a;for(const o of Zi(e)){const l=t.data.field(o.fieldPath);if(l==null)return null;const c=r.Tn(o.kind);is.Wt.vt(l,c)}return r.cn()}kn(e){const t=new $a;return is.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const r=new $a;return is.Wt.vt(jf(this.databaseId,t),r.Tn(function(l){const c=Zi(l);return c.length===0?0:c[c.length-1].kind}(e))),r.cn()}Bn(e,t,r){if(r===null)return[];let o=[];o.push(new $a);let l=0;for(const c of Zi(e)){const d=r[l++];for(const p of o)if(this.Kn(t,c.fieldPath)&&yl(d))o=this.Wn(o,c,d);else{const _=p.Tn(c.kind);is.Wt.vt(d,_)}}return this.Gn(o)}Nn(e,t,r){return this.Bn(e,t,r.position)}Gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}Wn(e,t,r){const o=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of o){const p=new $a;p.seed(d.cn()),is.Wt.vt(c,p.Tn(t.kind)),l.push(p)}return l}Kn(e,t){return!!e.filters.find(r=>r instanceof Ve&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ka(e),o=Eo(e);return(t?r.J(af,IDBKeyRange.bound(t,t)):r.J()).next(l=>{const c=[];return M.forEach(l,d=>o.get([d.indexId,this.uid]).next(p=>{c.push(function(w,I){const N=I?new cl(I.sequenceNumber,new mn(ys(I.readTime),new ie(sr(I.documentKey)),I.largestBatchId)):cl.empty(),B=w.fields.map(([Q,G])=>new nc(it.fromServerFormat(Q),G));return new gc(w.indexId,w.collectionGroup,B,N)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return l!==0?l:Ie(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Ka(e),l=Eo(e);return this.zn(e).next(c=>o.J(af,IDBKeyRange.bound(t,t)).next(d=>M.forEach(d,p=>l.put(Ry(p.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return M.forEach(t,(o,l)=>{const c=r.get(o.collectionGroup);return(c?M.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(d=>(r.set(o.collectionGroup,d),M.forEach(d,p=>this.jn(e,o,p).next(_=>{const w=this.Hn(l,p);return _.isEqual(w)?M.resolve():this.Jn(e,l,p,_,w)}))))})}Yn(e,t,r,o){return vo(e).put(o.Vn(this.uid,this.Un(r,t.key),t.key))}Zn(e,t,r,o){return vo(e).delete(o.mn(this.uid,this.Un(r,t.key),t.key))}jn(e,t,r){const o=vo(e);let l=new $e(si);return o.te({index:rv,range:IDBKeyRange.only([r.indexId,this.uid,cc(this.Un(r,t))])},(c,d)=>{l=l.add(new ss(r.indexId,t,Vy(d.arrayValue),Vy(d.directionalValue)))}).next(()=>l)}Hn(e,t){let r=new $e(si);const o=this.$n(t,e);if(o==null)return r;const l=sf(t);if(l!=null){const c=e.data.field(l.fieldPath);if(yl(c))for(const d of c.arrayValue.values||[])r=r.add(new ss(t.indexId,e.key,this.kn(d),o))}else r=r.add(new ss(t.indexId,e.key,Qu,o));return r}Jn(e,t,r,o,l){J(Oy,"Updating index entries for document '%s'",t.key);const c=[];return function(p,_,w,I,N){const B=p.getIterator(),Q=_.getIterator();let G=yo(B),K=yo(Q);for(;G||K;){let we=!1,he=!1;if(G&&K){const se=w(G,K);se<0?he=!0:se>0&&(we=!0)}else G!=null?he=!0:we=!0;we?(I(K),K=yo(Q)):he?(N(G),G=yo(B)):(G=yo(B),K=yo(Q))}}(o,l,si,d=>{c.push(this.Yn(e,t,r,d))},d=>{c.push(this.Zn(e,t,r,d))}),M.waitFor(c)}zn(e){let t=1;return Eo(e).te({index:nv,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>si(c,d)).filter((c,d,p)=>!d||si(c,p[d-1])!==0);const o=[];o.push(e);for(const c of r){const d=si(c,e),p=si(c,t);if(d===0)o[0]=e.Rn();else if(d>0&&p<0)o.push(c),o.push(c.Rn());else if(p>0)break}o.push(t);const l=[];for(let c=0;c<o.length;c+=2){if(this.Xn(o[c],o[c+1]))return[];const d=o[c].mn(this.uid,Qu,ie.empty()),p=o[c+1].mn(this.uid,Qu,ie.empty());l.push(IDBKeyRange.bound(d,p))}return l}Xn(e,t){return si(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ly)}getMinOffset(e,t){return M.mapArray(this.xn(t),r=>this.On(e,r).next(o=>o||ce(44426))).next(Ly)}}function My(s){return Et(s,pl)}function vo(s){return Et(s,el)}function Ka(s){return Et(s,Mf)}function Eo(s){return Et(s,Za)}function Ly(s){pe(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Df(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new mn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iE=41943040;class Ut{static withCacheSize(e){return new Ut(e,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(s,e,t){const r=s.store(Kn),o=s.store(Vo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.te({range:c},(w,I,N)=>(d++,N.delete()));l.push(p.next(()=>{pe(d===1,47070,{batchId:t.batchId})}));const _=[];for(const w of t.mutations){const I=Z_(e,w.key.path,t.batchId);l.push(o.delete(I)),_.push(w.key)}return M.waitFor(l).next(()=>_)}function Cc(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ce(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(iE,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);class eh{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.er={}}static bt(e,t,r,o){pe(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new eh(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oi(e).te({index:os,range:r},(o,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=Po(e),c=oi(e);return c.add({}).next(d=>{pe(typeof d=="number",49019);const p=new Hf(d,t,r,o),_=function(B,Q,G){const K=G.baseMutations.map(he=>Ac(B.wt,he)),we=G.mutations.map(he=>Ac(B.wt,he));return{userId:Q,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:K,mutations:we}}(this.serializer,this.userId,p),w=[];let I=new $e((N,B)=>Ie(N.canonicalString(),B.canonicalString()));for(const N of o){const B=Z_(this.userId,N.key.path,d);I=I.add(N.key.path.popLast()),w.push(c.put(_)),w.push(l.put(B,NT))}return I.forEach(N=>{w.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.er[d]=p.keys()}),M.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return oi(e).get(t).next(r=>r?(pe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),rs(this.serializer,r)):null)}tr(e,t){return this.er[t]?M.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.er[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return oi(e).te({index:os,range:o},(c,d,p)=>{d.userId===this.userId&&(pe(d.batchId>=r,47524,{nr:r}),l=rs(this.serializer,d)),p.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=us;return oi(e).te({index:os,range:t,reverse:!0},(o,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,us],[this.userId,Number.POSITIVE_INFINITY]);return oi(e).J(os,t).next(r=>r.map(o=>rs(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=rc(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return Po(e).te({range:o},(c,d,p)=>{const[_,w,I]=c,N=sr(w);if(_===this.userId&&t.path.isEqual(N))return oi(e).get(I).next(B=>{if(!B)throw ce(61480,{rr:c,batchId:I});pe(B.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:B.userId,batchId:I}),l.push(rs(this.serializer,B))});p.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $e(Ie);const o=[];return t.forEach(l=>{const c=rc(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Po(e).te({range:d},(_,w,I)=>{const[N,B,Q]=_,G=sr(B);N===this.userId&&l.path.isEqual(G)?r=r.add(Q):I.done()});o.push(p)}),M.waitFor(o).next(()=>this.ir(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=rc(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new $e(Ie);return Po(e).te({range:c},(p,_,w)=>{const[I,N,B]=p,Q=sr(N);I===this.userId&&r.isPrefixOf(Q)?Q.length===o&&(d=d.add(B)):w.done()}).next(()=>this.ir(e,d))}ir(e,t){const r=[],o=[];return t.forEach(l=>{o.push(oi(e).get(l).next(c=>{if(c===null)throw ce(35274,{batchId:l});pe(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(rs(this.serializer,c))}))}),M.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return sE(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),M.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),o=[];return Po(e).te({range:r},(l,c,d)=>{if(l[0]===this.userId){const p=sr(l[1]);o.push(p)}else d.done()}).next(()=>{pe(o.length===0,56720,{_r:o.map(l=>l.canonicalString())})})})}containsKey(e,t){return oE(e,this.userId,t)}ar(e){return aE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:us,lastStreamToken:""})}}function oE(s,e,t){const r=rc(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Po(s).te({range:l,ee:!0},(d,p,_)=>{const[w,I,N]=d;w===e&&I===o&&(c=!0),_.done()}).next(()=>c)}function oi(s){return Et(s,Kn)}function Po(s){return Et(s,Vo)}function aE(s){return Et(s,dl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new _s(0)}static lr(){return new _s(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const r=new _s(t.highestTargetId);return t.highestTargetId=r.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>ye.fromTimestamp(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.hr(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pr(e,o)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(r=>(r.targetCount+=1,this.Ir(t,r),this.Pr(e,r))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>wo(e).delete(t.targetId)).next(()=>this.hr(e)).next(r=>(pe(r.targetCount>0,8065),r.targetCount-=1,this.Pr(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return wo(e).te((c,d)=>{const p=Xa(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,l.push(this.removeTargetData(e,p)))}).next(()=>M.waitFor(l)).next(()=>o)}forEachTarget(e,t){return wo(e).te((r,o)=>{const l=Xa(o);t(l)})}hr(e){return Uy(e).get(vc).next(t=>(pe(t!==null,2888),t))}Pr(e,t){return Uy(e).put(vc,t)}Tr(e,t){return wo(e).put(eE(this.serializer,t))}Ir(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ms(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return wo(e).te({range:o,index:tv},(c,d,p)=>{const _=Xa(d);Tl(t,_.target)&&(l=_,p.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=ui(e);return t.forEach(c=>{const d=zt(c.path);o.push(l.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(e,r,c))}),M.waitFor(o)}removeMatchingKeys(e,t,r){const o=ui(e);return M.forEach(t,l=>{const c=zt(l.path);return M.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=ui(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ui(e);let l=Re();return o.te({range:r,ee:!0},(c,d,p)=>{const _=sr(c[1]),w=new ie(_);l=l.add(w)}).next(()=>l)}containsKey(e,t){const r=zt(t.path),o=IDBKeyRange.bound([r],[W_(r)],!1,!0);let l=0;return ui(e).te({index:Of,ee:!0,range:o},([c,d],p,_)=>{c!==0&&(l++,_.done())}).next(()=>l>0)}Rt(e,t){return wo(e).get(t).next(r=>r?Xa(r):null)}}function wo(s){return Et(s,Do)}function Uy(s){return Et(s,cs)}function ui(s){return Et(s,bo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="LruGarbageCollector",lE=1048576;function By([s,e],[t,r]){const o=Ie(s,t);return o===0?Ie(e,r):o}class sA{constructor(e){this.Er=e,this.buffer=new $e(By),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();By(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){J(zy,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wi(t)?J(zy,"Ignoring IndexedDB error during garbage collection: ",t):await Es(t)}await this.mr(3e5)})}}class oA{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Pn.le);const r=new sA(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Fy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fy):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,l,c,d,p,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,c=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(r=I,d=Date.now(),this.removeTargets(e,r,t))).next(I=>(l=I,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(_=Date.now(),Io()<=xe.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${I} documents in `+(_-p)+`ms
Total Duration: ${_-w}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I})))}}function cE(s,e){return new oA(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t){this.db=e,this.garbageCollector=cE(this,t)}pr(e){const t=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.Sr(e,(r,o)=>t(o))}addReference(e,t,r){return Xu(e,r)}removeReference(e,t,r){return Xu(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xu(e,t)}Dr(e,t){return function(o,l){let c=!1;return aE(o).ne(d=>oE(o,d,l).next(p=>(p&&(c=!0),M.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Sr(e,(c,d)=>{if(d<=t){const p=this.Dr(e,c).next(_=>{if(!_)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,ye.min()),ui(e).delete(function(I){return[0,zt(I.path)]}(c))))});o.push(p)}}).next(()=>M.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xu(e,t)}Sr(e,t){const r=ui(e);let o,l=Pn.le;return r.te({index:Of},([c,d],{path:p,sequenceNumber:_})=>{c===0?(l!==Pn.le&&t(new ie(sr(o)),l),l=_,o=p):l=Pn.le}).next(()=>{l!==Pn.le&&t(new ie(sr(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xu(s,e){return ui(s).put(function(r,o){return{targetId:0,path:zt(r.path),sequenceNumber:o}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.changes=new Dr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yi(e).put(r)}removeEntry(e,t,r){return Yi(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Pc(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.vr(e,r)))}getEntry(e,t){let r=at.newInvalidDocument(t);return Yi(e).te({index:ic,range:IDBKeyRange.only(qa(t))},(o,l)=>{r=this.Cr(t,l)}).next(()=>r)}Fr(e,t){let r={size:0,document:at.newInvalidDocument(t)};return Yi(e).te({index:ic,range:IDBKeyRange.only(qa(t))},(o,l)=>{r={document:this.Cr(t,l),size:Cc(l)}}).next(()=>r)}getEntries(e,t){let r=pn();return this.Mr(e,t,(o,l)=>{const c=this.Cr(o,l);r=r.insert(o,c)}).next(()=>r)}Or(e,t){let r=pn(),o=new et(ie.comparator);return this.Mr(e,t,(l,c)=>{const d=this.Cr(l,c);r=r.insert(l,d),o=o.insert(l,Cc(c))}).next(()=>({documents:r,Nr:o}))}Mr(e,t,r){if(t.isEmpty())return M.resolve();let o=new $e(Ky);t.forEach(p=>o=o.add(p));const l=IDBKeyRange.bound(qa(o.first()),qa(o.last())),c=o.getIterator();let d=c.getNext();return Yi(e).te({index:ic,range:l},(p,_,w)=>{const I=ie.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&Ky(d,I)<0;)r(d,null),d=c.getNext();d&&d.isEqual(I)&&(r(d,_),d=c.hasNext()?c.getNext():null),d?w.H(qa(d)):w.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,o,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Pc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yi(e).J(IDBKeyRange.bound(d,p,!0)).next(_=>{l==null||l.incrementDocumentReadCount(_.length);let w=pn();for(const I of _){const N=this.Cr(ie.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);N.isFoundDocument()&&(Sl(t,N)||o.has(N.key))&&(w=w.insert(N.key,N))}return w})}getAllFromCollectionGroup(e,t,r,o){let l=pn();const c=$y(t,r),d=$y(t,mn.max());return Yi(e).te({index:ev,range:IDBKeyRange.bound(c,d,!0)},(p,_,w)=>{const I=this.Cr(ie.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);l=l.insert(I.key,I),l.size===o&&w.done()}).next(()=>l)}newChangeBuffer(e){return new uA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jy(e).get(of).next(t=>(pe(!!t,20021),t))}vr(e,t){return jy(e).put(of,t)}Cr(e,t){if(t){const r=WS(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ye.min())))return r}return at.newInvalidDocument(e)}}function dE(s){return new lA(s)}class uA extends hE{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new Dr(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new $e((l,c)=>Ie(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Lr.get(l);if(t.push(this.Br.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=Ay(this.Br.serializer,c);o=o.add(l.path.popLast());const _=Cc(p);r+=_-d.size,t.push(this.Br.addEntry(e,l,p))}else if(r-=d.size,this.trackRemovals){const p=Ay(this.Br.serializer,c.convertToNoDocument(ye.min()));t.push(this.Br.addEntry(e,l,p))}}),o.forEach(l=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Br.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(r=>(this.Lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:r,Nr:o})=>(o.forEach((l,c)=>{this.Lr.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function jy(s){return Et(s,fl)}function Yi(s){return Et(s,_c)}function qa(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $y(s,e){const t=e.documentKey.path.toArray();return[s,Pc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ky(s,e){const t=s.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=Ie(t[l],r[l]),o)return o;return o=Ie(t.length,r.length),o||(o=Ie(t[t.length-2],r[r.length-2]),o||Ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&il(r.mutation,o,Rn.empty(),st.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Re()){const o=or();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(l=>{let c=Wa();return l.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=or();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Re()))}populateOverlays(e,t,r){const o=[];return r.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,o){let l=pn();const c=rl(),d=function(){return rl()}();return t.forEach((p,_)=>{const w=r.get(_.key);o.has(_.key)&&(w===void 0||w.mutation instanceof Ii)?l=l.insert(_.key,_):w!==void 0?(c.set(_.key,w.mutation.getFieldMask()),il(w.mutation,_,w.mutation.getFieldMask(),st.now())):c.set(_.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((_,w)=>c.set(_,w)),t.forEach((_,w)=>{var I;return d.set(_,new cA(w,(I=c.get(_))!==null&&I!==void 0?I:null))}),d))}recalculateAndSaveOverlays(e,t){const r=rl();let o=new et((c,d)=>c-d),l=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const _=t.get(p);if(_===null)return;let w=r.get(p)||Rn.empty();w=d.applyToLocalView(_,w),r.set(p,w);const I=(o.get(d.batchId)||Re()).add(p);o=o.insert(d.batchId,I)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,w=p.value,I=xv();w.forEach(N=>{if(!l.has(N)){const B=Mv(t.get(N),r.get(N));B!==null&&I.set(N,B),l=l.add(N)}}),c.push(this.documentOverlayCache.saveOverlays(e,_,I))}return M.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):M.resolve(or());let d=ul,p=l;return c.next(_=>M.forEach(_,(w,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),l.get(w)?M.resolve():this.remoteDocumentCache.getEntry(e,w).next(N=>{p=p.insert(w,N)}))).next(()=>this.populateOverlays(e,_,l)).next(()=>this.computeViews(e,p,_,Re())).next(w=>({batchId:d,changes:kv(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(r=>{let o=Wa();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let c=Wa();return this.indexManager.getCollectionParents(e,l).next(d=>M.forEach(d,p=>{const _=function(I,N){return new Gc(N,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next(w=>{w.forEach((I,N)=>{c=c.insert(I,N)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o))).next(c=>{l.forEach((p,_)=>{const w=_.getKey();c.get(w)===null&&(c=c.insert(w,at.newInvalidDocument(w)))});let d=Wa();return c.forEach((p,_)=>{const w=l.get(p);w!==void 0&&il(w.mutation,_,Rn.empty(),st.now()),Sl(t,_)&&(d=d.insert(p,_))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return M.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Gt(o.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:tE(o.bundledQuery),readTime:Gt(o.readTime)}}(t)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.overlays=new et(ie.comparator),this.Qr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){const r=or();return M.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.St(e,t,l)}),M.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){const o=or(),l=t.length+1,c=new ie(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&p.largestBatchId>r&&o.set(p.getKey(),p)}return M.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new et((_,w)=>_-w);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let w=l.get(_.largestBatchId);w===null&&(w=or(),l=l.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const d=or(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>d.set(_,w)),!(d.size()>=o)););return M.resolve(d)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Wf(t,r));let l=this.Qr.get(t);l===void 0&&(l=Re(),this.Qr.set(t,l)),this.Qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this.$r=new $e(Ct.Ur),this.Kr=new $e(Ct.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Ct(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Ct(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new ie(new je([])),r=new Ct(t,e),o=new Ct(t,e+1),l=[];return this.Kr.forEachInRange([r,o],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ie(new je([])),r=new Ct(t,e),o=new Ct(t,e+1);let l=Re();return this.Kr.forEachInRange([r,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Ct(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ct{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ie.comparator(e.key,t.key)||Ie(e.Zr,t.Zr)}static Wr(e,t){return Ie(e.Zr,t.Zr)||ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new $e(Ct.Ur)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Hf(l,t,r,o);this.mutationQueue.push(c);for(const d of o)this.Xr=this.Xr.add(new Ct(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return M.resolve(c)}lookupMutationBatch(e,t){return M.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),l=o<0?0:o;return M.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?us:this.nr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,o],c=>{const d=this.ei(c.Zr);l.push(d)}),M.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $e(Ie);return t.forEach(o=>{const l=new Ct(o,0),c=new Ct(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),M.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;ie.isDocumentKey(l)||(l=l.child(""));const c=new Ct(new ie(l),0);let d=new $e(Ie);return this.Xr.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(d=d.add(p.Zr)),!0)},c),M.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){pe(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return M.forEach(t.mutations,o=>{const l=new Ct(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Ct(t,0),o=this.Xr.firstAfterOrEqual(r);return M.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.ii=e,this.docs=function(){return new et(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=pn();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():at.newInvalidDocument(o))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=pn();const c=t.path,d=new ie(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:_,value:{document:w}}=p.getNext();if(!c.isPrefixOf(_.path))break;_.path.length>c.length+1||Df(Q_(w),r)<=0||(o.has(w.key)||Sl(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return M.resolve(l)}getAllFromCollectionGroup(e,t,r,o){ce(9500)}si(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gA(this)}getSize(e){return M.resolve(this.size)}}class gA extends hE{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.persistence=e,this.oi=new Dr(t=>ms(t),Tl),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this._i=0,this.ai=new Zf,this.targetCount=0,this.ui=_s.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),M.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new _s(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Tr(t),M.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),M.waitFor(l).next(()=>o)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),M.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),M.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){this.ci={},this.overlays={},this.li=new Pn(0),this.hi=!1,this.hi=!0,this.Pi=new fA,this.referenceDelegate=e(this),this.Ti=new yA(this),this.indexManager=new nA,this.remoteDocumentCache=function(o){return new mA(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Zv(t),this.Ei=new hA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new pA(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);const o=new _A(this.li.next());return this.referenceDelegate.di(),r(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(e,t){return M.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class _A extends Y_{constructor(e){super(),this.currentSequenceNumber=e}}class th{constructor(e){this.persistence=e,this.Vi=new Zf,this.mi=null}static fi(e){return new th(e)}get gi(){if(this.mi)return this.mi;throw ce(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.gi,r=>{const o=ie.fromPath(r);return this.pi(e,o).next(l=>{l||t.removeEntry(o,ye.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return M.or([()=>M.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class kc{constructor(e,t){this.persistence=e,this.yi=new Dr(r=>zt(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=cE(this,t)}static fi(e,t){return new kc(e,t)}di(){}Ai(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return M.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(l=>l?M.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(e,c=>this.Dr(e,c,t).next(d=>{d||(r++,l.removeEntry(c,ye.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),M.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oc(e.data.value)),t}Dr(e,t,r){return M.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return M.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.serializer=e}q(e,t,r,o){const l=new zc("createOrUpgrade",t);r<1&&o>=1&&(function(p){p.createObjectStore(Il)}(e),function(p){p.createObjectStore(dl,{keyPath:xT}),p.createObjectStore(Kn,{keyPath:ty,autoIncrement:!0}).createIndex(os,ny,{unique:!0}),p.createObjectStore(Vo)}(e),qy(e),function(p){p.createObjectStore(es)}(e));let c=M.resolve();return r<3&&o>=3&&(r!==0&&(function(p){p.deleteObjectStore(bo),p.deleteObjectStore(Do),p.deleteObjectStore(cs)}(e),qy(e)),c=c.next(()=>function(p){const _=p.store(cs),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ye.min().toTimestamp(),targetCount:0};return _.put(vc,w)}(l))),r<4&&o>=4&&(r!==0&&(c=c.next(()=>function(p,_){return _.store(Kn).J().next(I=>{p.deleteObjectStore(Kn),p.createObjectStore(Kn,{keyPath:ty,autoIncrement:!0}).createIndex(os,ny,{unique:!0});const N=_.store(Kn),B=I.map(Q=>N.put(Q));return M.waitFor(B)})}(e,l))),c=c.next(()=>{(function(p){p.createObjectStore(Oo,{keyPath:UT})})(e)})),r<5&&o>=5&&(c=c.next(()=>this.wi(l))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore(fl)}(e),this.bi(l)))),r<7&&o>=7&&(c=c.next(()=>this.Si(l))),r<8&&o>=8&&(c=c.next(()=>this.Di(e,l))),r<9&&o>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&o>=10&&(c=c.next(()=>this.Ci(l))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore(jc,{keyPath:zT})})(e),function(p){p.createObjectStore($c,{keyPath:BT})}(e)})),r<12&&o>=12&&(c=c.next(()=>{(function(p){const _=p.createObjectStore(Kc,{keyPath:WT});_.createIndex(lf,QT,{unique:!1}),_.createIndex(iv,XT,{unique:!1})})(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore(_c,{keyPath:VT});_.createIndex(ic,DT),_.createIndex(ev,bT)}(e)).next(()=>this.Fi(e,l)).next(()=>e.deleteObjectStore(es))),r<14&&o>=14&&(c=c.next(()=>this.Mi(e,l))),r<15&&o>=15&&(c=c.next(()=>function(p){p.createObjectStore(Mf,{keyPath:jT,autoIncrement:!0}).createIndex(af,$T,{unique:!1}),p.createObjectStore(Za,{keyPath:KT}).createIndex(nv,qT,{unique:!1}),p.createObjectStore(el,{keyPath:HT}).createIndex(rv,GT,{unique:!1})}(e))),r<16&&o>=16&&(c=c.next(()=>{t.objectStore(Za).clear()}).next(()=>{t.objectStore(el).clear()})),r<17&&o>=17&&(c=c.next(()=>{(function(p){p.createObjectStore(Lf,{keyPath:YT})})(e)})),r<18&&o>=18&&V_()&&(c=c.next(()=>{t.objectStore(Za).clear()}).next(()=>{t.objectStore(el).clear()})),c}bi(e){let t=0;return e.store(es).te((r,o)=>{t+=Cc(o)}).next(()=>{const r={byteSize:t};return e.store(fl).put(of,r)})}wi(e){const t=e.store(dl),r=e.store(Kn);return t.J().next(o=>M.forEach(o,l=>{const c=IDBKeyRange.bound([l.userId,us],[l.userId,l.lastAcknowledgedBatchId]);return r.J(os,c).next(d=>M.forEach(d,p=>{pe(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const _=rs(this.serializer,p);return sE(e,l.userId,_).next(()=>{})}))}))}Si(e){const t=e.store(bo),r=e.store(es);return e.store(cs).get(vc).next(o=>{const l=[];return r.te((c,d)=>{const p=new je(c),_=function(I){return[0,zt(I)]}(p);l.push(t.get(_).next(w=>w?M.resolve():(I=>t.put({targetId:0,path:zt(I),sequenceNumber:o.highestListenSequenceNumber}))(p)))}).next(()=>M.waitFor(l))})}Di(e,t){e.createObjectStore(pl,{keyPath:FT});const r=t.store(pl),o=new Jf,l=c=>{if(o.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:zt(p)})}};return t.store(es).te({ee:!0},(c,d)=>{const p=new je(c);return l(p.popLast())}).next(()=>t.store(Vo).te({ee:!0},([c,d,p],_)=>{const w=sr(d);return l(w.popLast())}))}Ci(e){const t=e.store(Do);return t.te((r,o)=>{const l=Xa(o),c=eE(this.serializer,l);return t.put(c)})}Fi(e,t){const r=t.store(es),o=[];return r.te((l,c)=>{const d=t.store(_c),p=function(I){return I.document?new ie(je.fromString(I.document.name).popFirst(5)):I.noDocument?ie.fromSegments(I.noDocument.path):I.unknownDocument?ie.fromSegments(I.unknownDocument.path):ce(36783)}(c).path.toArray(),_={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(d.put(_))}).next(()=>M.waitFor(o))}Mi(e,t){const r=t.store(Kn),o=dE(this.serializer),l=new ep(th.fi,this.serializer.wt);return r.J().next(c=>{const d=new Map;return c.forEach(p=>{var _;let w=(_=d.get(p.userId))!==null&&_!==void 0?_:Re();rs(this.serializer,p).keys().forEach(I=>w=w.add(I)),d.set(p.userId,w)}),M.forEach(d,(p,_)=>{const w=new qt(_),I=Zc.bt(this.serializer,w),N=l.getIndexManager(w),B=eh.bt(w,this.serializer,N,l.referenceDelegate);return new fE(o,B,I,N).recalculateAndSaveOverlaysForDocumentKeys(new uf(t,Pn.le),p).next()})})}}function qy(s){s.createObjectStore(bo,{keyPath:MT}).createIndex(Of,LT,{unique:!0}),s.createObjectStore(Do,{keyPath:"targetId"}).createIndex(tv,OT,{unique:!0}),s.createObjectStore(cs)}const ai="IndexedDbPersistence",$d=18e5,Kd=5e3,qd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",EA="main";class tp{constructor(e,t,r,o,l,c,d,p,_,w,I=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.xi=l,this.window=c,this.document=d,this.Oi=_,this.Ni=w,this.Bi=I,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=N=>Promise.resolve(),!tp.C())throw new le(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aA(this,o),this.Ui=t+EA,this.serializer=new Zv(p),this.Ki=new pi(this.Ui,this.Bi,new vA(this.serializer)),this.Pi=new XS,this.Ti=new iA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dE(this.serializer),this.Ei=new QS,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,w===!1&&Ht(ai,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(H.FAILED_PRECONDITION,qd);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Pn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(wi(e))return J(ai,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J(ai,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Ha(e).get(go).next(t=>M.resolve(this.ts(t)))}ns(e){return Yu(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,$d)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Et(t,Oo);return r.J().next(o=>{const l=this._s(o,$d),c=o.filter(d=>l.indexOf(d)===-1);return M.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?M.resolve(!0):Ha(e).get(go).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Kd)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new le(H.FAILED_PRECONDITION,qd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yu(e).J().next(r=>this._s(r,Kd).find(o=>{if(this.clientId!==o.clientId){const l=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&J(ai,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[Il,Oo],e=>{const t=new uf(e,Pn.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>Yu(e).J().next(t=>this._s(t,$d).map(r=>r.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return eh.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rA(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Zc.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,r){J(ai,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",l=function(p){return p===18?eS:p===17?lv:p===16?ZT:p===15?Ff:p===14?av:p===13?ov:p===12?JT:p===11?sv:void ce(60245)}(this.Bi);let c;return this.Ki.runTransaction(e,o,l,d=>(c=new uf(d,this.li?this.li.next():Pn.le),t==="readwrite-primary"?this.Yi(c).next(p=>!!p||this.Zi(c)).next(p=>{if(!p)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new le(H.FAILED_PRECONDITION,X_);return r(c)}).next(p=>this.es(c).next(()=>p)):this.Es(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Es(e){return Ha(e).get(go).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Kd)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(H.FAILED_PRECONDITION,qd)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ha(e).put(go,t)}static C(){return pi.C()}Xi(e){const t=Ha(e);return t.get(go).next(r=>this.ts(r)?(J(ai,"Releasing primary lease."),t.delete(go)):M.resolve())}ss(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const t=/(?:Version|Mobile)\/1[456]/;N_()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const r=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return J(ai,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ht(ai,"Failed to get zombied client id.",r),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ha(s){return Et(s,Il)}function Yu(s){return Et(s,Oo)}function wA(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=Re(),o=Re();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new np(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return N_()?8:J_(sn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ws(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(e,t,o,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new IA;return this.Ss(e,t,c).next(d=>{if(l.result=d,this.fs)return this.Ds(e,t,c,d.size)})}).next(()=>l.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(Io()<=xe.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",To(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),M.resolve()):(Io()<=xe.DEBUG&&J("QueryEngine","Query:",To(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Io()<=xe.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",To(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(t))):M.resolve())}ws(e,t){if(my(t))return M.resolve(null);let r=Cn(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=mf(t,null,"F"),r=Cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Re(...l);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.vs(t,d);return this.Cs(t,_,c,p.readTime)?this.ws(e,mf(t,null,"F")):this.Fs(e,_,t,p)}))})))}bs(e,t,r,o){return my(t)||o.isEqual(ye.min())?M.resolve(null):this.ys.getDocuments(e,r).next(l=>{const c=this.vs(t,l);return this.Cs(t,c,r,o)?M.resolve(null):(Io()<=xe.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(t)),this.Fs(e,c,t,TT(o,ul)).next(d=>d))})}vs(e,t){let r=new $e(Rv(e));return t.forEach((o,l)=>{Sl(e,l)&&(r=r.add(l))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,r){return Io()<=xe.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",To(t)),this.ys.getDocumentsMatchingQuery(e,t,mn.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="LocalStore",TA=3e8;class SA{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new et(Ie),this.Os=new Dr(l=>ms(l),Tl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fE(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function mE(s,e,t,r){return new SA(s,e,t,r)}async function gE(s,e){const t=Se(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let p=Re();for(const _ of o){c.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of l){d.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(_=>({ks:_,removedBatchIds:c,addedBatchIds:d}))})})}function AA(s,e){const t=Se(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,_,w){const I=_.batch,N=I.keys();let B=M.resolve();return N.forEach(Q=>{B=B.next(()=>w.getEntry(p,Q)).next(G=>{const K=_.docVersions.get(Q);pe(K!==null,48541),G.version.compareTo(K)<0&&(I.applyToRemoteDocument(G,_),G.isValidDocument()&&(G.setReadTime(_.commitVersion),w.addEntry(G)))})}),B.next(()=>d.mutationQueue.removeMutationBatch(p,I))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Re();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(p=p.add(d.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function yE(s){const e=Se(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function PA(s,e){const t=Se(s),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const d=[];e.targetChanges.forEach((w,I)=>{const N=o.get(I);if(!N)return;d.push(t.Ti.removeMatchingKeys(l,w.removedDocuments,I).next(()=>t.Ti.addMatchingKeys(l,w.addedDocuments,I)));let B=N.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?B=B.withResumeToken(pt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):w.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(w.resumeToken,r)),o=o.insert(I,B),function(G,K,we){return G.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=TA?!0:we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0}(N,B,w)&&d.push(t.Ti.updateTargetData(l,B))});let p=pn(),_=Re();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),d.push(RA(l,c,e.documentUpdates).next(w=>{p=w.qs,_=w.Qs})),!r.isEqual(ye.min())){const w=t.Ti.getLastRemoteSnapshotVersion(l).next(I=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(w)}return M.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,_)).next(()=>p)}).then(l=>(t.xs=o,l))}function RA(s,e,t){let r=Re(),o=Re();return t.forEach(l=>r=r.add(l)),e.getEntries(s,r).next(l=>{let c=pn();return t.forEach((d,p)=>{const _=l.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(ye.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):J(rp,"Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{qs:c,Qs:o}})}function CA(s,e){const t=Se(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=us),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kA(s,e){const t=Se(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(l=>l?(o=l,M.resolve(o)):t.Ti.allocateTargetId(r).next(c=>(o=new Rr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Tf(s,e,t){const r=Se(s),o=r.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!wi(c))throw c;J(rp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function Hy(s,e,t){const r=Se(s);let o=ye.min(),l=Re();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,_,w){const I=Se(p),N=I.Os.get(w);return N!==void 0?M.resolve(I.xs.get(N)):I.Ti.getTargetData(_,w)}(r,c,Cn(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(p=>{l=p})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,t?o:ye.min(),t?l:Re())).next(d=>(xA(r,gS(e),d),{documents:d,$s:l})))}function xA(s,e,t){let r=s.Ns.get(e)||ye.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Ns.set(e,r)}class Gy{constructor(){this.activeTargetIds=IS()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _E{constructor(){this.xo=new Gy,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Gy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="ConnectivityMonitor";class Qy{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){J(Wy,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){J(Wy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function Sf(){return Ju===null?Ju=function(){return 268435456+Math.round(2147483648*Math.random())}():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="RestConnection",VA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DA{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Ec?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,l){const c=Sf(),d=this.jo(e,t.toUriEncodedString());J(Hd,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,l);const{host:_}=new URL(d),w=Fc(_);return this.Jo(e,d,p,r,w).then(I=>(J(Hd,`Received RPC '${e}' ${c}: `,I),I),I=>{throw ll(Hd,`RPC '${e}' ${c} failed with error: `,I,"url: ",d,"request:",r),I})}Yo(e,t,r,o,l,c){return this.zo(e,t,r,o,l)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}jo(e,t){const r=VA[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class OA extends DA{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,l){const c=Sf();return new Promise((d,p)=>{const _=new z_;_.setWithCredentials(!0),_.listenOnce(B_.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case tc.NO_ERROR:const I=_.getResponseJson();J(Ft,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),d(I);break;case tc.TIMEOUT:J(Ft,`RPC '${e}' ${c} timed out`),p(new le(H.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const N=_.getStatus();if(J(Ft,`RPC '${e}' ${c} failed with status:`,N,"response text:",_.getResponseText()),N>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const Q=B==null?void 0:B.error;if(Q&&Q.status&&Q.message){const G=function(we){const he=we.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(he)>=0?he:H.UNKNOWN}(Q.status);p(new le(G,Q.message))}else p(new le(H.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new le(H.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{h_:e,streamId:c,P_:_.getLastErrorCode(),T_:_.getLastError()})}}finally{J(Ft,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(o);J(Ft,`RPC '${e}' ${c} sending request:`,o),_.send(t,"POST",w,r,15)})}I_(e,t,r){const o=Sf(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=K_(),d=$_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const w=l.join("");J(Ft,`Creating RPC '${e}' stream ${o}: ${w}`,p);const I=c.createWebChannel(w,p);this.E_(I);let N=!1,B=!1;const Q=new bA({Zo:K=>{B?J(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,K):(N||(J(Ft,`Opening RPC '${e}' stream ${o} transport.`),I.open(),N=!0),J(Ft,`RPC '${e}' stream ${o} sending:`,K),I.send(K))},Xo:()=>I.close()}),G=(K,we,he)=>{K.listen(we,se=>{try{he(se)}catch(_e){setTimeout(()=>{throw _e},0)}})};return G(I,Ga.EventType.OPEN,()=>{B||(J(Ft,`RPC '${e}' stream ${o} transport opened.`),Q.__())}),G(I,Ga.EventType.CLOSE,()=>{B||(B=!0,J(Ft,`RPC '${e}' stream ${o} transport closed`),Q.u_(),this.d_(I))}),G(I,Ga.EventType.ERROR,K=>{B||(B=!0,ll(Ft,`RPC '${e}' stream ${o} transport errored. Name:`,K.name,"Message:",K.message),Q.u_(new le(H.UNAVAILABLE,"The operation could not be completed")))}),G(I,Ga.EventType.MESSAGE,K=>{var we;if(!B){const he=K.data[0];pe(!!he,16349);const se=he,_e=(se==null?void 0:se.error)||((we=se[0])===null||we===void 0?void 0:we.error);if(_e){J(Ft,`RPC '${e}' stream ${o} received error:`,_e);const Ae=_e.status;let me=function(P){const k=dt[P];if(k!==void 0)return Uv(k)}(Ae),C=_e.message;me===void 0&&(me=H.INTERNAL,C="Unknown error status: "+Ae+" with message "+_e.message),B=!0,Q.u_(new le(me,C)),I.close()}else J(Ft,`RPC '${e}' stream ${o} received:`,he),Q.c_(he)}}),G(d,j_.STAT_EVENT,K=>{K.stat===nf.PROXY?J(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):K.stat===nf.NOPROXY&&J(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Q.a_()},0),Q}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){return typeof window<"u"?window:null}function hc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(s){return new FS(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t,r=1e3,o=1.5,l=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-r);o>0&&J("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="PersistentStream";class EE{constructor(e,t,r,o,l,c,d,p){this.xi=e,this.S_=r,this.D_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new vE(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===t&&this.z_(r,o)},r=>{e(()=>{const o=new le(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return J(Xy,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(J(Xy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LA extends EE{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=BS(this.serializer,e),r=function(l){if(!("targetChange"in l))return ye.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ye.min():c.readTime?Gt(c.readTime):ye.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=_f(this.serializer),t.addTarget=function(l,c){let d;const p=c.target;if(d=Ic(p)?{documents:Gv(l,p)}:{query:Wv(l,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=jv(l,c.resumeToken);const _=gf(l,c.expectedCount);_!==null&&(d.expectedCount=_)}else if(c.snapshotVersion.compareTo(ye.min())>0){d.readTime=jo(l,c.snapshotVersion.toTimestamp());const _=gf(l,c.expectedCount);_!==null&&(d.expectedCount=_)}return d}(this.serializer,e);const r=$S(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=_f(this.serializer),t.removeTarget=e,this.Q_(t)}}class FA extends EE{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=jS(e.writeResults,e.commitTime),r=Gt(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=_f(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ac(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{}class zA extends UA{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,yf(t,r),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(H.UNKNOWN,l.toString())})}Yo(e,t,r,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,yf(t,r),o,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(H.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class BA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ht(t),this.ua=!1):J("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="RemoteStore";class jA{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Is(this)&&(J(vs,"Restarting streams for network reachability change."),await async function(p){const _=Se(p);_.da.add(4),await Pl(_),_.Va.set("Unknown"),_.da.delete(4),await rh(_)}(this))})}),this.Va=new BA(r,o)}}async function rh(s){if(Is(s))for(const e of s.Aa)await e(!0)}async function Pl(s){for(const e of s.Aa)await e(!1)}function wE(s,e){const t=Se(s);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),ap(t)?op(t):Go(t).N_()&&sp(t,e))}function ip(s,e){const t=Se(s),r=Go(t);t.Ea.delete(e),r.N_()&&IE(t,e),t.Ea.size===0&&(r.N_()?r.k_():Is(t)&&t.Va.set("Unknown"))}function sp(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(s).Z_(e)}function IE(s,e){s.ma.Ke(e),Go(s).X_(e)}function op(s){s.ma=new bS({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Go(s).start(),s.Va.ca()}function ap(s){return Is(s)&&!Go(s).O_()&&s.Ea.size>0}function Is(s){return Se(s).da.size===0}function TE(s){s.ma=void 0}async function $A(s){s.Va.set("Online")}async function KA(s){s.Ea.forEach((e,t)=>{sp(s,e)})}async function qA(s,e){TE(s),ap(s)?(s.Va.Pa(e),op(s)):s.Va.set("Unknown")}async function HA(s,e,t){if(s.Va.set("Online"),e instanceof Bv&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ea.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ea.delete(d),o.ma.removeTarget(d))}(s,e)}catch(r){J(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xc(s,r)}else if(e instanceof uc?s.ma.Xe(e):e instanceof zv?s.ma.ot(e):s.ma.nt(e),!t.isEqual(ye.min()))try{const r=await yE(s.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.Ea.get(_);w&&l.Ea.set(_,w.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,_)=>{const w=l.Ea.get(p);if(!w)return;l.Ea.set(p,w.withResumeToken(pt.EMPTY_BYTE_STRING,w.snapshotVersion)),IE(l,p);const I=new Rr(w.target,p,_,w.sequenceNumber);sp(l,I)}),l.remoteSyncer.applyRemoteEvent(d)}(s,t)}catch(r){J(vs,"Failed to raise snapshot:",r),await xc(s,r)}}async function xc(s,e,t){if(!wi(e))throw e;s.da.add(1),await Pl(s),s.Va.set("Offline"),t||(t=()=>yE(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{J(vs,"Retrying IndexedDB access"),await t(),s.da.delete(1),await rh(s)})}function SE(s,e){return e().catch(t=>xc(s,t,e))}async function Rl(s){const e=Se(s),t=_i(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:us;for(;GA(e);)try{const o=await CA(e.localStore,r);if(o===null){e.Ia.length===0&&t.k_();break}r=o.batchId,WA(e,o)}catch(o){await xc(e,o)}AE(e)&&PE(e)}function GA(s){return Is(s)&&s.Ia.length<10}function WA(s,e){s.Ia.push(e);const t=_i(s);t.N_()&&t.ea&&t.ta(e.mutations)}function AE(s){return Is(s)&&!_i(s).O_()&&s.Ia.length>0}function PE(s){_i(s).start()}async function QA(s){_i(s).ia()}async function XA(s){const e=_i(s);for(const t of s.Ia)e.ta(t.mutations)}async function YA(s,e,t){const r=s.Ia.shift(),o=Gf.from(r,e,t);await SE(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Rl(s)}async function JA(s,e){e&&_i(s).ea&&await async function(r,o){if(function(c){return VS(c)&&c!==H.ABORTED}(o.code)){const l=r.Ia.shift();_i(r).L_(),await SE(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Rl(r)}}(s,e),AE(s)&&PE(s)}async function Yy(s,e){const t=Se(s);t.asyncQueue.verifyOperationInProgress(),J(vs,"RemoteStore received new credentials");const r=Is(t);t.da.add(3),await Pl(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await rh(t)}async function ZA(s,e){const t=Se(s);e?(t.da.delete(2),await rh(t)):e||(t.da.add(2),await Pl(t),t.Va.set("Unknown"))}function Go(s){return s.fa||(s.fa=function(t,r,o){const l=Se(t);return l.oa(),new LA(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{e_:$A.bind(null,s),n_:KA.bind(null,s),i_:qA.bind(null,s),Y_:HA.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),ap(s)?op(s):s.Va.set("Unknown")):(await s.fa.stop(),TE(s))})),s.fa}function _i(s){return s.ga||(s.ga=function(t,r,o){const l=Se(t);return l.oa(),new FA(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:QA.bind(null,s),i_:JA.bind(null,s),na:XA.bind(null,s),ra:YA.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await Rl(s)):(await s.ga.stop(),s.Ia.length>0&&(J(vs,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,d=new lp(e,t,c,o,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(s,e){if(Ht("AsyncQueue",`${e}: ${s}`),wi(s))return new le(H.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{static emptySet(e){return new Ro(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ie.comparator(t.key,r.key):(t,r)=>ie.comparator(t.key,r.key),this.keyedMap=Wa(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ro)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ro;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.pa=new et(ie.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):ce(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class $o{constructor(e,t,r,o,l,c,d,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new $o(e,t,Ro.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class t1{constructor(){this.queries=Zy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Se(t),l=o.queries;o.queries=Zy(),l.forEach((c,d)=>{for(const p of d.Sa)p.onError(r)})})(this,new le(H.ABORTED,"Firestore shutting down"))}}function Zy(){return new Dr(s=>Pv(s),Wc)}async function n1(s,e){const t=Se(s);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Da()&&e.va()&&(r=2):(l=new e1,r=e.va()?0:1);try{switch(r){case 0:l.ba=await t.onListen(o,!0);break;case 1:l.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=up(c,`Initialization of query '${To(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.Fa(t.onlineState),l.ba&&e.Ma(l.ba)&&cp(t)}async function r1(s,e){const t=Se(s),r=e.query;let o=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.va()?0:1:!l.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function i1(s,e){const t=Se(s);let r=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Ma(o)&&(r=!0);c.ba=o}}r&&cp(t)}function s1(s,e,t){const r=Se(s),o=r.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);r.queries.delete(e)}function cp(s){s.Ca.forEach(e=>{e.next()})}var Af,e_;(e_=Af||(Af={})).xa="default",e_.Cache="cache";class o1{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new $o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.key=e}}class CE{constructor(e){this.key=e}}class a1{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Re(),this.mutatedKeys=Re(),this.Za=Rv(e),this.Xa=new Ro(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new Jy,o=t?t.Xa:this.Xa;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,I)=>{const N=o.get(w),B=Sl(this.query,I)?I:null,Q=!!N&&this.mutatedKeys.has(N.key),G=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let K=!1;N&&B?N.data.isEqual(B.data)?Q!==G&&(r.track({type:3,doc:B}),K=!0):this.ru(N,B)||(r.track({type:2,doc:B}),K=!0,(p&&this.Za(B,p)>0||_&&this.Za(B,_)<0)&&(d=!0)):!N&&B?(r.track({type:0,doc:B}),K=!0):N&&!B&&(r.track({type:1,doc:N}),K=!0,(p||_)&&(d=!0)),K&&(B?(c=c.add(B),l=G?l.add(w):l.delete(w)):(c=c.delete(w),l=l.delete(w)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),l=l.delete(w.key),r.track({type:1,doc:w})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((w,I)=>function(B,Q){const G=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Vt:K})}};return G(B)-G(Q)}(w.type,I.type)||this.Za(w.doc,I.doc)),this.iu(r),o=o!=null&&o;const d=t&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,_=p!==this.Ja;return this.Ja=p,c.length!==0||_?{snapshot:new $o(this.query,e.Xa,l,c,e.mutatedKeys,p===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Jy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Re(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new CE(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new RE(r))}),t}au(e){this.Ha=e.$s,this.Ya=Re();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return $o.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const hp="SyncEngine";class l1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class u1{constructor(e){this.key=e,this.cu=!1}}class c1{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Dr(d=>Pv(d),Wc),this.Pu=new Map,this.Tu=new Set,this.Iu=new et(ie.comparator),this.Eu=new Map,this.du=new Zf,this.Au={},this.Ru=new Map,this.Vu=_s.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function h1(s,e,t=!0){const r=bE(s);let o;const l=r.hu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await kE(r,e,t,!0),o}async function d1(s,e){const t=bE(s);await kE(t,e,!0,!1)}async function kE(s,e,t,r){const o=await kA(s.localStore,Cn(e)),l=o.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await f1(s,e,l,c==="current",o.resumeToken)),s.isPrimaryClient&&t&&wE(s.remoteStore,o),d}async function f1(s,e,t,r,o){s.fu=(I,N,B)=>async function(G,K,we,he){let se=K.view.tu(we);se.Cs&&(se=await Hy(G.localStore,K.query,!1).then(({documents:C})=>K.view.tu(C,se)));const _e=he&&he.targetChanges.get(K.targetId),Ae=he&&he.targetMismatches.get(K.targetId)!=null,me=K.view.applyChanges(se,G.isPrimaryClient,_e,Ae);return n_(G,K.targetId,me.ou),me.snapshot}(s,I,N,B);const l=await Hy(s.localStore,e,!0),c=new a1(e,l.$s),d=c.tu(l.documents),p=Al.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),_=c.applyChanges(d,s.isPrimaryClient,p);n_(s,t,_.ou);const w=new l1(e,t,c);return s.hu.set(e,w),s.Pu.has(t)?s.Pu.get(t).push(e):s.Pu.set(t,[e]),_.snapshot}async function p1(s,e,t){const r=Se(s),o=r.hu.get(e),l=r.Pu.get(o.targetId);if(l.length>1)return r.Pu.set(o.targetId,l.filter(c=>!Wc(c,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Tf(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&ip(r.remoteStore,o.targetId),Pf(r,o.targetId)}).catch(Es)):(Pf(r,o.targetId),await Tf(r.localStore,o.targetId,!0))}async function m1(s,e){const t=Se(s),r=t.hu.get(e),o=t.Pu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ip(t.remoteStore,r.targetId))}async function g1(s,e,t){const r=OE(s);try{const o=await function(c,d){const p=Se(c),_=st.now(),w=d.reduce((B,Q)=>B.add(Q.key),Re());let I,N;return p.persistence.runTransaction("Locally write mutations","readwrite",B=>{let Q=pn(),G=Re();return p.Bs.getEntries(B,w).next(K=>{Q=K,Q.forEach((we,he)=>{he.isValidDocument()||(G=G.add(we))})}).next(()=>p.localDocuments.getOverlayedDocuments(B,Q)).next(K=>{I=K;const we=[];for(const he of d){const se=xS(he,I.get(he.key).overlayedDocument);se!=null&&we.push(new Ii(he.key,se,_v(se.value.mapValue),rn.exists(!0)))}return p.mutationQueue.addMutationBatch(B,_,we,d)}).next(K=>{N=K;const we=K.applyToLocalDocumentSet(I,G);return p.documentOverlayCache.saveOverlays(B,K.batchId,we)})}).then(()=>({batchId:N.batchId,changes:kv(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let _=c.Au[c.currentUser.toKey()];_||(_=new et(Ie)),_=_.insert(d,p),c.Au[c.currentUser.toKey()]=_}(r,o.batchId,t),await Cl(r,o.changes),await Rl(r.remoteStore)}catch(o){const l=up(o,"Failed to persist write");t.reject(l)}}async function xE(s,e){const t=Se(s);try{const r=await PA(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Eu.get(l);c&&(pe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.cu=!0:o.modifiedDocuments.size>0?pe(c.cu,14607):o.removedDocuments.size>0&&(pe(c.cu,42227),c.cu=!1))}),await Cl(t,r,e)}catch(r){await Es(r)}}function t_(s,e,t){const r=Se(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=Se(c);p.onlineState=d;let _=!1;p.queries.forEach((w,I)=>{for(const N of I.Sa)N.Fa(d)&&(_=!0)}),_&&cp(p)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function y1(s,e,t){const r=Se(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),l=o&&o.key;if(l){let c=new et(ie.comparator);c=c.insert(l,at.newNoDocument(l,ye.min()));const d=Re().add(l),p=new Jc(ye.min(),new Map,new et(Ie),c,d);await xE(r,p),r.Iu=r.Iu.remove(l),r.Eu.delete(e),dp(r)}else await Tf(r.localStore,e,!1).then(()=>Pf(r,e,t)).catch(Es)}async function _1(s,e){const t=Se(s),r=e.batch.batchId;try{const o=await AA(t.localStore,e);VE(t,r,null),NE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Cl(t,o)}catch(o){await Es(o)}}async function v1(s,e,t){const r=Se(s);try{const o=await function(c,d){const p=Se(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return p.mutationQueue.lookupMutationBatch(_,d).next(I=>(pe(I!==null,37113),w=I.keys(),p.mutationQueue.removeMutationBatch(_,I))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,w,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>p.localDocuments.getDocuments(_,w))})}(r.localStore,e);VE(r,e,t),NE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Cl(r,o)}catch(o){await Es(o)}}function NE(s,e){(s.Ru.get(e)||[]).forEach(t=>{t.resolve()}),s.Ru.delete(e)}function VE(s,e,t){const r=Se(s);let o=r.Au[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function Pf(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Pu.get(e))s.hu.delete(r),t&&s.lu.gu(r,t);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(r=>{s.du.containsKey(r)||DE(s,r)})}function DE(s,e){s.Tu.delete(e.path.canonicalString());const t=s.Iu.get(e);t!==null&&(ip(s.remoteStore,t),s.Iu=s.Iu.remove(e),s.Eu.delete(t),dp(s))}function n_(s,e,t){for(const r of t)r instanceof RE?(s.du.addReference(r.key,e),E1(s,r)):r instanceof CE?(J(hp,"Document no longer in limbo: "+r.key),s.du.removeReference(r.key,e),s.du.containsKey(r.key)||DE(s,r.key)):ce(19791,{pu:r})}function E1(s,e){const t=e.key,r=t.path.canonicalString();s.Iu.get(t)||s.Tu.has(r)||(J(hp,"New document in limbo: "+t),s.Tu.add(r),dp(s))}function dp(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const t=new ie(je.fromString(e)),r=s.Vu.next();s.Eu.set(r,new u1(t)),s.Iu=s.Iu.insert(t,r),wE(s.remoteStore,new Rr(Cn(Kf(t.path)),r,"TargetPurposeLimboResolution",Pn.le))}}async function Cl(s,e,t){const r=Se(s),o=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,p)=>{c.push(r.fu(p,e,t).then(_=>{var w;if((_||t)&&r.isPrimaryClient){const I=_?!_.fromCache:(w=t==null?void 0:t.targetChanges.get(p.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(_){o.push(_);const I=np.Rs(p.targetId,_);l.push(I)}}))}),await Promise.all(c),r.lu.Y_(o),await async function(p,_){const w=Se(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>M.forEach(_,N=>M.forEach(N.ds,B=>w.persistence.referenceDelegate.addReference(I,N.targetId,B)).next(()=>M.forEach(N.As,B=>w.persistence.referenceDelegate.removeReference(I,N.targetId,B)))))}catch(I){if(!wi(I))throw I;J(rp,"Failed to update sequence numbers: "+I)}for(const I of _){const N=I.targetId;if(!I.fromCache){const B=w.xs.get(N),Q=B.snapshotVersion,G=B.withLastLimboFreeSnapshotVersion(Q);w.xs=w.xs.insert(N,G)}}}(r.localStore,l))}async function w1(s,e){const t=Se(s);if(!t.currentUser.isEqual(e)){J(hp,"User change. New user:",e.toKey());const r=await gE(t.localStore,e);t.currentUser=e,function(l,c){l.Ru.forEach(d=>{d.forEach(p=>{p.reject(new le(H.CANCELLED,c))})}),l.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cl(t,r.ks)}}function I1(s,e){const t=Se(s),r=t.Eu.get(e);if(r&&r.cu)return Re().add(r.key);{let o=Re();const l=t.Pu.get(e);if(!l)return o;for(const c of l){const d=t.hu.get(c);o=o.unionWith(d.view.eu)}return o}}function bE(s){const e=Se(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=xE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y1.bind(null,e),e.lu.Y_=i1.bind(null,e.eventManager),e.lu.gu=s1.bind(null,e.eventManager),e}function OE(s){const e=Se(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v1.bind(null,e),e}class El{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return mE(this.persistence,new pE,e.initialUser,this.serializer)}Su(e){return new ep(th.fi,this.serializer)}bu(e){return new _E}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}El.provider={build:()=>new El};class T1 extends El{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){pe(this.persistence.referenceDelegate instanceof kc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uE(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new ep(r=>kc.fi(r,t),this.serializer)}}class S1 extends El{constructor(e,t,r){super(),this.Fu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await OE(this.Fu.syncEngine),await Rl(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return mE(this.persistence,new pE,e.initialUser,this.serializer)}vu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new uE(r,e.asyncQueue,t)}Cu(e,t){const r=new RT(t,this.persistence);return new PT(e.asyncQueue,r)}Su(e){const t=wA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new tp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,MA(),hc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new _E}}class Nc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>t_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=w1.bind(null,this.syncEngine),await ZA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new t1}()}createDatastore(e){const t=nh(e.databaseInfo.databaseId),r=function(l){return new OA(l)}(e.databaseInfo);return function(l,c,d,p){return new zA(l,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,l,c,d){return new jA(r,o,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>t_(this.syncEngine,t,0),function(){return Qy.C()?new Qy:new NA}())}createSyncEngine(e,t){return function(o,l,c,d,p,_,w){const I=new c1(o,l,c,d,p,_);return w&&(I.mu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Se(o);J(vs,"RemoteStore shutting down."),l.da.add(5),await Pl(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Nc.provider={build:()=>new Nc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="FirestoreClient";class P1{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=qt.UNAUTHENTICATED,this.clientId=G_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{J(vi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(J(vi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=up(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gd(s,e){s.asyncQueue.verifyOperationInProgress(),J(vi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await gE(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function r_(s,e){s.asyncQueue.verifyOperationInProgress();const t=await R1(s);J(vi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>Yy(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>Yy(e.remoteStore,o)),s._onlineComponents=e}async function R1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){J(vi,"Using user provided OfflineComponentProvider");try{await Gd(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ll("Error using user provided cache. Falling back to memory cache: "+t),await Gd(s,new El)}}else J(vi,"Using default OfflineComponentProvider"),await Gd(s,new T1(void 0));return s._offlineComponents}async function ME(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(J(vi,"Using user provided OnlineComponentProvider"),await r_(s,s._uninitializedComponentsProvider._online)):(J(vi,"Using default OnlineComponentProvider"),await r_(s,new Nc))),s._onlineComponents}function C1(s){return ME(s).then(e=>e.syncEngine)}async function k1(s){const e=await ME(s),t=e.eventManager;return t.onListen=h1.bind(null,e.syncEngine),t.onUnlisten=p1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=d1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=m1.bind(null,e.syncEngine),t}function x1(s,e,t={}){const r=new Cr;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,_){const w=new A1({next:N=>{w.xu(),c.enqueueAndForget(()=>r1(l,I)),N.fromCache&&p.source==="server"?_.reject(new le(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),I=new o1(d,w,{includeMetadataChanges:!0,Qa:!0});return n1(l,I)}(await k1(s),s.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(s,e,t){if(!t)throw new le(H.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function N1(s,e,t,r){if(e===!0&&r===!0)throw new le(H.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function s_(s){if(!ie.isDocumentKey(s))throw new le(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function o_(s){if(ie.isDocumentKey(s))throw new le(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function fp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ce(12329,{type:typeof s})}function Vc(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new le(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fp(s);throw new le(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firestore.googleapis.com",a_=!0;class l_{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V1,this.ssl=a_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:a_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lE)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pp{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mT;switch(r.type){case"firstParty":return new _T(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=i_.get(t);r&&(J("ComponentProvider","Removing Datastore"),i_.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ih(this.firestore,e,this._query)}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class mi extends ih{constructor(e,t,r){super(e,t,Kf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new ie(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function u_(s,e,...t){if(s=kr(s),FE("collection","path",e),s instanceof pp){const r=je.fromString(e,...t);return o_(r),new mi(s,null,r)}{if(!(s instanceof qn||s instanceof mi))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(je.fromString(e,...t));return o_(r),new mi(s.firestore,null,r)}}function UE(s,e,...t){if(s=kr(s),arguments.length===1&&(e=G_.newId()),FE("doc","path",e),s instanceof pp){const r=je.fromString(e,...t);return s_(r),new qn(s,null,new ie(r))}{if(!(s instanceof qn||s instanceof mi))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(je.fromString(e,...t));return s_(r),new qn(s.firestore,s instanceof mi?s.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="AsyncQueue";class h_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new vE(this,"async_queue_retry"),this.rc=()=>{const r=hc();r&&J(c_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=hc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=hc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Cr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!wi(e))throw e;J(c_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Ht("INTERNAL UNHANDLED ERROR: ",d_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=lp.createAndSchedule(this,e,t,r,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&ce(47125,{cc:d_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function d_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class sh extends pp{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new h_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h_(e),this._firestoreClient=void 0,await e}}}function D1(s,e,t){t||(t=Ec);const r=J0(s,"firestore");if(r.isInitialized(t)){const o=r.getImmediate({identifier:t}),l=r.getOptions(t);if(mc(l,e))return o;throw new le(H.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new le(H.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lE)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Fc(e.host)&&$I(e.host),r.initialize({options:e,instanceIdentifier:t})}function zE(s){if(s._terminated)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||b1(s),s._firestoreClient}function b1(s){var e,t,r;const o=s._freezeSettings(),l=function(d,p,_,w){return new nS(d,p,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,LE(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new P1(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(pt.fromBase64String(e))}catch(t){throw new le(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ko(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=/^__.*__$/;class M1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ho(e,this.data,t,this.fieldTransforms)}}function jE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ic:s})}}class _p{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new _p(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Dc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(jE(this.Ic)&&O1.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class L1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nh(e)}bc(e,t,r,o=!1){return new _p({Ic:e,methodName:t,wc:r,path:it.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function F1(s){const e=s._freezeSettings(),t=nh(s._databaseId);return new L1(s._databaseId,!!e.ignoreUndefinedProperties,t)}function U1(s,e,t,r,o,l={}){const c=s.bc(l.merge||l.mergeFields?2:0,e,t,o);HE("Data must be an object, but it was:",c,r);const d=KE(r,c);let p,_;if(l.merge)p=new Rn(c.fieldMask),_=c.fieldTransforms;else if(l.mergeFields){const w=[];for(const I of l.mergeFields){const N=z1(e,I,t);if(!c.contains(N))throw new le(H.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);j1(w,N)||w.push(N)}p=new Rn(w),_=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,_=c.fieldTransforms;return new M1(new nn(d),p,_)}function $E(s,e){if(qE(s=kr(s)))return HE("Unsupported field value:",e,s),KE(s,e);if(s instanceof BE)return function(r,o){if(!jE(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const l=[];let c=0;for(const d of r){let p=$E(d,o.fc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(s,e)}return function(r,o){if((r=kr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TS(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=st.fromDate(r);return{timestampValue:jo(o.serializer,l)}}if(r instanceof st){const l=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jo(o.serializer,l)}}if(r instanceof gp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ko)return{bytesValue:jv(o.serializer,r._byteString)};if(r instanceof qn){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Xf(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof yp)return function(c,d){return{mapValue:{fields:{[zf]:{stringValue:Bf},[Mo]:{arrayValue:{values:c.toArray().map(_=>{if(typeof _!="number")throw d.gc("VectorValues must only contain numeric values.");return qf(d.serializer,_)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${fp(r)}`)}(s,e)}function KE(s,e){const t={};return uv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(s,(r,o)=>{const l=$E(o,e.Ac(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function qE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof st||s instanceof gp||s instanceof Ko||s instanceof qn||s instanceof BE||s instanceof yp)}function HE(s,e,t){if(!qE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=fp(t);throw r==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+r)}}function z1(s,e,t){if((e=kr(e))instanceof mp)return e._internalPath;if(typeof e=="string")return GE(s,e);throw Dc("Field path arguments must be of type string or ",s,!1,void 0,t)}const B1=new RegExp("[~\\*/\\[\\]]");function GE(s,e,t){if(e.search(B1)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new mp(...e.split("."))._internalPath}catch{throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Dc(s,e,t,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new le(H.INVALID_ARGUMENT,d+s+p)}function j1(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $1 extends WE{data(){return super.data()}}function QE(s,e){return typeof e=="string"?GE(s,e):e instanceof mp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new le(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q1{convertValue(e,t="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ws(e,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Mo].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>Ze(c.doubleValue));return new yp(l)}convertGeoPoint(e){return new gp(Ze(e.latitude),Ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=je.fromString(e);pe(Jv(r),9688,{name:e});const o=new ps(r.get(1),r.get(3)),l=new ie(r.popFirst(5));return o.isEqual(t)||Ht(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s,e,t){let r;return r=s?s.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class G1 extends WE{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class dc extends G1{data(e={}){return super.data(e)}}class W1{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Zu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dc(this._firestore,this._userDataWriter,r.key,r,new Zu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const p=new dc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Zu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new dc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Zu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return d.type!==0&&(_=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),w=c.indexOf(d.doc.key)),{type:Q1(d.type),doc:p,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Q1(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:s})}}class X1 extends q1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function Y1(s){s=Vc(s,ih);const e=Vc(s.firestore,sh),t=zE(e),r=new X1(e);return K1(s._query),x1(t,s._query).then(o=>new W1(e,r,s,o))}function J1(s){return XE(Vc(s.firestore,sh),[new Yc(s._key,rn.none())])}function Z1(s,e){const t=Vc(s.firestore,sh),r=UE(s),o=H1(s.converter,e);return XE(t,[U1(F1(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function XE(s,e){return function(r,o){const l=new Cr;return r.asyncQueue.enqueueAndForget(async()=>g1(await C1(r),o,l)),l.promise}(zE(s),e)}class eP{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=rP(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function tP(s){return new eP(s)}class nP{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Nc.provider,this._offlineComponentProvider={build:t=>new S1(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function rP(s){return new nP(void 0)}(function(e,t=!0){(function(o){qo=o})(Uc),xo(new ds("firestore",(r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new sh(new gT(r.getProvider("auth-internal")),new vT(c,r.getProvider("app-check-internal")),function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new le(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(_.options.projectId,w)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),di(Hg,Gg,e),di(Hg,Gg,"esm2017")})();const iP={apiKey:"AIzaSyAoOzH_i6sQoQq59NEXZzi-JcWplENTGfw",authDomain:"famelies.firebaseapp.com",projectId:"famelies",storageBucket:"famelies.firebasestorage.app",messagingSenderId:"876298055884",appId:"1:876298055884:web:022e5a07599ceafe829269",measurementId:"G-8CM4RFVH1W"},sP=tT(iP),Wd=D1(sP,{localCache:tP()});function YE(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(t[r[o]]=s[r[o]]);return t}function JE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oP=JE,ZE=new wl("auth","Firebase",JE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new xf("@firebase/auth");function aP(s,...e){bc.logLevel<=xe.WARN&&bc.warn(`Auth (${Uc}): ${s}`,...e)}function fc(s,...e){bc.logLevel<=xe.ERROR&&bc.error(`Auth (${Uc}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(s,...e){throw vp(s,...e)}function ew(s,...e){return vp(s,...e)}function tw(s,e,t){const r=Object.assign(Object.assign({},oP()),{[e]:t});return new wl("auth","Firebase",r).create(e,{appName:s.name})}function pc(s){return tw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vp(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return ZE.create(s,...e)}function ze(s,e,...t){if(!s)throw vp(e,...t)}function sl(s){const e="INTERNAL ASSERTION FAILED: "+s;throw fc(e),new Error(e)}function Oc(s,e){s||sl(e)}function lP(){return p_()==="http:"||p_()==="https:"}function p_(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lP()||HI()||"connection"in navigator)?navigator.onLine:!0}function cP(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oc(t>e,"Short delay should be less than long delay!"),this.isMobile=KI()||GI()}get(){return uP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(s,e){Oc(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pP=new kl(3e4,6e4);function rw(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function oh(s,e,t,r,o={}){return iw(s,o,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=b_(Object.assign({key:s.config.apiKey},c)).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const _=Object.assign({method:e,headers:p},l);return qI()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Fc(s.emulatorConfig.host)&&(_.credentials="include"),nw.fetch()(await sw(s,s.config.apiHost,t,d),_)})}async function iw(s,e,t){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},dP),e);try{const o=new mP(s),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ec(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,_]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ec(s,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw ec(s,"email-already-in-use",c);if(p==="USER_DISABLED")throw ec(s,"user-disabled",c);const w=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw tw(s,w,_);f_(s,w)}}catch(o){if(o instanceof Ei)throw o;f_(s,"network-request-failed",{message:String(o)})}}async function sw(s,e,t,r){const o=`${e}${t}?${r}`,l=s,c=l.config.emulator?hP(s.config,o):`${s.config.apiScheme}://${o}`;return fP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class mP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ew(this.auth,"network-request-failed")),pP.get())})}}function ec(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=ew(s,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(s,e){return oh(s,"POST","/v1/accounts:delete",e)}async function Mc(s,e){return oh(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yP(s,e=!1){const t=kr(s),r=await t.getIdToken(e),o=ow(r);ze(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:r,authTime:ol(Qd(o.auth_time)),issuedAtTime:ol(Qd(o.iat)),expirationTime:ol(Qd(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Qd(s){return Number(s)*1e3}function ow(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return fc("JWT malformed, contained fewer than 3 sections"),null;try{const o=C_(t);return o?JSON.parse(o):(fc("Failed to decode base64 JWT payload"),null)}catch(o){return fc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function m_(s){const e=ow(s);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ei&&_P(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function _P({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(s){var e;const t=s.auth,r=await s.getIdToken(),o=await Rf(s,Mc(t,{idToken:r}));ze(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];s._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?aw(l.providerUserInfo):[],d=wP(s.providerData,c),p=s.isAnonymous,_=!(s.email&&l.passwordHash)&&!(d!=null&&d.length),w=p?_:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Cf(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(s,I)}async function EP(s){const e=kr(s);await Lc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wP(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function aw(s){return s.map(e=>{var{providerId:t}=e,r=YE(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(s,e){const t=await iw(s,{},async()=>{const r=b_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,c=await sw(s,o,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return s.emulatorConfig&&Fc(s.emulatorConfig.host)&&(p.credentials="include"),nw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TP(s,e){return oh(s,"POST","/v2/accounts:revokeToken",rw(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=m_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:l}=await IP(e,t);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:l}=t,c=new Co;return r&&(ze(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(ze(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(ze(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return sl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(s,e){ze(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,l=YE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Cf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Rf(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yP(this,e)}reload(){return EP(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Lc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ts(this.auth.app))return Promise.reject(pc(this.auth));const e=await this.getIdToken();return await Rf(this,gP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,l,c,d,p,_,w;const I=(r=t.displayName)!==null&&r!==void 0?r:void 0,N=(o=t.email)!==null&&o!==void 0?o:void 0,B=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,Q=(c=t.photoURL)!==null&&c!==void 0?c:void 0,G=(d=t.tenantId)!==null&&d!==void 0?d:void 0,K=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,we=(_=t.createdAt)!==null&&_!==void 0?_:void 0,he=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:se,emailVerified:_e,isAnonymous:Ae,providerData:me,stsTokenManager:C}=t;ze(se&&C,e,"internal-error");const T=Co.fromJSON(this.name,C);ze(typeof se=="string",e,"internal-error"),li(I,e.name),li(N,e.name),ze(typeof _e=="boolean",e,"internal-error"),ze(typeof Ae=="boolean",e,"internal-error"),li(B,e.name),li(Q,e.name),li(G,e.name),li(K,e.name),li(we,e.name),li(he,e.name);const P=new ar({uid:se,auth:e,email:N,emailVerified:_e,displayName:I,isAnonymous:Ae,photoURL:Q,phoneNumber:B,tenantId:G,stsTokenManager:T,createdAt:we,lastLoginAt:he});return me&&Array.isArray(me)&&(P.providerData=me.map(k=>Object.assign({},k))),K&&(P._redirectEventId=K),P}static async _fromIdTokenResponse(e,t,r=!1){const o=new Co;o.updateFromServerResponse(t);const l=new ar({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Lc(l),l}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];ze(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?aw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Co;d.updateFromIdToken(r);const p=new ar({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Cf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,_),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;function as(s){Oc(s instanceof Function,"Expected a class definition");let e=g_.get(s);return e?(Oc(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,g_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lw.type="NONE";const y_=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(s,e,t){return`firebase:${s}:${e}:${t}`}class ko{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=Xd(this.userKey,o.apiKey,l),this.fullPersistenceKey=Xd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Mc(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ko(as(y_),e,r);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||as(y_);const c=Xd(r,e.config.apiKey,e.name);let d=null;for(const _ of t)try{const w=await _._get(c);if(w){let I;if(typeof w=="string"){const N=await Mc(e,{idToken:w}).catch(()=>{});if(!N)break;I=await ar._fromGetAccountInfoResponse(e,N,w)}else I=ar._fromJSON(e,w);_!==l&&(d=I),l=_;break}}catch{}const p=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ko(l,e,r):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(c)}catch{}})),new ko(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kP(e))return"Blackberry";if(xP(e))return"Webos";if(AP(e))return"Safari";if((e.includes("chrome/")||PP(e))&&!e.includes("edge/"))return"Chrome";if(CP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SP(s=sn()){return/firefox\//i.test(s)}function AP(s=sn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PP(s=sn()){return/crios\//i.test(s)}function RP(s=sn()){return/iemobile/i.test(s)}function CP(s=sn()){return/android/i.test(s)}function kP(s=sn()){return/blackberry/i.test(s)}function xP(s=sn()){return/webos/i.test(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(s,e=[]){let t;switch(s){case"Browser":t=__(sn());break;case"Worker":t=`${__(sn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(s,e={}){return oh(s,"GET","/v2/passwordPolicy",rw(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=6;class bP{constructor(e){var t,r,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:DP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v_(this),this.idTokenSubscription=new v_(this),this.beforeStateQueue=new NP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=as(t)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mc(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ts(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ts(this.app))return Promise.reject(pc(this));const t=e?kr(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ts(this.app)?Promise.reject(pc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ts(this.app)?Promise.reject(pc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VP(this),t=new bP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await TP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&as(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[as(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&aP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function MP(s){return kr(s)}class v_{constructor(e){this.auth=e,this.observer=null,this.addObserver=JI(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function LP(s,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(as);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}new kl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kl(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kl(5e3,15e3);var E_="@firebase/auth",w_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zP(s){xo(new ds("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ze(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uw(s)},_=new OP(r,o,l,p);return LP(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xo(new ds("auth-internal",e=>{const t=MP(e.getProvider("auth").getImmediate());return(r=>new FP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(E_,w_,UP(s)),di(E_,w_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=5*60;BI("authIdTokenMaxAge");zP("Browser");const jP=ft.forwardRef(({currentView:s,setCurrentView:e},t)=>{ft.useImperativeHandle(t,()=>({filter(Z){const j=Z.target.value.toLowerCase(),re=r.filter(te=>!!((te.familyName||"").toLowerCase().includes(j)||te.members.some(D=>(D.name||"").toLowerCase().includes(j))));c(re)}}));const[r,o]=ft.useState([]),[l,c]=ft.useState([]),[d,p]=ft.useState(null),[_,w]=ft.useState({key:"2222",familyName:"",wazeLocation:"",members:[{name:"",phone:"",role:"אב"},{name:"",phone:"",role:"אם"}]}),[I,N]=ft.useState(!1),[B,Q]=ft.useState(!1),[G,K]=ft.useState(!1),[we,he]=ft.useState("");ft.useEffect(()=>{(async()=>{const j=u_(Wd,"families"),te=(await Y1(j)).docs.map(D=>({id:D.id,...D.data()}));o(te),c(te)})()},[]);const se=Z=>{let j=localStorage.getItem("familyPhone")=="admin",re=Z.members.map(D=>D.phone.replace(/\D/g,"")),te=localStorage.getItem("familyPhone");return re.indexOf(te)!==-1||j},_e=async()=>{const Z=_.members.some(j=>j.name.trim());if(_.familyName&&_.wazeLocation&&Z){const j={familyName:_.familyName,wazeLocation:_.wazeLocation,members:_.members.filter(re=>re.name.trim()),submittedAt:new Date().toLocaleString("he-IL"),password:localStorage.getItem("pass")};await Z1(u_(Wd,"families"),j).then(re=>{localStorage.getItem("familyPhone")||localStorage.setItem("familyPhone",_.members[0].phone)}),w({familyName:"",wazeLocation:"",members:[{key:"1",name:"",phone:"",role:"אב"},{key:"2",name:"",phone:"",role:"אם"}]}),e("list")}else alert("נא למלא לפחות שם משפחה, מיקום ובן משפחה אחד עם שם")},Ae=(Z,j)=>{Z==="wazeLocation"&&j.includes("google.com/maps")&&(j=k(j)),w({..._,[Z]:j})},me=(Z,j,re)=>{const te=[..._.members];te[Z]={...te[Z],[j]:re},w({..._,members:te})},C=()=>{w({..._,members:[..._.members,{name:"",phone:"",role:"ילד/ה"}]})},T=Z=>{if(_.members.length>1){const j=_.members.filter((re,te)=>te!==Z);w({..._,members:j})}},P=()=>{if(N(!0),!navigator.geolocation){alert("הדפדפן שלך לא תומך במיקום אוטומטי"),N(!1);return}const Z={enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4};navigator.geolocation.getCurrentPosition(j=>{const re=j.coords.latitude.toFixed(6),te=j.coords.longitude.toFixed(6),D=`${re},${te}`;w(q=>({...q,wazeLocation:D})),N(!1)},j=>{N(!1);let re="לא הצלחנו לקבל את המיקום. ";switch(j.code){case j.PERMISSION_DENIED:re+="נדחתה הגישה למיקום. אנא אפשר גישה למיקום בהגדרות הדפדפן.";break;case j.POSITION_UNAVAILABLE:re+="מידע המיקום לא זמין.";break;case j.TIMEOUT:re+="תם הזמן לקבלת המיקום. נסה שוב.";break;default:re+="שגיאה לא ידועה.";break}alert(re)},Z)},k=Z=>{const j=Z.match(/@(-?\d+\.?\d*),(-?\d+\.?\d*)/);if(j){const re=j[1],te=j[2];return`${re},${te}`}return Z},V=Z=>{window.open(`tel:${Z}`,"_self")},b=Z=>{const j=Z.replace(/[-\s]/g,""),re=j.startsWith("0")?"972"+j.substring(1):j;window.open(`https://wa.me/${re}`,"_blank")},A=Z=>{window.open(`https://waze.com/ul?q=${encodeURIComponent(Z)}`,"_blank")},tt=async Z=>{if(console.log("Deleting family:",Z.id,Z.familyName),!se(Z)){K(!0);return}window.confirm(`האם אתה בטוח שברצונך למחוק את משפחת ${Z.familyName}?`)&&await J1(UE(Wd,"families",Z.id))},wt=Z=>{e("form"),w({familyName:Z.familyName,wazeLocation:Z.wazeLocation,members:Z.members.filter(j=>j.name.trim()),submittedAt:new Date().toLocaleString("he-IL")})},It=Z=>{p(Z),e("details")};return s==="list"?$.createElement("div",{style:{padding:"0"}},$.createElement("div",{className:"rows"},l.map(Z=>$.createElement("div",{key:Z.id,className:"col"},$.createElement("div",{style:{backgroundColor:"#fff",borderBottom:"3px solid #aaa",margin:"0px 0px 10px",padding:"10px 19px"}},$.createElement("div",{style:{width:"calc( 100% - 80px)"},onClick:()=>It(Z)},$.createElement("h5",{className:"card-title mb-1"},"משפחת ",Z.familyName," (",Z.members.filter(j=>j.role=="אב"||j.role=="אם").map(j=>j.name).join(","),")"),$.createElement("p",{className:"card-text text-muted"},Z.members.length," בני משפחה")),$.createElement("div",{style:{float:"left",marginTop:"-40px"},className:"d-flex align-items-center gap-2"},localStorage.getItem("familyPhone")=="admin"&&$.createElement("button",{onClick:j=>{j.stopPropagation(),tt(Z)},className:"btn btn-danger btn-sm",title:"מחק משפחה"},$.createElement(kI,{size:16})))))))):s==="login"?$.createElement("div",{style:{padding:"20px"}},$.createElement("button",{onClick:()=>e("form"),className:"btn btn-primary d-flex align-items-center gap-2",style:{margin:"10px 0"}},$.createElement(RI,{size:20}),"משפחה חדשה"),$.createElement("div",{style:{direction:"rtl",margin:"0 auto",textAlign:"right"}},$.createElement("label",{className:"form-label"},"מספר טלפון *"),$.createElement("input",{id:"phoneTb",style:{width:"400px",textAlign:"right"},onKeyUp:Z=>{console.log("aaa",Z.target.value),Z.target.value=="admin"&&(document.getElementById("passTb").style.display="block",console.log("aaa"))},className:"form-control mb-3",placeholder:"הכנס מספר טלפון"}),$.createElement("input",{id:"passTb",style:{width:"400px",textAlign:"right",display:"none"},className:"form-control mb-3",placeholder:"סיסמא"}),$.createElement("button",{onClick:()=>{localStorage.setItem("familyPhone",document.getElementById("phoneTb").value),localStorage.setItem("pass",document.getElementById("passTb").value),e("form")},className:"btn btn-primary d-flex align-items-center gap-2"},"כניסה"))):s==="form"?$.createElement("div",{style:{padding:"20px"}},$.createElement("div",{className:"d-flex align-items-center justify-content-between mb-4"},$.createElement("h1",{className:"h3 mb-0"},"רישום משפחה חדשה")),$.createElement("div",{className:"row g-4"},$.createElement("div",{className:"col-12"},$.createElement("label",{className:"form-label"},"שם המשפחה *"),$.createElement("input",{type:"text",value:_.familyName,onChange:Z=>Ae("familyName",Z.target.value),className:"form-control",placeholder:"הכנס את שם המשפחה"})),$.createElement("div",{className:"col-12"},$.createElement("label",{className:"form-label"},"מיקום בוויז *"),$.createElement("input",{type:"text",value:_.wazeLocation,onChange:Z=>Ae("wazeLocation",Z.target.value),className:"form-control mb-3",placeholder:"כתובת מלאה או הדבק קישור מגוגל מפות"}),$.createElement("button",{onClick:P,disabled:I,className:"btn btn-outline-primary mb-3"},I?"מקבל מיקום...":"קבל מיקום נוכחי"),$.createElement("div",{className:"alert alert-info"},$.createElement("strong",{className:"d-block mb-2"},"💡 דרכים לקבל את המיקום שלך:"),$.createElement("ul",{className:"mb-0"},$.createElement("li",null,"פתח גוגל מפות בטלפון → שתף מיקום → העתק קישור"),$.createElement("li",null,"בוויז: לחץ על הבית → שתף → העתק קישור"),$.createElement("li",null,'כתוב כתובת מלאה: "רחוב 123, עיר"'),$.createElement("li",null,"בגוגל: חפש את הכתובת שלך → העתק הקואורדינטות")))),$.createElement("div",{className:"col-12"},$.createElement("div",{className:"d-flex align-items-center justify-content-between mb-3"},$.createElement("label",{className:"form-label"},"בני המשפחה *"),$.createElement("button",{type:"button",onClick:C,className:"btn btn-success btn-sm d-flex align-items-center gap-2"},$.createElement(xI,{size:16}),"הוסף בן משפחה")),_.members.map((Z,j)=>$.createElement("div",{key:j,className:"card mb-3"},$.createElement("div",{className:"card-body"},$.createElement("div",{className:"d-flex align-items-center justify-content-between mb-3"},$.createElement("div",{className:"d-flex align-items-center gap-2"},$.createElement(bg,{size:20}),$.createElement("span",{className:"fw-medium"},"בן משפחה ",j+1)),_.members.length>1&&$.createElement("button",{type:"button",onClick:()=>T(j),className:"btn btn-link text-danger p-0"},$.createElement(VI,{size:16}))),$.createElement("div",{className:"row g-3"},$.createElement("div",{className:"col-md-4"},$.createElement("input",{type:"text",value:Z.role,onChange:re=>me(j,"role",re.target.value),className:"form-control",placeholder:"תפקיד (אב/אם/ילד)"})),$.createElement("div",{className:"col-md-4"},$.createElement("input",{type:"text",value:Z.name,onChange:re=>me(j,"name",re.target.value),className:"form-control",placeholder:"שם פרטי"})),$.createElement("div",{className:"col-md-4"},$.createElement("input",{type:"tel",value:Z.phone,onChange:re=>me(j,"phone",re.target.value),className:"form-control",placeholder:"טלפון"}))))))),$.createElement("div",{className:"col-12"},$.createElement("button",{onClick:_e,className:"btn btn-success w-100"},"שלח טופס משפחה")))):s==="details"&&d?$.createElement("div",null,$.createElement("div",{style:{padding:"20px"}},$.createElement("div",null,$.createElement("div",null,$.createElement("div",{className:"d-flex align-items-center justify-content-between mb-4"},$.createElement("div",{className:"d-flex align-items-center gap-3"},se(d)&&$.createElement("button",{className:"btn btn-secondary",onClick:()=>wt(d)},"ערוך"))),$.createElement("div",{className:"row g-4"},$.createElement("div",{className:"col-12 text-center"},$.createElement("div",{className:"card"},$.createElement("div",{className:"card-body"},$.createElement("div",{className:"avatar-circle bg-primary text-white rounded-circle mx-auto mb-3",style:{padding:"15px 5px",width:"80px",height:"80px",fontSize:"32px"}},$.createElement(NI,{size:45})),$.createElement("h2",{className:"h4 mb-2"},"משפחת ",d.familyName),$.createElement("div",{className:"d-flex align-items-center gap-3"},$.createElement(Dg,{size:24}),$.createElement("div",null,$.createElement("p",{className:"fw-semibold mb-1"},"מיקום"),$.createElement("p",{className:"text-muted"},d.wazeLocation))),$.createElement("button",{onClick:()=>A(d.wazeLocation),className:"btn btn-primary d-flex align-items-center gap-2"},$.createElement(Dg,{size:16}),"נווט")))),$.createElement("div",{className:"col-12"},$.createElement("div",{className:"row row-cols-1 g-4"},d.members.map((Z,j)=>$.createElement("div",{key:j,className:"col"},$.createElement("div",{className:"card"},$.createElement("div",{className:"card-body d-flex align-items-center justify-content-between"},$.createElement("div",{className:"d-flex align-items-center gap-3"},$.createElement("div",{className:"avatar-circle bg-primary-subtle text-primary rounded-circle",style:{padding:"4px 5px",width:"40px",height:"40px",fontSize:"16px"}},$.createElement(bg,{size:30})),$.createElement("div",null,$.createElement("p",{className:"fw-semibold mb-1"},Z.name||"ללא שם"),$.createElement("p",{className:"text-muted small"},Z.role),Z.phone&&$.createElement("p",{className:"text-muted"},Z.phone)))),Z.phone&&$.createElement("div",{className:"gap-2"},$.createElement("button",{onClick:()=>b(Z.phone),className:"btn btn-success",style:{width:"50%",borderRadius:"0 0 4px"}},$.createElement(AI,{size:16}),$.createElement("span",{style:{marginRight:"5px"}},"ווטסאפ")),$.createElement("button",{onClick:()=>V(Z.phone),className:"btn btn-primary",style:{width:"50%",borderRadius:"0 0 0 4px"}},$.createElement(PI,{size:16}),$.createElement("span",{style:{marginRight:"5px"}},"התקשר"))))))))))))):null}),$P=()=>{const[s,e]=ft.useState(!1),[t,r]=ft.useState("list"),o=ft.useRef(),l=()=>{e(!s)},c=p=>{e(!1),r(p)},d=p=>{r("list"),o.current.filter(p)};return $.createElement("div",{id:"pwrap",className:"page_"+t},$.createElement("nav",{id:"topbar",className:"navbar navbar-light"},$.createElement("img",{style:{height:"55px"},src:"images/logo2.png",alt:"אפליקציית תושבים",className:"logo"}),$.createElement(CI,{id:"searchIcon",style:{},onClick:()=>{document.getElementById("searchTB").classList.toggle("show")}}),$.createElement("input",{id:"searchTB",type:"text",className:"form-control",onKeyUp:d,style:{position:"fixed",left:"112px",width:"200px"},placeholder:"חיפוש משפחה"}),$.createElement("button",{className:"navbar-toggler",type:"button",onClick:l},$.createElement("span",{className:"navbar-toggler-icon"}))),s&&$.createElement("div",{id:"sidebar",tabIndex:0,onBlur:()=>e(!1)},$.createElement("ul",{className:""},$.createElement("li",{className:"nav-item"},$.createElement("a",{className:"nav-link",href:"#",onClick:()=>c("list")},"רשימת טלפונים")),$.createElement("li",{className:"nav-item"},$.createElement("a",{className:"nav-link",href:"#",onClick:()=>c("login")},"כניסה")))),t!=="list"&&$.createElement("div",{className:"back-to-list"},$.createElement("button",{onClick:()=>c("list"),className:"btn btn-link text-decoration-none d-flex align-items-center gap-2"},$.createElement(SI,{size:20}),"חזרה לרשימה")),$.createElement(jP,{ref:o,setCurrentView:c,currentView:t}))};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/worker.js").then(s=>{console.log("SW registered:",s),navigator.serviceWorker.controller||(console.log("Page not controlled yet — reloading..."),location.reload())}).catch(s=>console.error("SW registration failed:",s))});const KP=EI.createRoot(document.getElementById("app"));KP.render($.createElement($P,null));
